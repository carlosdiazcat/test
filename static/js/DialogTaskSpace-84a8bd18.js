import{u as e,w as a,s as l,a as t,b as s,j as o,m as n,n as u}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as d,j as i,r,w as c,b4 as p,b5 as m,b7 as v,q as h,bc as _,F as f,bl as y,bb as b,ba as w,be as g,bf as D,bn as T,l as A}from"./Akubela-element-plus-Vendor-47553b40.js";import{_ as V,a as k}from"./CommonFanSpeed-c29974ec.js";import{_ as j}from"./CommonChoiceTamperature-02779d00.js";import{_ as C}from"./CommonBrightness-49ed89ea.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const S={class:"trigger-device-default"},O={class:"trigger-space-default task-space-default"},L={key:0},I={class:"common-big-row"},x={class:"common-big-header"},B=["onClick"],U={class:"common-dialog-left"},E={class:"common-dialog-right"},H={key:0},M={key:1},q={class:"common-big-row"},F=["onClick"],W={class:"common-dialog-left"},$={class:"common-dialog-right common-dialog-camera"},P={__name:"DialogTaskSpaceDefault",props:{show:{type:Boolean,required:!0,default:!1},spaceObj:{type:Object,required:!0,default:()=>{}}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(o,{emit:n}){const u=o,{t:A}=e();let P=a();const R=d({recevieData:{},defaultList:[{label:A("Temperature"),value:"Tamperature",sendType:"temperature"},{label:A("Humidity"),value:"Humidity",sendType:"humidity"},{label:A("Light"),value:"Light",sendType:"light"},{label:A("Siren"),value:"default",sendType:"siren"},{label:A("Door/Window"),value:"defaultOpen",sendType:"door"},{label:A("Fan"),value:"default",sendType:"fan"},{label:A("Switch"),value:"default",sendType:"switch"},{label:A("Curtain"),value:"defaultOpen",sendType:"curtain"},{label:A("Music"),value:"Music",sendType:"music"},{label:A("Camera"),value:"camera",sendType:"music"},{label:A("HVAC"),value:"climate",sendType:"climate"},{label:A("HVAC"),value:"multi_climate",sendType:"multi_climate"},{label:A("TV"),value:"tv",sendType:"tv"}],sendDataArr:[],recordValue:0,showType:"",sendType:"",resultData:[],sendData:{},oldDeviceId:"",triggerDetail:[],sliderValue:0,sliderType:"",energyTime:0,energyType:0,tamperature:{value:0,type:""},humidityObj:{value:0,type:""},showArray:[{label:"Adjust to :",select:!0}],brightnessValue:0,mult_set_hvac_mode:"",mult_set_fan_mode:"",mult_set_temperature:0}),z=()=>{n("open-dia-show"),n("update:show",!1)},G=()=>{var e,a;if(Z()){let a={};return a={space_control:{area_id:(null==(e=u.spaceObj)?void 0:e.areaId)||"others",type:"multi_climate"}},R.sendDataArr.forEach((e=>{e.select&&("on"!==e.status&&"off"!==e.status||(a.space_control.action=e.status),"set_hvac_mode"===e.status&&(a.space_control.hvac_mode=R.mult_set_hvac_mode),"set_fan_mode"===e.status&&(a.space_control.fan_mode=R.mult_set_fan_mode),"set_temperature"===e.status&&(a.space_control.temperature=+R.mult_set_temperature),delete e.select)})),n("set-add-obj",a),n("update:show",!1),void(R.sendDataArr=[])}if(ee()){let e=[];return R.sendDataArr.forEach((a=>{var l;let t={};a.select&&(t={space_control:{area_id:(null==(l=u.spaceObj)?void 0:l.areaId)||"others",type:R.sendType,action:a.status}},"light"===a.status&&(t.space_control.action="brightness",t.space_control.value=R.brightnessValue),delete a.select,e.push(t))})),n("set-add-obj",{is_Mult_Light:!0,arr:e}),n("update:show",!1),void(R.sendDataArr=[])}delete R.sendData.select,(null==(a=u.spaceObj)?void 0:a.areaId)||(R.sendData.space_control.area_id="others"),n("set-add-obj",R.sendData),n("update:show",!1)},J=i({get:()=>u.show,set:e=>{n("update:show",e)}}),K=i((()=>{var e;return ee()||Z()?!R.sendDataArr.length:!(null==(e=R.sendData)?void 0:e.space_control)&&("Tamperature"!==R.showType&&"Power"!==R.showType&&"Humidity"!==R.showType&&"Energy Consumption"!==R.showType)})),N=()=>{n("update:show",!1),n("pop-closed")},Q=r([]),X=r([]),Y=e=>{if(!R.sendDataArr.length)return e.select=!0,void R.sendDataArr.push(e);const a=R.sendDataArr.findIndex((a=>a.status===e.status));if(-1!==a)R.sendDataArr[a].select=!1,R.sendDataArr.splice(a,1);else if("on"===e.status||"off"===e.status){let a=[];R.sendDataArr.forEach(((e,l)=>{"on"!==e.status&&"off"!==e.status||a.push(l)})),a.length&&a.forEach((e=>{R.sendDataArr[e].select=!1,R.sendDataArr.splice(e,1)})),e.select=!0,R.sendDataArr.push(e)}else e.select=!0,R.sendDataArr.push(e)},Z=()=>"multi_climate"===R.showType,ee=()=>"Light"===R.showType,ae=e=>{var a,l,t;Z()?(e=>{var a,l;"set_hvac_mode"===e.status&&(R.mult_set_hvac_mode=(null==(a=null==Q?void 0:Q.value)?void 0:a.length)?Q.value[0]:""),"set_fan_mode"===e.status&&(R.mult_set_fan_mode=(null==(l=null==X?void 0:X.value)?void 0:l.length)?X.value[0]:""),"set_temperature"===e.status&&(R.mult_set_temperature=0),Y(e)})(e):ee()?(e=>{"light"===e.status&&(R.brightnessValue=0),Y(e)})(e):(R.resultData.forEach((e=>e.select=!1)),e.select=!0,R.sendData={space_control:{area_id:(null==(a=u.spaceObj)?void 0:a.areaId)||"",type:R.sendType,action:e.status}},"record"===e.status&&(R.sendData.space_control.value=R.recordValue),"set_hvac_mode"===e.status&&(R.sendData.space_control.value=(null==(l=null==Q?void 0:Q.value)?void 0:l.length)?Q.value[0]:""),"set_fan_mode"===e.status&&(R.sendData.space_control.value=(null==(t=null==X?void 0:X.value)?void 0:t.length)?X.value[0]:""),"set_temperature"===e.status&&(R.sendData.space_control.value=0),"light"===e.status&&(R.sendData.space_control.action="brightness"))},le=e=>{Z()?R.mult_set_temperature=`${e}`:R.sendData.space_control.value=`${e}`};return c((()=>P.updataId),(e=>{l(R.recevieData,e,P)}),{immediate:!0}),c((()=>u.show),(e=>{e?(()=>{var e,a,l,t;R.sendData={};const s=null==(a=null==(e=R.defaultList)?void 0:e.find)?void 0:a.call(e,(e=>{var a;return e.sendType===(null==(a=u.spaceObj)?void 0:a.value)}));if(R.showType=s.value,R.sendType=s.sendType,"default"===R.showType&&(R.resultData=[{label:A("All on"),status:"on",value:"any"},{label:A("All off"),status:"off",value:"any"}]),"tv"===R.showType&&(R.resultData=[{label:A("Toggle"),status:"toggle",value:"any"}]),"Light"===R.showType){R.resultData=[{label:A("All on"),status:"on",value:"any"},{label:A("All off"),status:"off",value:"any"}];const e=(null==(l=u.spaceObj.extendData)?void 0:l.light)||[];let a=[];e.forEach((e=>{a=a.concat(e.support)})),a.includes("brightness")&&R.resultData.push({label:A("Brightness"),status:"light",value:"any"})}if("defaultOpen"===R.showType&&(R.resultData=[{label:A("All open"),status:"on",value:"any"},{label:A("All close"),status:"off",value:"any"}]),"Music"===R.showType&&(R.resultData=[{label:A("All play"),status:"on",value:"any"},{label:A("All stop"),status:"off",value:"any"}]),"camera"===R.showType&&(R.resultData=[{label:A("Capture"),status:"capture"},{label:A("Record Video"),status:"record",value:""}]),"climate"===R.showType||"multi_climate"===R.showType){const e={on:A("All on"),off:A("All off"),set_hvac_mode:A("Switch mode to"),set_fan_mode:A("Switch fan speed to"),set_temperature:A("Set temperature to")};let a=[],l=[],s=[];u.spaceObj.extendData.climate.forEach((e=>{a=[...new Set([...a,...e.support])],s=[...new Set([...s,...e.support_hvac_mode_list])],l=[...new Set([...l,...e.support_fan_mode_list])]})),Q.value=s,X.value=l,R.resultData=null==(t=null==a?void 0:a.map)?void 0:t.call(a,(a=>({label:e[a],status:a})))}})():(R.brightnessValue=0,R.mult_set_hvac_mode="",R.mult_set_fan_mode="",R.mult_set_temperature=0,R.sendDataArr=[])})),(e,a)=>{var l;const o=s,n=T;return p(),m("div",S,[v("div",O,[h(t,{show:J.value,"onUpdate:show":a[7]||(a[7]=e=>J.value=e),"back-show":!0,"is-ash":K.value,title:null==(l=u.spaceObj)?void 0:l.label,onButtonCancel:N,onButtonBack:z,onButtonConfirm:G},{content:_((()=>[v("div",null,[["defaultOpen","default","Music","climate","multi_climate","Light","tv"].includes(R.showType)?(p(),m("div",L,[(p(!0),m(f,null,y(R.resultData,((e,l)=>(p(),m("div",{key:l},[v("div",I,[v("div",x,[v("div",{class:"common-humidity-row",onClick:a=>ae(e)},[v("div",U,[v("div",{class:b(["common-dialog-row-left-text",e.select?"row-left-active":""])},w(e.label),3)]),v("div",E,[h(o,{"icon-class":e.select?"tick_active":""},null,8,["icon-class"])])],8,B)]),e.select?(p(),m("div",H,[Z()||"set_hvac_mode"!==e.status?D("",!0):(p(),g(V,{key:0,modelValue:R.sendData.space_control.value,"onUpdate:modelValue":a[0]||(a[0]=e=>R.sendData.space_control.value=e),modes:Q.value},null,8,["modelValue","modes"])),Z()&&"set_hvac_mode"===e.status?(p(),g(V,{key:1,modelValue:R.mult_set_hvac_mode,"onUpdate:modelValue":a[1]||(a[1]=e=>R.mult_set_hvac_mode=e),modes:Q.value},null,8,["modelValue","modes"])):D("",!0),Z()||"set_fan_mode"!==e.status?D("",!0):(p(),g(k,{key:2,modelValue:R.sendData.space_control.value,"onUpdate:modelValue":a[2]||(a[2]=e=>R.sendData.space_control.value=e),modes:X.value},null,8,["modelValue","modes"])),Z()&&"set_fan_mode"===e.status?(p(),g(k,{key:3,modelValue:R.mult_set_fan_mode,"onUpdate:modelValue":a[3]||(a[3]=e=>R.mult_set_fan_mode=e),modes:X.value},null,8,["modelValue","modes"])):D("",!0),Z()||"set_temperature"!==e.status?D("",!0):(p(),g(j,{key:4,"slider-value":R.sendData.space_control.value,"se-temperture":!0,type:"space","onUpdate:sliderValue":le},null,8,["slider-value"])),Z()&&"set_temperature"===e.status?(p(),g(j,{key:5,"slider-value":R.mult_set_temperature,"se-temperture":!0,type:"space","onUpdate:sliderValue":le},null,8,["slider-value"])):D("",!0),ee()||"light"!==e.status?D("",!0):(p(),g(C,{key:6,"slider-value":R.sendData.space_control.value,"onUpdate:sliderValue":a[4]||(a[4]=e=>R.sendData.space_control.value=e),"show-array":R.showArray},null,8,["slider-value","show-array"])),ee()&&"light"===e.status?(p(),g(C,{key:7,"slider-value":R.brightnessValue,"onUpdate:sliderValue":a[5]||(a[5]=e=>R.brightnessValue=e),"show-array":R.showArray},null,8,["slider-value","show-array"])):D("",!0)])):D("",!0)])])))),128))])):D("",!0),"camera"===R.showType?(p(),m("div",M,[(p(!0),m(f,null,y(R.resultData,((e,l)=>(p(),m("div",{key:l},[v("div",q,[v("div",null,[v("div",{class:"common-humidity-row",onClick:a=>ae(e)},[v("div",W,[v("div",{class:b(["common-dialog-row-left-text",e.select?"row-left-active":""])},w(e.label),3)]),v("div",$,["record"===e.status&&e.select?(p(),g(n,{key:0,modelValue:R.recordValue,"onUpdate:modelValue":a[6]||(a[6]=e=>R.recordValue=e),onChange:a=>ae(e)},null,8,["modelValue","onChange"])):D("",!0),h(o,{"icon-class":e.select?"tick_active":""},null,8,["icon-class"])])],8,F)])])])))),128))])):D("",!0)])])),_:1},8,["show","is-ash","title"])])])}}},R={class:"trigger-device-index"},z=["onClick"],G={class:"condition-row-left"},J={class:"condition-left__span"},K={key:0},N=["onClick"],Q={class:"condition-child-row-security"},X={class:"condition-child-row"},Y={class:"condition-child-row__left"},Z=v("div",{class:"condition-child-row__right"},[v("div",{class:"common-row-triangle"})],-1),ee={__name:"DialogTaskSpace",props:{show:{type:Boolean,required:!0,default:!1},type:{type:String,default:"condition"}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(r,{emit:b}){const g=r;o();const{t:T}=e();let V=a();const k=d({recevieData:{},sendData:{},devicesTriggerList:{},defaultIndex:0,deviceShow:!1,spaceObj:{},defaultList:[{label:T("Temperature"),value:"temperature"},{label:T("Humidity"),value:"humidity"},{label:T("Light"),value:"light"},{label:T("Siren"),value:"siren"},{label:T("Door/Window"),value:"door"},{label:T("Fan"),value:"fan"},{label:T("Switch"),value:"switch"},{label:T("Curtain"),value:"curtain"},{label:T("Music"),value:"music"},{label:T("Camera"),value:"camera"},{label:T("HVAC"),value:"climate"},{label:T("HVAC"),value:"multi_climate"},{label:T("TV"),value:"tv"}],spaceList:[],loading:!1});A((()=>{k.loading=!0,setTimeout((()=>{j()}),1e3)}));const j=()=>{S()},C=()=>{b("update:show",!1),b("pop-closed")},S=()=>{var e;k.recevieData[V.wId]=I;const a={type:"config/ak_area/actions",id:V.wId++};k.loading=!0,setTimeout((()=>{k.loading=!1}),1e4),null==(e=V.ws)||e.send(n(a))},O={room:{}},L={room:{}},I=e=>{var a,l;if(k.loading=!1,!e.success)return u(T("errorMessage"),"error");let t={area_id:"all",area_name:T("Whole Home"),options:[]};O.room.all=[],L.room.all=[],e.result.forEach((e=>{var a,l,s,o,n,u,d,i,r,c;""===e.area_name&&(e.area_name=T("Other")),(null==(a=null==e?void 0:e.climate_info)?void 0:a.support)&&(null==(s=null==(l=O.room.all)?void 0:l.push)||s.call(l,e.climate_info),O.room[e.area_id]=[e.climate_info]),(null==(o=null==e?void 0:e.light_info)?void 0:o.support)&&(null==(u=null==(n=L.room.all)?void 0:n.push)||u.call(n,e.light_info),L.room[e.area_id]=[e.light_info]);const p=null==(i=null==(d=k.defaultList)?void 0:d.map)?void 0:i.call(d,(e=>e.value));e.options=null==(c=null==(r=e.options)?void 0:r.filter)?void 0:c.call(r,(e=>p.includes(e))),e.options.forEach((e=>{var a,l;null==(l=null==(a=t.options)?void 0:a.push)||l.call(a,e)}))})),t.options=Array.from(new Set(t.options)),null==(l=null==(a=e.result)?void 0:a.unshift)||l.call(a,t),k.spaceList=e.result},x=e=>{var a,l;const t=null==(l=null==(a=k.defaultList)?void 0:a.find)?void 0:l.call(a,(a=>a.value===e));return(null==t?void 0:t.label)||""},B=()=>{b("open-dia-show"),b("update:show",!1)},U=()=>{if(!H.value)return u(T("please Select Device"),"error")},E=i({get:()=>g.show,set:e=>{b("update:show",e)}}),H=i((()=>{let e=!1;return k.sendData.platform&&(e=!0),e})),M=()=>{b("update:show",!0)},q=e=>{b("set-add-obj",e)},F=()=>{b("update:show",!1),b("pop-closed")};return c((()=>V.updataId),(e=>{l(k.recevieData,e,V)}),{immediate:!0}),c((()=>g.show),(e=>{e&&j()})),(e,a)=>{const l=s;return p(),m("div",R,[h(t,{show:E.value,"onUpdate:show":a[0]||(a[0]=e=>E.value=e),"back-show":!0,"foot-show":!1,"is-ash":!H.value,title:e.$t("Spaces"),loading:k.loading,onButtonCancel:C,onButtonBack:B,onButtonConfirm:U},{content:_((()=>[(p(!0),m(f,null,y(k.spaceList,((e,a)=>(p(),m("div",{key:a},[v("div",{class:"common-dialog-row",onClick:e=>(e=>{if(k.defaultIndex===e)return k.defaultIndex="";k.defaultIndex=e})(a)},[v("div",G,[h(l,{"icon-class":"card_room",class:"device-room__svg"}),v("span",J,w(e.area_name||"other"),1)])],8,z),a===k.defaultIndex?(p(),m("div",K,[(p(!0),m(f,null,y(e.options,((e,a)=>(p(),m("div",{key:a,onClick:a=>(e=>{var a,l;const t=null==(l=null==(a=k.defaultList)?void 0:a.find)?void 0:l.call(a,(a=>a.value===e)),s=k.spaceList[k.defaultIndex].area_id;k.spaceObj={...t,areaId:s,extendData:{climate:O.room[s],light:L.room[s]}},b("update:show",!1),k.deviceShow=!0})(e)},[v("div",Q,[v("div",X,[v("div",Y,[v("span",null,w(x(e)),1)]),Z])])],8,N)))),128))])):D("",!0)])))),128))])),_:1},8,["show","is-ash","title","loading"]),h(P,{show:k.deviceShow,"onUpdate:show":a[1]||(a[1]=e=>k.deviceShow=e),"space-obj":k.spaceObj,onOpenDiaShow:M,onSetAddObj:q,onPopClosed:F},null,8,["show","space-obj"])])}}};export{ee as default};
