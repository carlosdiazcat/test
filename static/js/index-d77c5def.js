import{b as e,r as t,j as a,l as r,w as l,b4 as n,b5 as s,bd as o,b7 as d,ba as i,v as c,q as u,b9 as m,bc as b,be as g,bf as v,F as S,n as h,bz as p,bA as w,bn as f,bk as O,bB as k,bj as N,bg as E,bh as j}from"./Akubela-element-plus-Vendor-47553b40.js";import{o as D,u as T,w as P,an as _,am as y,aQ as C,g as V,n as I,m as R,s as W,b6 as A}from"./Akubela-login-home-part-Vendor-facddf88.js";import{_ as M}from"./index-722e1dac.js";import{e as K,l as z}from"./config-178dd060.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const $={class:"network-part-index"},G={class:"commen-main-box"},U={class:"status"},H={class:"network_title"},L={class:"network_content"},x={class:"image-part"},F=["src"],q=["src"],J={class:"info-part"},X={class:"ethernet"},B={class:"card-header"},Q={class:"engr-common-row"},Y={class:"engr-common-row-left"},Z={class:"engr-common-row-right"},ee={class:"engr-common-row"},te={class:"engr-common-row-left"},ae={class:"engr-common-row-right"},re={class:"engr-common-row"},le={class:"engr-common-row-left"},ne={class:"engr-common-row-right"},se={class:"engr-common-row"},oe={class:"engr-common-row-left"},de={class:"engr-common-row-right"},ie={class:"engr-common-row"},ce={class:"engr-common-row-left"},ue={class:"engr-common-row-right"},me={class:"engr-common-row"},be={class:"engr-common-row-left"},ge={class:"engr-common-row-right"},ve={class:"engr-common-row"},Se={class:"engr-common-row-left"},he={class:"engr-common-row-right"},pe={key:1,class:"call-type"},we={class:"card-header"},fe={class:"engr-common-row"},Oe={class:"engr-common-row-left"},ke={class:"engr-common-row-right"},Ne={__name:"index",setup(Ne){const Ee=D(),{t:je}=T();let De=P();const Te=_().deviceModel,Pe=je("Network Status"),_e=je("Ethernet"),ye=je("Call Type"),Ce=e({recevieData:{},ConnectionObj:{NetworkStatus:1},ethernetObj:{lanIp:"",subnetMask:"",gateWay:"",PreferredDNSServer:"",AlternateDNSServer:""},oldEthernetObj:{},callToCloud:!1,loading:!1,ipTitleShow:!1,deviceCard:{product_type:Ee.deviceModel}}),Ve=t(),Ie=()=>{Ce.ipTitleShow=!1},Re=()=>{He()},We=()=>{JSON.stringify(Ce.oldEthernetObj)===JSON.stringify(Ce.ethernetObj)?(Ce.ipTitleShow=!1,Ae()):Ve.value.validate((async e=>{e&&(Ce.ipTitleShow=!0)}))},Ae=async()=>{Ce.ipTitleShow=!1,Ve.value.validate((async e=>{e&&Le()}))},Me=a((()=>"PS51"===Te||"PS51V2"===Te||"PS52"===Te||"PS52V2"===Te||"KS53"===Te||"PG71"===Te||"X933H"===Te||"PH81"===Te||"PHX1"===Te||"RT61"===Te||"CT61"===Te||"C319H"===Te));a((()=>V(Te?`engr_module_assets/${Te}/loginImg.webp`:"engr_module_assets/PS51/loginImg.webp")));const Ke=a((()=>{var e;return 1===(null==(e=Ce.ConnectionObj)?void 0:e.NetworkStatus)?(h((()=>{document.querySelector("#connectedOrnotConnectedImg").style.height="34px"})),V("engr_module_assets/images/internet_connected.webp")):V("engr_module_assets/images/internet_disconnected.webp")})),ze=a((()=>{var e;return 1===(null==(e=Ce.ConnectionObj)?void 0:e.NetworkStatus)?je("The device is connected to the network"):je("The device is not connected to the network")})),$e=()=>{Ce.ethernetObj={...Ce.oldEthernetObj}};let Ge=(e,t,a)=>Ce.dhcpEnable||t&&A(t)?a():a(je("Please enter a valid DNS server address."));const Ue={lanIp:[{validator:(e,t,a)=>Ce.dhcpEnable||t&&A(t)?a():a(je("Please enter a valid IP address.")),trigger:"blur"}],subnetMask:[{validator:(e,t,a)=>Ce.dhcpEnable||t&&A(t)?a():a(je("Please enter a valid subnet mask address.")),trigger:"blur"}],gateWay:[{validator:(e,t,a)=>Ce.dhcpEnable||t&&A(t)?a():a(je("Please enter a valid gateway address.")),trigger:"blur"}],PreferredDNSServer:[{validator:Ge,trigger:"blur"}],AlternateDNSServer:[{validator:Ge,trigger:"blur"}]},He=()=>{var e,t;Ce.recevieData[De.wId]=e=>{var t,a,r,l,n,s,o,d;if(Ce.loading=!1,!e.success)return I(je("errorMessage"),"error");(null==e?void 0:e.result)&&(Ce.dhcpEnable="1"===(null==(t=e.result)?void 0:t["Settings.NETWORK.DHCPEnable"]),Ce.ethernetObj.lanIp=null==(a=e.result)?void 0:a["Settings.NETWORK.LANIP"],Ce.ethernetObj.gateWay=null==(r=e.result)?void 0:r["Settings.NETWORK.Gateway"],Ce.ethernetObj.subnetMask=null==(l=e.result)?void 0:l["Settings.NETWORK.SubnetMask"],Ce.ethernetObj.PreferredDNSServer=null==(n=e.result)?void 0:n["Settings.NETWORK.PreferredDNSServer"],Ce.ethernetObj.AlternateDNSServer=null==(s=e.result)?void 0:s["Settings.NETWORK.AlternateDNSServer"],Ce.callToCloud=Number(null==(o=e.result)?void 0:o["Indoor.HidePage.TransferCall"]),Ce.cloudServe=null==(d=e.result)?void 0:d["Doorsetting.CLOUDSERVER.GateServer"]),Ce.oldEthernetObj={...Ce.ethernetObj}},Ce.loading=!0,setTimeout((()=>{Ce.loading=!1}),15e3);const a={type:"ak_config/get",id:De.wId++,item:["Settings.NETWORK.DHCPEnable","Settings.NETWORK.LANIP","Settings.NETWORK.SubnetMask","Settings.NETWORK.PreferredDNSServer","Settings.NETWORK.Gateway","Settings.NETWORK.AlternateDNSServer","Indoor.HidePage.TransferCall","Doorsetting.CLOUDSERVER.GateServer"]};null==(e=De.ws)||e.send(R(a)),Ce.recevieData[De.wId]=e=>{Ce.ConnectionObj.NetworkStatus=(null==e?void 0:e.result)?1:0};const r={type:"diagnosis/check_network",id:De.wId++};null==(t=De.ws)||t.send(R(r))},Le=()=>{var e;Ce.recevieData[De.wId]=e=>{if(Ce.loading=!1,!e.success)return I(je("errorMessage"),"error");I(je("Submitted successfully!"),"success"),He()};const t={type:"ak_config/update",id:De.wId++,item:{"Settings.NETWORK.DHCPEnable":Ce.dhcpEnable?1:0,"Settings.NETWORK.Gateway":Ce.ethernetObj.gateWay,"Settings.NETWORK.LANIP":Ce.ethernetObj.lanIp,"Settings.NETWORK.AlternateDNSServer":Ce.ethernetObj.AlternateDNSServer,"Settings.NETWORK.PreferredDNSServer":Ce.ethernetObj.PreferredDNSServer,"Settings.NETWORK.SubnetMask":Ce.ethernetObj.subnetMask}};Ee.getIsGongan&&(t.item["Doorsetting.CLOUDSERVER.GateServer"]=Ce.cloudServe),Ce.loading=!0,setTimeout((()=>{Ce.loading=!1}),15e3),null==(e=De.ws)||e.send(R(t))};return r((()=>{He()})),l((()=>De.updataId),(e=>{W(Ce.recevieData,e,De)}),{immediate:!0}),(e,t)=>{var a,r,l;const h=p,D=w,T=f,P=O,_=k,I=N,R=E,W=j;return n(),s(S,null,[o((n(),s("div",$,[d("section",G,[d("div",U,[d("div",H,i(c(Pe)),1),d("div",L,[d("div",x,[d("div",null,[u(y,{class:"part-f","card-obj":Ce.deviceCard,online:!0},null,8,["card-obj"]),m(" "+i((null==(l=null==(r=c(C))?void 0:r[null==(a=c(Ee))?void 0:a.deviceModel])?void 0:l.name)||""),1)]),d("img",{id:"connectedOrnotConnectedImg",class:"part-s",src:Ke.value},null,8,F),d("img",{class:"part-t",src:c(V)("engr_module_assets/images/internet.webp")},null,8,q)]),d("div",J,i(ze.value),1)])]),d("div",X,[u(_,{ref_key:"form",ref:Ve,model:Ce.ethernetObj,rules:Ue,"label-width":c(z)},{default:b((()=>[u(P,{class:"ethernet-card"},{header:b((()=>[d("div",B,[d("span",null,i(c(_e)),1)])])),default:b((()=>[d("div",Q,[d("div",Y,i(e.$t("DHCP")),1),d("div",Z,[u(D,null,{default:b((()=>[u(h,{modelValue:Ce.dhcpEnable,"onUpdate:modelValue":t[0]||(t[0]=e=>Ce.dhcpEnable=e),"akubela-test":`network-switch-${Ce.dhcpEnable}`,size:c(K),onChange:$e},null,8,["modelValue","akubela-test","size"])])),_:1})])]),d("div",ee,[d("div",te,i(e.$t("LAN IP Address")),1),d("div",ae,[u(D,{prop:"lanIp"},{default:b((()=>[u(T,{modelValue:Ce.ethernetObj.lanIp,"onUpdate:modelValue":t[1]||(t[1]=e=>Ce.ethernetObj.lanIp=e),modelModifiers:{trim:!0},"akubela-test":"network-LAN-IP-Address",size:c(K),disabled:Ce.dhcpEnable},null,8,["modelValue","size","disabled"])])),_:1})])]),d("div",re,[d("div",le,i(e.$t("Subnet Mask")),1),d("div",ne,[u(D,{prop:"subnetMask"},{default:b((()=>[u(T,{modelValue:Ce.ethernetObj.subnetMask,"onUpdate:modelValue":t[2]||(t[2]=e=>Ce.ethernetObj.subnetMask=e),modelModifiers:{trim:!0},"akubela-test":"network-Subnet-Mask",size:c(K),disabled:Ce.dhcpEnable},null,8,["modelValue","size","disabled"])])),_:1})])]),d("div",se,[d("div",oe,i(e.$t("Gateway")),1),d("div",de,[u(D,{prop:"gateWay"},{default:b((()=>[u(T,{modelValue:Ce.ethernetObj.gateWay,"onUpdate:modelValue":t[3]||(t[3]=e=>Ce.ethernetObj.gateWay=e),modelModifiers:{trim:!0},"akubela-test":"network-Gateway",size:c(K),disabled:Ce.dhcpEnable},null,8,["modelValue","size","disabled"])])),_:1})])]),d("div",ie,[d("div",ce,i(e.$t("Preferred DNS Server")),1),d("div",ue,[u(D,{prop:"PreferredDNSServer"},{default:b((()=>[u(T,{modelValue:Ce.ethernetObj.PreferredDNSServer,"onUpdate:modelValue":t[4]||(t[4]=e=>Ce.ethernetObj.PreferredDNSServer=e),modelModifiers:{trim:!0},"akubela-test":"network-Preferred-DNS-Server",size:c(K),disabled:Ce.dhcpEnable},null,8,["modelValue","size","disabled"])])),_:1})])]),d("div",me,[d("div",be,i(e.$t("Alternate DNS Server")),1),d("div",ge,[u(D,{prop:"AlternateDNSServer"},{default:b((()=>[u(T,{modelValue:Ce.ethernetObj.AlternateDNSServer,"onUpdate:modelValue":t[5]||(t[5]=e=>Ce.ethernetObj.AlternateDNSServer=e),modelModifiers:{trim:!0},"akubela-test":"network-Alternate-DNS-Server",size:c(K),disabled:Ce.dhcpEnable},null,8,["modelValue","size","disabled"])])),_:1})])])])),_:1})])),_:1},8,["model","label-width"])]),c(Ee).getIsGongan?(n(),g(P,{key:0,class:"engr-setting-second"},{header:b((()=>[d("div",{class:"card-header text-header",onClick:t[6]||(t[6]=(...t)=>e.openFileTitle&&e.openFileTitle(...t))},[d("span",null,i(e.$t("Cloud Server")),1)])])),default:b((()=>[d("div",ve,[d("div",Se,i(e.$t("Cloud Server")),1),d("div",he,[u(T,{modelValue:Ce.cloudServe,"onUpdate:modelValue":t[7]||(t[7]=e=>Ce.cloudServe=e)},null,8,["modelValue"])])])])),_:1})):v("",!0),Me.value?(n(),s("div",pe,[u(P,{class:"ethernet-card"},{header:b((()=>[d("div",we,[d("span",null,i(c(ye)),1)])])),default:b((()=>[d("div",fe,[d("div",Oe,i(e.$t("Transfer Call to Cloud")),1),d("div",ke,i(Ce.callToCloud?e.$t("Enable"):e.$t("Disable")),1)])])),_:1})])):v("",!0)]),u(M,{onCancel:Re,onSubmit:We})])),[[W,Ce.loading]]),u(R,{modelValue:Ce.ipTitleShow,"onUpdate:modelValue":t[8]||(t[8]=e=>Ce.ipTitleShow=e),"align-center":"",width:"30%"},{footer:b((()=>[u(I,{"akubela-test":"network-dialog-cancel",size:c(K),onClick:Ie},{default:b((()=>[m(i(e.$t("Cancel")),1)])),_:1},8,["size"]),u(I,{"akubela-test":"network-dialog-submit",size:c(K),type:"primary",onClick:Ae},{default:b((()=>[m(i(e.$t("Confirm")),1)])),_:1},8,["size"])])),default:b((()=>[d("span",null,i(e.$t("If the IP of the device changes due to switching networks, you will need to log in again with the new IP.")),1)])),_:1},8,["modelValue"])],64)}}};export{Ne as default};
