import{h as e,u as t,w as i,a as o,n as s,s as a,b as l}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as c,j as n,w as d,b4 as r,b5 as u,q as m,bc as v,b7 as h,ba as w,bb as y,F as k,bl as p,bs as b,bf as f,v as _}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const S={class:"condition-dia-security"},g={class:"condition-row-left"},C={class:"condition-left__span"},N={class:"condition-row-right"},D={key:0},j=["onClick"],A={class:"condition-child-row-security"},L={class:"condition-child-row"},$=["akubela-test"],z=h("div",{class:"condition-child-row__right"},[h("div",{class:"common-row-triangle"})],-1),B={key:0,class:"condition-content-child"},E=["onClick"],V=["akubela-test"],q={key:0,class:"condition-child-row__right"},O={class:"condition-row-left"},x={class:"condition-left__span"},F={class:"condition-row-right"},I={key:0},M=["onClick"],T={class:"condition-child-row-security"},U={class:"condition-child-row"},G={class:"condition-child-row__left"},H=h("div",{class:"condition-child-row__right"},[h("div",{class:"common-row-triangle"})],-1),J={key:0,class:"condition-content-child"},K=["onClick"],P={class:"condition-child-row__left"},Q={key:0,class:"condition-child-row__right"},R={__name:"DialogTaskSecurity",props:{show:{type:Boolean,required:!0,default:!1},type:{type:String,default:"condition"}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(R,{emit:W}){const X=R;let Y=e();const{t:Z}=t();let ee=i();const te=c({recevieData:{},defaultShow:!0,customizeShow:!1,securityNowObj:{},selectedArray:[{title:Z("Arming"),value:"Arm"},{title:Z("Disarm"),value:"Disarm"}],sendData:{}}),ie=()=>{te.customizeShow=!1,te.defaultShow=!0},oe=()=>{te.defaultShow=!1,te.customizeShow=!0},se=e=>{Y.baseSecurityList.forEach((e=>(e.selected=!1,e.selectName=""))),Y.areaSecurityList.forEach((e=>(e.selected=!1,e.selectName=""))),e.selected=!0,te.securityNowObj=e},ae=()=>{W("update:show",!1),W("pop-closed")},le=()=>{W("open-dia-show"),W("update:show",!1)},ce=()=>{if(!me.value)return s(Z("please Select Security"),"error");"condition"===X.type?ne():de()},ne=()=>{W("set-add-obj",te.sendData),W("update:show",!1)},de=()=>{const e=te.sendData;W("set-add-obj",e),W("update:show",!1)},re=n({get:()=>X.show,set:e=>{W("update:show",e)}}),ue=(e,t)=>{e.selectName=t.value,te.sendData={service:"Arm"===t.value?"automation.turn_on":"automation.turn_off",data:{entity_id:e.entity_id}}},me=n((()=>{var e,t,i,o;return!!(null==(t=null==(e=Y.baseSecurityList)?void 0:e.some)?void 0:t.call(e,(e=>null==e?void 0:e.selectName)))||!!(null==(o=null==(i=Y.areaSecurityList)?void 0:i.some)?void 0:o.call(i,(e=>null==e?void 0:e.selectName)))}));return d((()=>ee.updataId),(e=>{a(te.recevieData,e,ee)}),{immediate:!0}),d((()=>X.show),(e=>{e&&(te.sendData={},Y.baseSecurityList.forEach((e=>{e.selected=!1,e.selectName=""})),Y.areaSecurityList.forEach((e=>{e.selected=!1,e.selectName=""})))})),(e,t)=>{const i=l;return r(),u("div",S,[m(o,{show:re.value,"onUpdate:show":t[0]||(t[0]=e=>re.value=e),"back-show":!0,"is-ash":!me.value,title:e.$t("Security"),class:"akubela-test-task-dia-security",onButtonCancel:ae,onButtonBack:le,onButtonConfirm:ce},{content:v((()=>[h("div",null,[h("div",{class:"common-dialog-row",onClick:ie},[h("div",g,[h("span",C,w(e.$t("Default")),1)]),h("div",N,[h("div",{class:y(te.customizeShow?"common-row-triangle":"common-row-triangle-bottom")},null,2)])]),te.defaultShow?(r(),u("div",D,[(r(!0),u(k,null,p(_(Y).baseSecurityList,(t=>(r(),u("div",{key:t.id,onClick:e=>se(t)},[h("div",A,[h("div",L,[h("div",{class:"condition-child-row__left","akubela-test":`scenes-add-task-security-${null==t?void 0:t.name}`},w(e.$t(t.name)),9,$),z]),t.selected?(r(),u("div",B,[(r(!0),u(k,null,p(te.selectedArray,((o,s)=>(r(),u("div",{key:s,class:"condition-child-row",onClick:b((e=>ue(t,o)),["stop"])},[h("div",{class:"condition-child-row__left","akubela-test":`scenes-add-task-security-${null==t?void 0:t.name}-${null==o?void 0:o.value}`},w(e.$t(o.value)),9,V),t.selectName===o.value?(r(),u("div",q,[m(i,{"icon-class":"activeNik"})])):f("",!0)],8,E)))),128))])):f("",!0)])],8,j)))),128))])):f("",!0)]),h("div",null,[h("div",{class:"common-dialog-row",onClick:oe},[h("div",O,[h("span",x,w(e.$t("Customize Mode")),1)]),h("div",F,[h("div",{class:y(te.defaultShow?"common-row-triangle":"common-row-triangle-bottom")},null,2)])]),te.customizeShow?(r(),u("div",I,[(r(!0),u(k,null,p(_(Y).areaSecurityList,(e=>(r(),u("div",{key:e.id,onClick:t=>se(e)},[h("div",T,[h("div",U,[h("div",G,w(e.name),1),H]),e.selected?(r(),u("div",J,[(r(!0),u(k,null,p(te.selectedArray,((t,o)=>(r(),u("div",{key:o,class:"condition-child-row",onClick:b((i=>ue(e,t)),["stop"])},[h("div",P,w(t.title),1),e.selectName===t.value?(r(),u("div",Q,[m(i,{"icon-class":"activeNik"})])):f("",!0)],8,K)))),128))])):f("",!0)])],8,M)))),128))])):f("",!0)])])),_:1},8,["show","is-ash","title"])])}}};export{R as default};
