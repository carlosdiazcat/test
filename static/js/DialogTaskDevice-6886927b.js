import{u as e,j as t,f as l,w as o,s as a,am as s,S as i,g as d,aH as n,a as r,m as _,A as u,B as m,b as c,n as p}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b4 as v,be as y,r as h,b5 as g,q as f,cj as w,b,j as D,w as V,bc as R,b7 as j,ba as k,F as x,bl as A,bb as C,bf as O,b9 as T,v as U,l as S}from"./Akubela-element-plus-Vendor-47553b40.js";import{_ as L}from"./CommonChoiceSlider-61b1a375.js";import{_ as N}from"./CommonBrightness-49ed89ea.js";import{_ as I}from"./CommonChoiceTamperature-02779d00.js";import{_ as B,a as M}from"./CommonFanSpeed-c29974ec.js";import{_ as E}from"./CommonChooseMode-25c0277d.js";import{_ as $}from"./index-7444395c.js";import{t as F}from"./Akubela-scenes-part-Vendor-b442de17.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const q={__name:"CommonChoiceColor",props:{modelValue:{type:Object,default:()=>({x:0,y:0})}},emits:["change"],setup(e,{emit:t}){const l=e=>{t("change",e)};return(t,o)=>(v(),y($,{"model-value":{x:e.modelValue.x,y:e.modelValue.y},onOnLightColor:l},null,8,["model-value"]))}},H={class:"common-light-temperature"},P={__name:"CommonLightTemperature",props:{modelValue:{type:Number,default:153},min:{type:Number,default:153},max:{type:Number,default:500}},emits:["update:modelValue","change"],setup(t,{emit:l}){const o=t,{t:a}=e(),s=h(o.modelValue),i=parseFloat((o.max-o.min)/100),d=e=>{const t=parseInt((e-o.min)/i)+"%";return e<=o.min+50*i?`${t} (${a("cold")})`:e<=o.max?`${t} (${a("Warm")})`:void 0},n=e=>{l("update:modelValue",e),l("change",e)};return(e,l)=>{const o=w;return v(),g("div",H,[f(o,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),min:t.min,max:t.max,"format-tooltip":d,onChange:n},null,8,["modelValue","min","max"])])}}},z={class:"trigger-device-default"},W={class:"tigger-device-top"},G={class:"devices-list-right"},J={key:0,class:"common-big-row"},K=["onClick"],Q={class:"common-dialog-left"},X={class:"common-dialog-right"},Y={key:0},Z={key:3,class:"sonos-bass"},ee=["src"],te={__name:"DialogTaskDeviceDefault",props:{show:{type:Boolean,required:!0,default:!1},deviceObj:{type:Object,required:!0,default:()=>{}}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(p,{emit:h}){const S=p;let $=t();const{t:H}=e(),te=l();let le=o();const oe={set_swing_mode:{auto:H("auto"),fix_1:H("fix_1"),fix_2:H("fix_2"),fix_3:H("fix_3"),fix_4:H("fix_4"),fix_5:H("fix_5"),fix_6:H("fix_6"),fix_7:H("fix_7"),swing:H("mult_swing")},set_preset_mode:{Fan:H("Fan"),Home:H("Home"),Away:H("Away"),Sleep:H("Sleep"),standby:H("Standby"),comfort:H("Comfort"),economy:H("economy"),protection:H("Protection"),auto:H("Auto"),smart:H("smart"),home:H("Home"),away:H("Away"),sleep:H("Sleep"),eco:H("economy"),protect:H("Protection")},play_mode_set:{1:H("SingleRepeat"),2:H("Shuffle"),3:H("Loop"),4:H("PlayInOrder")},set_speed:{low:H("Low"),medium:H("Medium"),high:H("High")},oscillate:{1:H("Turn on"),2:H("Turn off"),3:H("Toggle")},set_heat_recovery:{1:H("Turn on"),2:H("Turn off")}},ae=e=>oe[e]||e||"",se=()=>{var e;return"Light"===(null==(e=null==S?void 0:S.deviceObj)?void 0:e.device_type)},ie=b({recevieData:{},resultData:[],sendData:{},sendDataArr:[],sliderValue:0,sliderType:"",energyTime:0,whiteValue:0,deviceNowObj:{},showArray:[{label:"Adjust to :",select:!0}],loading:!1,isMultiSwitch:!1,isOpenCloseDevice:!1,is_origin_multi_ctrl:!1,mult_set_swing_mode:"",mult_set_hvac_mode:"",mult_set_preset_mode:"",mult_set_heat_recovery:"",mult_set_fan_mode:"",mult_turn_on:"",mult_turn_off:"",mult_toggle:"",mult_set_temperature:0,light_hs_color:[],light_color_temp:[],switchMap:{turn_on:H("Turn On"),turn_off:H("Turn Off"),toggle:H("Toggle on or off")}}),de=e=>e+"%",ne=()=>{},re=()=>{h("open-dia-show"),h("update:show",!1)},_e=()=>{var e,t;if(ie.is_origin_multi_ctrl)(()=>{let e={};ie.sendDataArr.forEach((t=>{"set_hvac_mode"===t.typeReal&&(t.select?e.hvac_mode=ie.mult_set_hvac_mode:e.hvac_mode&&delete e.hvac_mode),"set_fan_mode"===t.typeReal&&(t.select?e.fan_mode=ie.mult_set_fan_mode:e.fan_mode&&delete e.fan_mode),"set_preset_mode"===t.typeReal&&(t.select?e.preset_mode=ie.mult_set_preset_mode:e.preset_mode&&delete e.preset_mode),"set_swing_mode"===t.typeReal&&(t.select?e.swing_mode=ie.mult_set_swing_mode:e.swing_mode&&delete e.swing_mode),"set_heat_recovery"===t.typeReal&&(t.select?e.heat_recovery=ie.mult_set_heat_recovery:e.heat_recovery&&delete e.heat_recovery),"turn_on"!==t.typeReal&&"turn_off"!==t.typeReal&&"toggle"!==t.typeReal||(t.select?e.action=t.typeReal:e.action&&delete t.action),"set_temperature"===t.typeReal&&(t.select?e.temperature=ie.mult_set_temperature:e.temperature&&delete e.temperature),e={...t,...e},delete e.select,delete e.typeReal})),h("set-add-obj",e),h("update:show",!1)})();else{if(se())return ie.sendDataArr.forEach((e=>{e.select&&("hs_color"===e.type&&(e.hs_color=ie.light_hs_color),["Brightness","brightness"].includes(e.type)&&(e.brightness_pct=ie.sliderValue),"white"===e.type&&(e.white=ie.whiteValue),"color_temp"===e.type&&(e.color_temp=ie.light_color_temp)),delete e.select})),h("set-add-obj",{is_Mult_Light:!0,arr:ie.sendDataArr}),h("update:show",!1),void(ie.sendDataArr=[]);if(delete ie.sendData.select,["Brightness","brightness"].includes(ie.sendData.type)&&we(),"Ecobee4"===(null==(e=ie.deviceNowObj)?void 0:e.product_type)&&(ie.sendData.type="set_preset_mode"),null==(t=me.value)?void 0:t.entity_id){const e=ie.sendData.type;ie.sendData={...ie.sendData,type:"toggle_sonos"===e?"toggle":e},"set_volume"===e&&(ie.sendData.volume_level=ie.sliderValue/100)}h("set-add-obj",ie.sendData),h("update:show",!1)}},ue=D({get:()=>S.show,set:e=>{h("update:show",e)}}),me=D((()=>{var e,t;let l={};return l=null==(t=null==(e=ie.deviceNowObj.attributes)?void 0:e.find)?void 0:t.call(e,(e=>"music_play_state"===e.feature)),l})),ce=D((()=>{var e;return"zigbee"===(null==(e=ie.deviceNowObj)?void 0:e.product_attributes)})),pe=()=>{h("update:show",!1),h("pop-closed")},ve=e=>{var t,l,o;ie.loading=!1;let a=[];if(ie.is_origin_multi_ctrl=!1,e.result&&e.result.length&&"multi_ctrl"===e.result[0].type)return e.result.forEach((e=>{e.options.forEach((t=>{a.push({...e,typeReal:t})}))})),ie.is_origin_multi_ctrl=!0,void(ie.resultData=a);ie.resultData=e.result;const s=null==(l=null==(t=ie.resultData)?void 0:t.filter)?void 0:l.call(t,(e=>"turn_on"===e.type));ie.isMultiSwitch=s.length>1,ie.isOpenCloseDevice=u.includes(null==(o=ie.deviceNowObj)?void 0:o.product_type)},ye=e=>{if(!ie.sendDataArr.length)return;const t=ie.sendDataArr.findIndex((t=>ie.is_origin_multi_ctrl?t.typeReal===e.typeReal:t.type===e.type));if(-1!==t)ie.sendDataArr.splice(t,1);else if("multi_ctrl"===e.type&&("turn_on"===e.typeReal||"turn_off"===e.typeReal||"toggle"===e.typeReal)||"turn_on"===e.type||"turn_off"===e.type||"toggle"===e.type){let e=[];ie.sendDataArr.forEach(((t,l)=>{"turn_on"!==t.typeReal&&"turn_off"!==t.typeReal&&"toggle"!==t.typeReal&&"turn_on"!==t.type&&"turn_off"!==t.type&&"toggle"!==t.type||e.push(l)})),e.forEach((e=>{ie.sendDataArr[e].select=!1,ie.sendDataArr.splice(e,1)}))}},he=e=>{var t,l,o,a,s,i,d,r,_,u,m,c,p;const v=(e=>ie.is_origin_multi_ctrl?e.typeReal:e.type)(e);"energy"!==v?"set_hvac_mode"!==v?"play_mode_set"!==v?"set_preset_mode"!==v?"set_speed"!==v?"oscillate"!==v?"set_swing_mode"!==v?"set_fan_mode"!==v?"set_heat_recovery"!==v?"color_temp"!==v?"hs_color"!==v||(se()?ie.light_hs_color=[0,0]:ie.sendData.hs_color=[0,0]):se()?ie.light_color_temp=n(e.min_mireds,153):ie.sendData.color_temp=n(e.min_mireds,153):ie.is_origin_multi_ctrl?ie.mult_set_heat_recovery=(null==(c=null==e?void 0:e.heat_recovery_modes)?void 0:c.length)?e.heat_recovery_modes[0]:"":ie.sendData.heat_recovery=(null==(p=null==e?void 0:e.support_heat_recovery_modes)?void 0:p.length)?e.support_heat_recovery_modes[0]:"":ie.is_origin_multi_ctrl?ie.mult_set_fan_mode=(null==(u=null==e?void 0:e.fan_modes)?void 0:u.length)?e.fan_modes[0]:"":ie.sendData.fan_mode=(null==(m=null==e?void 0:e.support_fan_modes)?void 0:m.length)?e.support_fan_modes[0]:"":ie.is_origin_multi_ctrl?ie.mult_set_swing_mode=(null==(r=null==e?void 0:e.swing_modes)?void 0:r.length)?e.swing_modes[0]:"":ie.sendData.swing_mode=(null==(_=null==e?void 0:e.support_swing_modes)?void 0:_.length)?e.support_swing_modes[0]:"":ie.sendData.oscillating=(null==(d=null==e?void 0:e.support_oscillate_modes)?void 0:d.length)?e.support_oscillate_modes[0]:"":ie.sendData.speed=(null==(i=null==e?void 0:e.support_speed_modes)?void 0:i.length)?e.support_speed_modes[0]:"":ie.is_origin_multi_ctrl?ie.mult_set_preset_mode=(null==(a=null==e?void 0:e.preset_modes)?void 0:a.length)?e.preset_modes[0]:"":ie.sendData.preset_mode=(null==(s=null==e?void 0:e.support_preset_modes)?void 0:s.length)?e.support_preset_modes[0]:"":ie.sendData.play_mode=(null==(o=null==e?void 0:e.support_play_modes)?void 0:o.length)?e.support_play_modes[0]:"":ie.is_origin_multi_ctrl?ie.mult_set_hvac_mode=(null==(t=null==e?void 0:e.hvac_modes)?void 0:t.length)?e.hvac_modes[0]:"":ie.sendData.hvac_mode=(null==(l=null==e?void 0:e.support_hvac_modes)?void 0:l.length)?e.support_hvac_modes[0]:"":delete ie.sendData.device_id},ge=e=>{ie.is_origin_multi_ctrl?(e=>{ye(e),he(e),e.select?(e.select=!1,ie.sendDataArr=((e,t)=>{const l=e.findIndex((e=>e.entity_id===t.entity_id&&e.typeReal===t.typeReal));return-1!==l&&e.splice(l,1),e})(ie.sendDataArr,e)):(e.select=!0,ie.sendDataArr.push(e)),"turn_on"!==e.typeReal&&"turn_off"!==e.typeReal&&"toggle"!==e.typeReal||(e.select?ie[`mult_${e.typeReal}`]=e.typeReal:ie[`mult_${e.typeReal}`]="")})(e):se()?(e=>{ye(e),he(e),e.select?(e.select=!1,ie.sendDataArr=((e,t)=>{const l=e.findIndex((e=>e.type===t.type));return-1!==l&&e.splice(l,1),e})(ie.sendDataArr,e)):(e.select=!0,ie.sendDataArr.push(e))})(e):e.select||(ie.resultData.forEach((e=>e.select=!1)),e.select=!0,ie.sendData={...e},he(e))},fe=()=>{"Less Than"===ie.sliderType?ie.sendData.below=ie.sliderValue:"Equal"===ie.sliderType?(ie.sendData.above=ie.sliderValue-.1,ie.sendData.below=ie.sliderValue+.1):"More Than"===ie.sliderType?ie.sendData.above=ie.sliderValue:"Position"===ie.sliderType&&(ie.sendData.position=ie.sliderValue)},we=()=>{var e,t,l;const o=null==(t=null==(e=ie.deviceNowObj.attributes)?void 0:e.find)?void 0:t.call(e,(e=>"brightness_pct"===e.feature));ie.sendData={type:"brightness",device_id:null==(l=ie.deviceNowObj)?void 0:l.device_id,entity_id:null==o?void 0:o.entity_id,domain:"light",brightness_pct:ie.sliderValue}},be=e=>{se()?ie.light_color_temp=e:ie.sendData.color_temp=e},De={light:H("Light"),fan:H("Fan")},Ve=e=>{const t=(null==e?void 0:e.attributes)||[],l=t.find((e=>"fan_state"===e.feature)),o=t.find((e=>"light_state"===e.feature));return l&&o},Re=(e,t)=>{var l,o,a,s,i,d;const n=null==(o=null==(l=$.devicesList)?void 0:l.find)?void 0:o.call(l,(t=>t.device_id===e.device_id));if(Ve(n)&&De[e.domain])return H("left right",{left:De[e.domain],right:F().get(e.type)});if("Customize Remote Control"===ie.deviceNowObj.device_type)return e.entry_name;const r=null==te?void 0:te[null==(a=ie.deviceNowObj)?void 0:a.device_type];if(r&&(null==(s=r[e.type])?void 0:s.selectName))return r[e.type].selectName;let _="";if("multi_ctrl"===e.type)return _=H(e.typeReal),_;if("turn_on"===e.type)return _=H("Turn on"),_;if("turn_off"===e.type)return _=H("Turn off"),_;if("changed_states"===e.type)return _=H("Toggle"),_;if(ie.isMultiSwitch&&ie.switchMap[e.type])return _=ie.switchMap[e.type],_;if(ie.isOpenCloseDevice&&(null==(i=m())?void 0:i[e.type]))return _=m()[e.type],_;const u={lock:{lock:H("Close Lock"),unlock:H("Unlock"),lock_anti:H("Double Lock")}};return(null==(d=null==u?void 0:u[null==e?void 0:e.domain])?void 0:d[e.type])?u[e.domain][e.type]:(_=F().get(e.type),_)},je=()=>{ie.is_origin_multi_ctrl?ie.mult_set_temperature=Number(ie.mult_set_temperature):ie.sendData.temperature=Number(ie.sliderValue)},ke=e=>{se()?ie.light_hs_color=[...e]:ie.sendData.hs_color=[...e]},xe=e=>{var t,l;const o=null==(l=null==(t=$.devicesList)?void 0:t.find)?void 0:l.call(t,(t=>t.device_id===e.device_id));return Ve(o)&&De[e.domain]?"":ie.isMultiSwitch&&ie.switchMap[e.type]?null==e?void 0:e.entry_name:""};return V((()=>le.updataId),(e=>{a(ie.recevieData,e,le)}),{immediate:!0}),V((()=>S.show),(e=>{e?(()=>{var e,t,l,o;ie.deviceNowObj=null==(t=null==(e=$.devicesList)?void 0:e.find)?void 0:t.call(e,(e=>{var t;return(null==e?void 0:e.device_id)===(null==(t=S.deviceObj)?void 0:t.device_id)})),ie.sendData={},ie.recevieData[le.wId]=ve;const a={type:"device_automation/action/list",id:le.wId++,device_id:null==(l=S.deviceObj)?void 0:l.device_id};ie.resultData=[],ie.loading=!0,null==(o=le.ws)||o.send(_(a))})():(ie.is_origin_multi_ctrl=!1,ie.mult_set_swing_mode="",ie.mult_set_hvac_mode="",ie.mult_set_preset_mode="",ie.mult_set_heat_recovery="",ie.mult_set_fan_mode="",ie.mult_turn_on="",ie.mult_turn_off="",ie.mult_toggle="",ie.mult_set_temperature=0,ie.sendDataArr=[])})),(e,t)=>{var l,o,a;const _=c,u=w;return v(),g("div",z,[f(r,{show:ue.value,"onUpdate:show":t[21]||(t[21]=e=>ue.value=e),"back-show":!0,"is-ash":se()||ie.is_origin_multi_ctrl?!(null==(l=ie.sendDataArr)?void 0:l.length):!(null==(o=ie.sendData)?void 0:o.device_id),title:null==(a=S.deviceObj)?void 0:a.name,loading:ie.loading,onButtonCancel:pe,onButtonBack:re,onButtonConfirm:_e},{content:R((()=>{var e;return[j("div",W,[f(s,{class:"devices-list-avatar","card-obj":S.deviceObj,online:!0},null,8,["card-obj"]),j("div",G,k(null==(e=S.deviceObj)?void 0:e.device_name),1)]),(v(!0),g(x,null,A(ie.resultData,((e,l)=>{var o,a,s;return v(),g("div",{key:l,"akubela-test":"task-devices-big-row"},[Re(e)?(v(),g("div",J,[j("div",null,[j("div",{class:"common-humidity-row",onClick:t=>ge(e)},[j("div",Q,[j("div",{class:C(["common-dialog-row-left-text",e.select?"row-left-active":""])},[xe(e)?(v(),y(i,{key:0,content:xe(e)},null,8,["content"])):O("",!0),T(" "+k(Re(e)),1)],2)]),j("div",X,[f(_,{"icon-class":e.select?"tick_active":""},null,8,["icon-class"])])],8,K),e.select?(v(),g("div",Y,[(ie.is_origin_multi_ctrl?"battery_level"===e.typeReal||"humidity"===e.typeReal||"illuminance"===e.typeReal||"set_position"===e.typeReal||"set_tilt_position"===e.typeReal:"battery_level"===e.type||"humidity"===e.type||"illuminance"===e.type||"set_position"===e.type||"set_tilt_position"===e.type)?(v(),y(L,{key:0,"slider-value":ie.sliderValue,"onUpdate:sliderValue":t[0]||(t[0]=e=>ie.sliderValue=e),"slider-type":ie.sliderType,"onUpdate:sliderType":t[1]||(t[1]=e=>ie.sliderType=e),"item-type":ie.is_origin_multi_ctrl?e.typeReal:e.type,onAddSlider:fe},null,8,["slider-value","slider-type","item-type"])):O("",!0),["Brightness","brightness"].includes(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(N,{key:1,"slider-value":ie.sliderValue,"onUpdate:sliderValue":t[2]||(t[2]=e=>ie.sliderValue=e),"show-array":ie.showArray},null,8,["slider-value","show-array"])):O("",!0),["white"].includes(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(N,{key:2,"slider-value":ie.whiteValue,"onUpdate:sliderValue":t[3]||(t[3]=e=>ie.whiteValue=e),"show-array":ie.showArray},null,8,["slider-value","show-array"])):O("",!0),(null==(o=me.value)?void 0:o.entity_id)&&"set_volume"===(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),g("div",Z,[j("img",{alt:"smart home,home automation,homekit,smart security,smart home systems,google home",src:U(d)("devices/volume2.webp")},null,8,ee),f(u,{modelValue:ie.sliderValue,"onUpdate:modelValue":t[4]||(t[4]=e=>ie.sliderValue=e),class:"sonos-slider","format-tooltip":de,onChange:ne},null,8,["modelValue"])])):O("",!0),ie.is_origin_multi_ctrl&&"set_temperature"===e.typeReal?(v(),y(I,{key:4,"slider-value":ie.mult_set_temperature,"onUpdate:sliderValue":t[5]||(t[5]=e=>ie.mult_set_temperature=e),"product-type":null==(a=null==S?void 0:S.deviceObj)?void 0:a.device_type,"se-temperture":!0,"is-add-on-device":ce.value,"device-obj":null==S?void 0:S.deviceObj,onAddSlider:je},null,8,["slider-value","product-type","is-add-on-device","device-obj"])):O("",!0),ie.is_origin_multi_ctrl||"set_temperature"!==e.type?O("",!0):(v(),y(I,{key:5,"slider-value":ie.sliderValue,"onUpdate:sliderValue":t[6]||(t[6]=e=>ie.sliderValue=e),"product-type":null==(s=null==S?void 0:S.deviceObj)?void 0:s.device_type,"se-temperture":!0,"is-add-on-device":ce.value,"device-obj":null==S?void 0:S.deviceObj,onAddSlider:je},null,8,["slider-value","product-type","is-add-on-device","device-obj"])),ie.is_origin_multi_ctrl&&"set_hvac_mode"===e.typeReal?(v(),y(B,{key:6,modelValue:ie.mult_set_hvac_mode,"onUpdate:modelValue":t[7]||(t[7]=e=>ie.mult_set_hvac_mode=e),modes:e.hvac_modes},null,8,["modelValue","modes"])):O("",!0),ie.is_origin_multi_ctrl||"set_hvac_mode"!==e.type?O("",!0):(v(),y(B,{key:7,modelValue:ie.sendData.hvac_mode,"onUpdate:modelValue":t[8]||(t[8]=e=>ie.sendData.hvac_mode=e),modes:e.support_hvac_modes},null,8,["modelValue","modes"])),"play_mode_set"===(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(E,{key:8,modelValue:ie.sendData.play_mode,"onUpdate:modelValue":t[9]||(t[9]=e=>ie.sendData.play_mode=e),"mode-label":ae(ie.is_origin_multi_ctrl?e.typeReal:e.type),modes:e.support_play_modes},null,8,["modelValue","mode-label","modes"])):O("",!0),ie.is_origin_multi_ctrl&&"set_swing_mode"===e.typeReal?(v(),y(E,{key:9,modelValue:ie.mult_set_swing_mode,"onUpdate:modelValue":t[10]||(t[10]=e=>ie.mult_set_swing_mode=e),"mode-label":ae(e.typeReal),"is-multi-ctrl":!0,modes:e.swing_modes},null,8,["modelValue","mode-label","modes"])):O("",!0),ie.is_origin_multi_ctrl||"set_swing_mode"!==e.type?O("",!0):(v(),y(E,{key:10,modelValue:ie.sendData.swing_mode,"onUpdate:modelValue":t[11]||(t[11]=e=>ie.sendData.swing_mode=e),"mode-label":ae(e.type),modes:e.support_swing_modes},null,8,["modelValue","mode-label","modes"])),"set_speed"===(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(E,{key:11,modelValue:ie.sendData.speed,"onUpdate:modelValue":t[12]||(t[12]=e=>ie.sendData.speed=e),"mode-label":ae(ie.is_origin_multi_ctrl?e.typeReal:e.type),modes:e.support_speed_modes},null,8,["modelValue","mode-label","modes"])):O("",!0),ie.is_origin_multi_ctrl&&"set_preset_mode"===e.typeReal?(v(),y(E,{key:12,modelValue:ie.mult_set_preset_mode,"onUpdate:modelValue":t[13]||(t[13]=e=>ie.mult_set_preset_mode=e),"mode-label":ae(e.typeReal),modes:null==e?void 0:e.preset_modes},null,8,["modelValue","mode-label","modes"])):O("",!0),ie.is_origin_multi_ctrl||"set_preset_mode"!==e.type?O("",!0):(v(),y(E,{key:13,modelValue:ie.sendData.preset_mode,"onUpdate:modelValue":t[14]||(t[14]=e=>ie.sendData.preset_mode=e),"mode-label":ae(e.type),modes:null==e?void 0:e.support_preset_modes},null,8,["modelValue","mode-label","modes"])),"oscillate"===(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(E,{key:14,modelValue:ie.sendData.oscillating,"onUpdate:modelValue":t[15]||(t[15]=e=>ie.sendData.oscillating=e),"mode-label":ae(ie.is_origin_multi_ctrl?e.typeReal:e.type),modes:e.support_oscillate_modes},null,8,["modelValue","mode-label","modes"])):O("",!0),ie.is_origin_multi_ctrl&&"set_heat_recovery"===e.typeReal?(v(),y(E,{key:15,modelValue:ie.mult_set_heat_recovery,"onUpdate:modelValue":t[16]||(t[16]=e=>ie.mult_set_heat_recovery=e),"mode-label":ae(e.typeReal),modes:e.heat_recovery_modes},null,8,["modelValue","mode-label","modes"])):O("",!0),ie.is_origin_multi_ctrl||"set_heat_recovery"!==e.type?O("",!0):(v(),y(E,{key:16,modelValue:ie.sendData.heat_recovery,"onUpdate:modelValue":t[17]||(t[17]=e=>ie.sendData.heat_recovery=e),"mode-label":ae(e.type),modes:e.support_heat_recovery_modes},null,8,["modelValue","mode-label","modes"])),ie.is_origin_multi_ctrl&&"set_fan_mode"===e.typeReal?(v(),y(M,{key:17,modelValue:ie.mult_set_fan_mode,"onUpdate:modelValue":t[18]||(t[18]=e=>ie.mult_set_fan_mode=e),"is-multi-ctrl":!0,modes:e.fan_modes},null,8,["modelValue","modes"])):O("",!0),ie.is_origin_multi_ctrl||"set_fan_mode"!==e.type?O("",!0):(v(),y(M,{key:18,modelValue:ie.sendData.fan_mode,"onUpdate:modelValue":t[19]||(t[19]=e=>ie.sendData.fan_mode=e),modes:e.support_fan_modes},null,8,["modelValue","modes"])),"hs_color"===(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(q,{key:19,onChange:ke})):O("",!0),"color_temp"===(ie.is_origin_multi_ctrl?e.typeReal:e.type)?(v(),y(P,{key:20,modelValue:ie.sendData.color_temp,"onUpdate:modelValue":t[20]||(t[20]=e=>ie.sendData.color_temp=e),min:U(n)(e.min_mireds,153),max:U(n)(e.max_mireds,500),onChange:be},null,8,["modelValue","min","max"])):O("",!0)])):O("",!0)])])):O("",!0)])})),128))]})),_:1},8,["show","is-ash","title","loading"])])}}},le={class:"trigger-device-index"},oe=["onClick"],ae={class:"condition-row-left"},se={class:"condition-left__span"},ie={key:0},de=["onClick"],ne={class:"condition-child-row-security"},re={class:"condition-child-row"},_e={class:"condition-child-row__left"},ue={class:"condition-device-name__left"},me=j("div",{class:"condition-child-row__right"},[j("div",{class:"common-row-triangle"})],-1),ce={__name:"DialogTaskDevice",props:{show:{type:Boolean,required:!0,default:!1},type:{type:String,default:"condition"}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(l,{emit:i}){const d=l;let n=t();const{t:u}=e();let m=o();const y=b({recevieData:{},sendData:{},devicesTriggerList:{},defaultIndex:0,deviceShow:!1,deviceObj:{},loading:!1,newTriggerList:[]});S((()=>{y.loading=!0,setTimeout((()=>{h()}),1e3)}));const h=()=>{C()},w=()=>{i("update:show",!1),i("pop-closed")},C=()=>{var e;y.recevieData[m.wId]=T;const t={type:"ak_device_automation/action/list",id:m.wId++};y.loading=!0,setTimeout((()=>{y.loading=!1}),1e4),null==(e=m.ws)||e.send(_(t))},T=e=>{if(y.loading=!1,!e.success)return p(u("errorMessage"),"error");y.newTriggerList=n.setAreaListAddDevcie(n.flatRommList,e.result,"area_id","triggerList","device_name")},L=()=>{i("open-dia-show"),i("update:show",!1)},N=()=>{if(!M.value)return p(u("please Select Device"),"error");I()},I=()=>{i("set-add-obj",{}),i("update:show",!1)},B=D({get:()=>d.show,set:e=>{i("update:show",e)}}),M=D((()=>{let e=!1;return y.sendData.platform&&(e=!0),e})),E=()=>{i("update:show",!0)},$=e=>{i("set-add-obj",e)},F=()=>{i("update:show",!1),i("pop-closed")};return V((()=>m.updataId),(e=>{a(y.recevieData,e,m)}),{immediate:!0}),V((()=>d.show),(e=>{e&&h()})),(e,t)=>{const l=c;return v(),g("div",le,[f(r,{show:B.value,"onUpdate:show":t[0]||(t[0]=e=>B.value=e),"back-show":!0,"foot-show":!1,"is-ash":!M.value,title:e.$t("Device"),loading:y.loading,onButtonCancel:w,onButtonBack:L,onButtonConfirm:N},{content:R((()=>[(v(!0),g(x,null,A(y.newTriggerList,((e,t)=>(v(),g("div",{key:t},[j("div",{class:"common-dialog-row",onClick:e=>(e=>{if(y.defaultIndex===e)return y.defaultIndex="";y.defaultIndex=e})(t)},[j("div",ae,[f(l,{"icon-class":"card_room",class:"device-room__svg"}),j("span",se,k(U(n).getRoomText(e.area_id)),1)])],8,oe),t===y.defaultIndex?(v(),g("div",ie,[(v(!0),g(x,null,A(e.triggerList,((e,t)=>(v(),g("div",{key:t,"akubela-test":"task-devices-items",onClick:t=>(e=>{y.deviceObj=e,i("update:show",!1),y.deviceShow=!0})(e)},[j("div",ne,[j("div",re,[j("div",_e,[f(s,{class:"devices-list-avatar","card-obj":e,online:!0},null,8,["card-obj"]),j("span",ue,k(e.device_name),1)]),me])])],8,de)))),128))])):O("",!0)])))),128))])),_:1},8,["show","is-ash","title","loading"]),f(te,{show:y.deviceShow,"onUpdate:show":t[1]||(t[1]=e=>y.deviceShow=e),"device-obj":y.deviceObj,onOpenDiaShow:E,onSetAddObj:$,onPopClosed:F},null,8,["show","device-obj"])])}}};export{ce as default};
