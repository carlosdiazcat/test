import{b as e,r as t,w as n,l as a,p as o,b4 as s,b5 as l,b7 as i,br as u}from"./Akubela-element-plus-Vendor-47553b40.js";const r={class:"face-blender-container"},c={__name:"index",props:{hsColorObj:{type:Object,default:()=>({value:[90,0],lastSetTime:0,autoTime:null})}},emits:["on-light-color"],setup(c,{emit:m}){const p=c,d=e({x:0,y:0}),v=110,h={x:v,y:v},y=e({pointerPosition:{x:h.x,y:h.y},sendData:[],evenType:"",lastSetTime:0,autoTime:null}),T=()=>{var e;const t=(null==(e=p.hsColorObj)?void 0:e.value)||[0,0],n=t[1]*Math.cos(3.14*t[0]/180),a=t[1]*Math.sin(3.14*t[0]/180);d.x=n+110,d.y=110-a},f=t(null),x=t(null),b=(e,t)=>({x:t*Math.cos(e)+h.x,y:t*Math.sin(e)+h.y}),g=()=>{const e=f.value;f.value&&(e.onmousedown=t=>{const n=t.clientX-e.offsetLeft-10,a=t.clientY-e.offsetTop-10;document.onmousemove=function(e){const t=e.clientX-n,o=e.clientY-a,s=t-h.x,l=o-h.y,i=Math.atan2(-l,s)*(180/Math.PI),u=i>0?i:360+i,r=Math.atan2(l,s),c=Math.sqrt(s*s+l*l),m=c>=v?v:c;y.sendData=[parseInt(u),parseInt(m)>100?100:parseInt(m)];const{x:p,y:T}=b(r,m);d.x=p,d.y=T},document.onmouseup=function(e){e.stopPropagation(),D(),m("on-light-color",y.sendData),document.onmousemove=null,document.onmouseup=null,y.evenType="mouseup"}})},M=e=>{if("mouseup"===y.evenType)return y.evenType="";const t=e.pageX,n=e.pageY,a=e.target.getBoundingClientRect(),o=t-(a.left+a.width/2),s=n-(a.top+a.height/2),l=Math.atan2(-s,o)*(180/Math.PI),i=l>0?l:360+l,u=Math.atan2(s,o),r=Math.sqrt(o*o+s*s),c=r>=v?v:r;y.sendData=[parseInt(i),parseInt(c)>100?100:parseInt(c)];const{x:p,y:h}=b(u,c);d.x=p,d.y=h,D(),m("on-light-color",y.sendData)},D=()=>{y.lastSetTime=(new Date).getTime()},I=()=>{if(y.lastSetTime<=(new Date).getTime()-2e3)return T(),void g();y.autoTime&&clearTimeout(y.autoTime),y.autoTime=setTimeout((()=>{y.lastSetTime>(new Date).getTime()-2e3&&I()}),2e3)};return n((()=>{var e;return null==(e=p.hsColorObj)?void 0:e.value}),((e,t)=>{I()})),a((()=>{var e;const t=(null==(e=p.hsColorObj)?void 0:e.value)||[90,0];0===t[0]&&0===t[1]&&(t[0]=90),y.sendData=t,T(),g()})),o((()=>{f.value=null})),(e,t)=>(s(),l("div",r,[i("div",{ref_key:"circle",ref:x,class:"blender-circle",onClick:M},[i("div",{ref_key:"pointer",ref:f,class:"blend-pointer",style:u({left:`${d.x}px`,top:`${d.y}px`})},null,4)],512)]))}};export{c as _};
