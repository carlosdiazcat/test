import{b as e,j as s,w as t,b4 as o,b5 as a,bd as i,be as d,bc as l,ba as c,bf as n,F as r,bl as u,b7 as h,q as v,v as g,bh as p}from"./Akubela-element-plus-Vendor-47553b40.js";import{j as w,u as m,w as b,s as _,am as k,S as f,g as j,a as y,n as D,m as S,a0 as L}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const C={key:0,class:"linked-text"},B={key:1,class:"dia-devices-list"},I=["onClick"],A={class:"dia-row-left"},O={class:"devices-content-detail"},x={class:"devices-content-name"},V=["src"],$={key:2,class:"dia-devices-no-data"},M={__name:"DeviceDialogLightGroupThird",props:{show:{type:Boolean,required:!0,default:!1},groupObj:{type:Object,default:()=>{}}},emits:["update:show","getList","closeSecond"],setup(M,{emit:q}){const T=M;w();const{t:U}=m(),E=e({acceptData:{},devicesList:[],loading:!1,deleteShowDialog:!1}),F=b(),G=()=>{q("update:show",!1)},Y=s({get:()=>T.show,set:e=>{e||q("getList"),q("update:show",e)}}),z=()=>{var e,s;E.acceptData[F.wId]=e=>{if(E.loading=!1,!e.success)return D(U("errorMessage"),"error");E.devicesList=e.result};const t={type:"ak_device/light_group/support_devices",device_id:null==(e=T.groupObj)?void 0:e.device_id,id:F.wId++};setTimeout((()=>{E.loading=!1}),5e3),E.loading=!0,null==(s=F.ws)||s.send(S(t))},H=L((()=>{var e,s;E.deleteShowDialog=!1,E.acceptData[F.wId]=e=>{if(!e.success)return D(U("errorMessage"),"error");q("update:show",!1),q("closeSecond",!0)};const t={type:"config/ak_device/delete",device_id:null==(e=T.groupObj)?void 0:e.device_id,id:F.wId++};null==(s=F.ws)||s.send(S(t))}));return t((()=>F.updataId),(e=>{_(E.acceptData,e,F)}),{immediate:!0}),t((()=>T.show),(e=>{e&&z()})),(e,s)=>{const t=p;return o(),a(r,null,[i((o(),d(y,{show:Y.value,"onUpdate:show":s[0]||(s[0]=e=>Y.value=e),"foot-show":!1,"back-show":!0,class:"dia-multi-control-association-all",title:e.$t("Choose device to link with"),onButtonBack:G,onButtonCancel:s[1]||(s[1]=e=>q("update:show",!1))},{content:l((()=>[E.devicesList.length>0?(o(),a("div",C,c(e.$t("All Switch/Light")),1)):n("",!0),E.devicesList.length>0?(o(),a("div",B,[(o(!0),a(r,null,u(E.devicesList,(e=>(o(),a("div",{key:e.device_id,class:"dia-devices-row",onClick:s=>(e=>{var s,t;let o=[];if(E.devicesList.forEach((e=>{e.is_bind&&o.push(e)})),1===o.length&&e.is_bind)return void(E.deleteShowDialog=!0);E.acceptData[F.wId]=e=>{if(!e.success)return D(U("errorMessage"),"error");z()};const a={type:"ak_device/light_group/update",device_id:null==(s=T.groupObj)?void 0:s.device_id,link_device_id:e.device_id,mode:e.is_bind?2:1,id:F.wId++};null==(t=F.ws)||t.send(S(a))})(e)},[h("div",A,[v(k,{"card-obj":e,"class-name":"trans"},null,8,["card-obj"]),h("div",O,[h("div",x,[v(f,{content:e.name},null,8,["content"])])])]),h("img",{class:"dialog-img-select-all-right",alt:"smart home,home automation,homekit,smart security,smart home systems,google home",src:e.is_bind?g(j)("Checkbox_actvie.webp"):g(j)("Checkbox.webp")},null,8,V)],8,I)))),128))])):(o(),a("div",$))])),_:1},8,["show","title"])),[[t,E.loading,void 0,{fullscreen:!0,lock:!0}]]),v(y,{show:E.deleteShowDialog,"onUpdate:show":s[2]||(s[2]=e=>E.deleteShowDialog=e),class:"show-del-group","button-cancel-show":!0,"button-ok-name":e.$t("Sure"),onButtonCancel:s[3]||(s[3]=e=>E.deleteShowDialog=!1),onButtonConfirm:g(H)},{content:l((()=>[h("div",null,c(e.$t("You will delete this group Are you sure?")),1)])),_:1},8,["show","button-ok-name","onButtonConfirm"])],64)}}};export{M as default};
