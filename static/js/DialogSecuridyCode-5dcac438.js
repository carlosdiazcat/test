import{r as e,b as s,j as t,w as a,p as r,b4 as o,b5 as n,q as d,bc as l,b7 as u,bs as i,bn as c,bA as m,bB as f}from"./Akubela-element-plus-Vendor-47553b40.js";import{u as p,w as b,a as h,n as w,m as g,s as v}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const x={class:"scenes-task-securidy-code akubela-test-scenes-task-securidy-code"},_={class:"setting-feedback__input"},y={class:"setting__input-content"},k={__name:"DialogSecuridyCode",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(k,{emit:T}){const A=k,{t:V}=p();let C=b();const S=e(),j=s({recevieData:{},form:{sendText:""},defaultShow:!0,familyList:[],rules:{sendText:[{validator:(e,s,t)=>{s&&/^[0-9]{6}$/.test(s)?t():t(new Error(V("Format error, needs to be six digits")))},trigger:["change","blur"]}]}}),D=()=>{var e;j.recevieData[C.wId]=e=>{if(!e.success)return w(V("errorMessage"),"error");T("update:show",!1)};const s={id:C.wId++,type:"config/notice_change","Settings.ALARM.Password":j.form.sendText,source:"web"};null==(e=C.ws)||e.send(g(s))},B=t({get:()=>A.show,set:e=>{T("update:show",e)}}),$=t((()=>{if(!j.form.sendText)return!1;return/^[0-9]{6}$/.test(j.form.sendText)})),I=()=>{T("update:show",!1)};return a((()=>C.updataId),(e=>{v(j.recevieData,e,C)}),{immediate:!0}),r((()=>{S.value=null,j.recevieData=null})),(e,s)=>{const t=c,a=m,r=f;return o(),n("div",x,[d(h,{show:B.value,"onUpdate:show":s[2]||(s[2]=e=>B.value=e),"is-ash":!$.value,title:e.$t("Change Security Code"),onButtonCancel:I,onButtonConfirm:D},{content:l((()=>[u("div",_,[u("div",y,[d(r,{ref_key:"ruleFormRef",ref:S,model:j.form,rules:j.rules,onSubmit:s[1]||(s[1]=i((()=>{}),["prevent"]))},{default:l((()=>[d(a,{prop:"sendText"},{default:l((()=>[d(t,{modelValue:j.form.sendText,"onUpdate:modelValue":s[0]||(s[0]=e=>j.form.sendText=e),placeholder:e.$t("Please Enter New Security Code"),maxlength:"6"},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["model","rules"])])])])),_:1},8,["show","is-ash","title"])])}}};export{k as default};
