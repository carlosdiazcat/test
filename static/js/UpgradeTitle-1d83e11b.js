import{b as e,j as a,w as t,b4 as s,be as o,bc as n,bd as d,b5 as l,F as i,bl as r,v as u,b7 as c,ba as p,q as w,bf as b,bh as m}from"./Akubela-element-plus-Vendor-47553b40.js";import{j as g,c as v,a4 as h,u as f,w as k,s as x,P as I,a as _,n as y,m as j}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const U={key:0,class:"main-update-box"},A={class:"last-version-yellow"},B={class:"upgrade-title-box-button"},V={__name:"UpgradeTitle",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(V,{emit:$}){const C=V;let D=g();const P=v();h();const{t:T}=f(),q=e({nowIndex:0,loading:!1,acceptData:{}});let F=k();const M=a({get:()=>C.show,set:e=>{$("update:show",e)}}),S=()=>{if(q.nowIndex+1===D.canPanelUprage.length)return q.loading=!0,void setTimeout((()=>{q.loading=!1,$("update:show",!1)}),1e3);z(),q.nowIndex=q.nowIndex+1},z=()=>{q.loading=!0,setTimeout((()=>{q.loading=!1}),1e3)},E=()=>{P.otherAddShow=!0,$("update:show",!1)};return t((()=>F.updataId),(e=>{x(q.acceptData,e,F)}),{immediate:!0}),(e,a)=>{const t=m;return s(),o(_,{show:M.value,"onUpdate:show":a[0]||(a[0]=e=>M.value=e),class:"upgrade-title-box","foot-show":!1,"back-show":!1,title:e.$t("Upgrade"),onButtonBack:E,onButtonCancel:S},{content:n((()=>[d((s(),l("div",null,[(s(!0),l(i,null,r(u(D).canPanelUprage,((a,t)=>(s(),l("div",{key:a.device_id},[t===q.nowIndex?(s(),l("section",U,[c("div",null,p(e.$t("Found a new version")),1),c("div",A,p(null==a?void 0:a.last_version),1),c("div",null,p(e.$t("whether to upgrade?")),1),c("div",B,[w(I,{"class-name":"primary","button-name":e.$t("Upgrade"),onClick:e=>(e=>{var a;const t=e;q.acceptData[F.wId]=e=>{if(!(null==e?void 0:e.success))return y(T("errorMessage"),"error");S()};const s={type:"config/ak_device/ctrl",id:F.wId++,device_id:null==t?void 0:t.device_id,action:"upgrade"};null==(a=F.ws)||a.send(j(s))})(a)},null,8,["button-name","onClick"])])])):b("",!0)])))),128))])),[[t,q.loading]])])),_:1},8,["show","title"])}}};export{V as default};
