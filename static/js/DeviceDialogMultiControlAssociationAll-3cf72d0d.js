import{b as e,j as s,w as i,bd as a,b4 as t,be as d,bc as l,b5 as o,ba as c,bf as n,F as r,bl as v,bb as u,v as m,b7 as h,q as w,bh as b}from"./Akubela-element-plus-Vendor-47553b40.js";import{j as k,u as p,w as g,s as _,am as f,S as y,g as D,a as j,n as C,ar as A,m as L,a0 as I}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const x={key:0,class:"linked-text"},B={key:1,class:"dia-devices-list"},V=["onClick"],M={class:"dia-row-left"},q={class:"devices-content-detail"},S={class:"devices-content-name"},$=["src"],F={key:2,class:"dia-devices-no-data"},O={__name:"DeviceDialogMultiControlAssociationAll",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show","get-list"],setup(O,{emit:T}){const U=O,z=k(),{deviceCardObj:E}=z,{t:G}=p(),H=e({acceptData:{},devicesList:[],loading:!1}),J=g(),K=()=>{T("update:show",!1)},N=s({get:()=>U.show,set:e=>{T("update:show",e)}}),P=I((e=>{var s,i,a;if((null==(s=E.deviceDetail)?void 0:s.device_id)===e.device_id)return;H.acceptData[J.wId]=e=>{if(!e.success)return C(G("errorMessage"),"error");T("get-list")},e.is_linked=!e.is_linked;const t={type:"device/link_ctrl/set",device_id:null==(i=E.deviceDetail)?void 0:i.device_id,link_id:e.device_id,status:e.is_linked,id:J.wId++};null==(a=J.ws)||a.send(L(t))})),Q=e=>{var s;return(null==(s=E.deviceDetail)?void 0:s.device_id)===e.device_id};return i((()=>J.updataId),(e=>{_(H.acceptData,e,J)}),{immediate:!0}),i((()=>U.show),(e=>{e&&(()=>{var e,s;H.acceptData[J.wId]=e=>{if(H.loading=!1,!e.success)return C(G("errorMessage"),"error");H.devicesList=A(e.result.device_list,"device_name")};const i={type:"device/link_ctrl/list",device_id:null==(e=E.deviceDetail)?void 0:e.device_id,linked:!1,id:J.wId++};setTimeout((()=>{H.loading=!1}),5e3),H.loading=!0,H.devicesList=[],null==(s=J.ws)||s.send(L(i))})()})),(e,s)=>{const i=b;return a((t(),d(j,{show:N.value,"onUpdate:show":s[0]||(s[0]=e=>N.value=e),"foot-show":!1,"back-show":!0,class:"dia-multi-control-association-all",title:e.$t("Choose device to link with"),onButtonBack:K,onButtonCancel:s[1]||(s[1]=e=>T("update:show",!1))},{content:l((()=>[H.devicesList.length>0?(t(),o("div",x,c(e.$t("All Switch/Light")),1)):n("",!0),H.devicesList.length>0?(t(),o("div",B,[(t(!0),o(r,null,v(H.devicesList,(e=>(t(),o("div",{key:e.device_id,class:u(["dia-devices-row",{"dia-devices-row-dis":Q(e)}]),onClick:s=>m(P)(e)},[h("div",M,[w(f,{"card-obj":e,online:!Q(e),"class-name":"trans"},null,8,["card-obj","online"]),h("div",q,[h("div",S,[w(y,{content:e.device_name},null,8,["content"])])])]),h("img",{class:"dialog-img-select-all-right",alt:"smart home,home automation,homekit,smart security,smart home systems,google home",src:e.is_linked?m(D)("Checkbox_actvie.webp"):m(D)("Checkbox.webp")},null,8,$)],10,V)))),128))])):(t(),o("div",F))])),_:1},8,["show","title"])),[[i,H.loading,void 0,{fullscreen:!0,lock:!0}]])}}};export{O as default};
