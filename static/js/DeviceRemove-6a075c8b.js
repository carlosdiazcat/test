import{b as e,l as t,w as i,b4 as a,b5 as d,q as s,bc as l,bd as c,b7 as o,ba as r,v as n,b9 as v,bj as u,bg as m,bh as b}from"./Akubela-element-plus-Vendor-47553b40.js";import{ak as g,u as p,j as f,w as h,bb as _,n as D,m as x,s as y,g as w}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const C={class:"device-remove-box"},k={class:"device-dialog-top"},V={class:"device-dialog-top-left"},I={class:"device-dialog-top-right"},j=["src"],A={class:"device-confirm-content"},R={class:"device-right-bottom"},T={class:"type-bottom-box"},O={__name:"DeviceRemove",setup(O){const{dialogClose:S}=g(),{t:M}=p();let $=f(),q=h();const E=e({acceptData:{},confirmShow:!1,loading:!1,text:""});t((()=>{U()}));const U=()=>{var e,t;if(!(null==(e=$.deviceCardObj.deviceDetail)?void 0:e.is_multi_channel_device))return E.text=M("Are you sure you want to delete the device? gateDeleteText",{gateDeleteText:_.includes($.deviceCardObj.deviceDetail.device_type)?M("gateDeleteText"):""});E.acceptData[q.wId]=e=>{var t,i,a;if(E.loading=!1,!e.success)return D(M("errorMessage"),"error");E.text=M("Are you sure you want to delete the device? gateDeleteText",{gateDeleteText:_.includes($.deviceCardObj.deviceDetail.device_type)?M("gateDeleteText"):""});const d=(null==e?void 0:e.result)||[];if(d.length>=1){let e=[];null==(a=null==(i=null==(t=null==d?void 0:d.filter)?void 0:t.call(d,(e=>e.device_id!==$.deviceCurrent.deviceId)))?void 0:i.forEach)||a.call(i,(t=>{e.push(t.name)})),E.text=M("more device name delete text",{names:e.join(",")})}};const i={type:"config/ak_device/get_multi_channel_link_device",id:q.wId++,device_id:$.deviceCurrent.deviceId};null==(t=q.ws)||t.send(x(i)),E.loading=!0},z=()=>{var e;E.acceptData[q.wId]=B,$.deviceCurrent.dialogVisible=!1;const t={type:"config/ak_device/delete",id:q.wId++,device_id:$.deviceCurrent.deviceId};$.deleteDeviceId=$.deviceCurrent.deviceId,null==(e=q.ws)||e.send(x(t)),E.loading=!0,$.deleteDevices($.deviceCurrent.deviceId)},B=e=>{E.loading=!1,$.deviceRemoveVisible=!1,S(),e.success?(D(M("deleteSuccessfully"),"success"),E.confirmShow=!1):D(M("errorMessage"),"error")};return i((()=>q.updataId),(e=>{y(E.acceptData,e,q)}),{immediate:!0}),(e,t)=>{const i=u,g=m,p=b;return a(),d("div",C,[s(g,{modelValue:n($).deviceRemoveVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>n($).deviceRemoveVisible=e),"destroy-on-close":""},{default:l((()=>[c((a(),d("section",null,[o("div",k,[o("div",V,r(e.$t("Remove Device")),1),o("div",I,[o("img",{alt:"smart home,home automation,homekit,smart security,smart home systems,google home",src:n(w)("devices/pop_close.webp"),onClick:t[0]||(t[0]=e=>n($).deviceRemoveVisible=!1)},null,8,j)])]),o("div",A,[o("div",null,r(E.text),1)]),o("div",R,[o("div",T,[s(i,{"akubela-test":"box-remove-cfm",onClick:z},{default:l((()=>[v(r(e.$t("Confirm")),1)])),_:1})])])])),[[p,E.loading]])])),_:1},8,["modelValue"])])}}};export{O as default};
