import{e,j as a,u as l,w as t,s,a as o,n,b as i}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as c,j as r,w as u,b4 as d,b5 as v,b7 as m,q as h,bc as w,F as b,bl as p,bb as f,ba as g,bf as D,bn as y}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const S={class:"trigger-device-default"},k={class:"common-big-row"},B=["onClick"],C={class:"common-dialog-left"},A={class:"common-dialog-right common-bypass-right"},V={key:0},j={class:"by-pass-Company"},x={__name:"DeviceDialogBypass",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(x,{emit:$}){const _=x;let U=e(),q=a(),{deviceCardObj:I}=q;const{t:M}=l();let N=t();const W=c({recevieData:{},resultData:[{label:"When the device status is normal",value:0,select:!1},{label:"After 30min",value:1800,select:!1},{label:"After 1h",value:3600,select:!1},{label:"After 12h",value:43200,select:!1},{label:"After 1d",value:86400,select:!1},{label:"After 7d",value:604800,select:!1},{label:"Never",value:0,select:!1},{label:"Customize",value:0,isDouble:!0,select:!1}],sendData:{},warningShow:!1,indexSelected:""}),z=()=>{$("update:show",!1)},E=()=>{var e,a,l;if(7===W.indexSelected&&H(),W.warningShow)return;const t=null==(a=null==(e=W.resultData)?void 0:e.find)?void 0:a.call(e,(e=>e.select));W.recevieData[N.wId]=F;const s="Never"===t.label?1:"When the device status is normal"===t.label?t.value:Date.parse(new Date)/1e3+(7===W.indexSelected?60*t.value*60*24:t.value);U.deviceBypassChange(null==(l=I.deviceDetail)?void 0:l.device_id,1,s)},F=e=>{if(!e.success)return n(M("errorMessage"),"error");$("update:show",!1)},O=r({get:()=>_.show,set:e=>{$("update:show",e)}}),G=()=>{$("update:show",!1)},H=(e,a)=>{const l=W.resultData[7].value;l&&/^[0-9]+$/.test(l)||(W.warningShow=!0)};return u((()=>N.updataId),(e=>{s(W.recevieData,e,N)}),{immediate:!0}),(e,a)=>{var l,t;const s=y,n=i;return d(),v(b,null,[m("div",S,[h(o,{show:O.value,"onUpdate:show":a[0]||(a[0]=e=>O.value=e),"is-ash":!(null==(t=null==(l=W.resultData)?void 0:l.some)?void 0:t.call(l,(e=>e.select))),title:e.$t("Bypass"),onButtonCancel:G,onButtonBack:z,onButtonConfirm:E},{content:w((()=>[(d(!0),v(b,null,p(W.resultData,((a,l)=>(d(),v("div",{key:l},[m("div",k,[m("div",null,[m("div",{class:"common-humidity-row",onClick:e=>((e,a)=>{W.resultData.forEach((e=>e.select=!1)),e.select=!0,W.indexSelected=a})(a,l)},[m("div",C,[m("div",{class:f(["common-dialog-row-left-text",a.select?"row-left-active":""])},g(e.$t(a.label)),3)]),m("div",A,[7===l&&a.select?(d(),v("div",V,[h(s,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,modelModifiers:{number:!0},maxlength:4},null,8,["modelValue","onUpdate:modelValue"]),m("span",j,g(e.$t("Day1")),1)])):D("",!0),h(n,{"icon-class":a.select?"tick_active":""},null,8,["icon-class"])])],8,B)])])])))),128))])),_:1},8,["show","is-ash","title"])]),h(o,{show:W.warningShow,"onUpdate:show":a[1]||(a[1]=e=>W.warningShow=e),title:e.$t("waring"),onButtonCancel:a[2]||(a[2]=e=>W.warningShow=!1),onButtonConfirm:a[3]||(a[3]=e=>W.warningShow=!1)},{content:w((()=>[m("div",null,g(e.$t("can't use this number")),1)])),_:1},8,["show","title"])],64)}}};export{x as default};
