import{r as e,b as a,j as l,l as t,w as o,ci as s,b4 as i,b5 as d,q as m,bc as n,bd as u,b7 as c,ba as r,bb as v,F as g,bl as f,be as p,bz as b,bT as w,bw as h,bx as V,bh as $}from"./Akubela-element-plus-Vendor-47553b40.js";import{u as D,w as I,m as T,n as y,a as M,l as _,s as E}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const S={class:"setting-dialog-time akubela-test-setting-dialog-time"},k={class:"common-first-row"},F={class:"common-dialog-row"},x={class:"common-dialog-left"},Y={class:"common-dialog-row-left-text"},j={class:"common-dialog-right"},z={class:"setting-time-content"},A={class:"common-dialog-row"},U={class:"common-dialog-left"},H={class:"common-dialog-row-left-text"},L={class:"common-dialog-right"},Z={class:"common-dialog-row"},C={class:"common-dialog-left"},B={class:"common-dialog-row-left-text"},q={class:"common-dialog-right time-date-picker"},O={class:"common-dialog-row"},N={class:"common-dialog-left"},G={class:"common-dialog-row-left-text"},J={class:"time-popup-time-right"},K={class:"common-dialog-row"},P={class:"common-dialog-left"},Q={class:"common-dialog-row-left-text"},R={class:"common-dialog-right"},W={class:"common-time__bottom"},X={class:"common-dialog-left"},ee={class:"common-dialog-row-left-text"},ae={class:"common-dialog-row-select"},le={__name:"DialogTime",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(le,{emit:te}){const oe=le,{t:se}=D();let ie=I();const de=e(!1),me=e(0),ne=e(""),ue=e(""),ce=a({loadding:!1,acceptData:{},timeTwo:"",timeObj:{},timeZone:"",timeZoneList:[],formatValue:0,dateFormatList:[]}),re=l((()=>1===me.value)),ve=l({get:()=>oe.show,set:e=>{te("update:show",e)}});t((()=>{ce.loadding=!0,ge(),pe(),Ve()}));const ge=()=>{var e;ce.acceptData[ie.wId]=fe;const a={type:"config/datetime/get",id:ie.wId++};null==(e=ie.ws)||e.send(T(a))},fe=e=>{var a,l,t,o;if(ce.loadding=!1,!e.success)return y(se("errorMessage"),"error");const s=null==(t=null==(l=null==(a=e.result)?void 0:a.datetime)?void 0:l.split)?void 0:t.call(l," ");ne.value=s[0],ue.value=s[0],ce.timeTwo=s[1],ce.timeObj=e.result,de.value=e.result.enabled24_hour_time,me.value=null==(o=e.result)?void 0:o.automatically_enabled,ce.timeZone=e.result.timezone+" "+e.result.timezone_name,ce.dateFormatList=[{value:0,label:s[0]},{value:1,label:Ie(s[0],1)},{value:2,label:Ie(s[0],2)},{value:3,label:Ie(s[0],3)},{value:4,label:Ie(s[0],4)},{value:5,label:Ie(s[0],5)}]},pe=()=>{var e;ce.acceptData[ie.wId]=be;const a={type:"config/timezone/list",id:ie.wId++};null==(e=ie.ws)||e.send(T(a))},be=e=>{if(!e.success)return y(se("errorMessage"),"error");e.result.forEach((e=>{var a,l,t;let o=null==(a=null==e?void 0:e.split)?void 0:a.call(e,/\s+/);null==(t=null==(l=ce.timeZoneList)?void 0:l.push)||t.call(l,{time:o[0],region:o[1],label:e})}))},we=()=>{var e;ce.acceptData[ie.wId]=$e;const a={type:"config/notice_change",source:"web",id:ie.wId++};a.date=ne.value,a.time=ce.timeTwo,a["Settings.TIME.Enabled24_HourTime"]=1===de.value?1:0,a["Settings.TIME.SetAutomaticallyEnabled"]=me.value,""!==ce.formatValue&&(a["Settings.TIME.DateFormat"]=ce.formatValue),null==(e=ie.ws)||e.send(T(a)),_.set("DateFormat",ce.formatValue),_.set("24hour",de.value)},he=()=>{var e;me.value&&(ne.value=ue.value),ce.acceptData[ie.wId]=e=>{if(!e.success)return y(se("errorMessage"),"error")};const a={type:"config/notice_change",source:"web",id:ie.wId++};a["Settings.TIME.SetAutomaticallyEnabled"]=me.value,null==(e=ie.ws)||e.send(T(a))},Ve=()=>{var e;ce.acceptData[ie.wId]=e=>{e.success&&(ce.formatValue=Number(e.result["Settings.TIME.DateFormat"]))};const a={type:"ak_config/get",id:ie.wId++,item:["Settings.TIME.DateFormat"]};null==(e=ie.ws)||e.send(T(a))},$e=e=>{if(!e.success)return y(se("errorMessage"),"error");te("update:show",!1)},De=()=>{te("update:show",!1)},Ie=(e,a)=>{var l,t,o,s,i;if(e){const d=null==(l=null==e?void 0:e.split)?void 0:l.call(e,"-");if(1===a)return`${d[2]}.${d[1]}.${d[0]}`;if(2===a)return`${d[2]}/${d[1]}/${d[0]}`;if(3===a)return`${d[2]}-${d[1]}-${null==(o=null==(t=d[0])?void 0:t.slice)?void 0:o.call(t,-2)}`;if(4===a)return`${d[1]}-${d[2]}-${null==(i=null==(s=d[0])?void 0:s.slice)?void 0:i.call(s,-2)}`;if(5===a)return`${d[1]}-${d[2]}-${d[0]}`}},Te=e=>{};return o((()=>ie.updataId),(e=>{E(ce.acceptData,e,ie)}),{immediate:!0}),(e,a)=>{const l=b,t=w,o=s,D=h,I=V,T=$;return i(),d("div",S,[m(M,{show:ve.value,"onUpdate:show":a[5]||(a[5]=e=>ve.value=e),title:e.$t("Date&Time"),"is-ash":!ne.value,onButtonCancel:De,onButtonConfirm:we},{content:n((()=>[u((i(),d("section",null,[c("div",k,[c("div",F,[c("div",x,[c("div",Y,r(e.$t("24-hour time")),1)]),c("div",j,[m(l,{modelValue:de.value,"onUpdate:modelValue":a[0]||(a[0]=e=>de.value=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])])]),c("div",z,[c("div",A,[c("div",U,[c("div",H,r(e.$t("Set automatically")),1)]),c("div",L,[m(l,{modelValue:me.value,"onUpdate:modelValue":a[1]||(a[1]=e=>me.value=e),"active-value":1,"inactive-value":0,onChange:he},null,8,["modelValue"])])]),c("div",Z,[c("div",C,[c("div",B,r(e.$t("Date")),1)]),c("div",q,[m(t,{modelValue:ne.value,"onUpdate:modelValue":a[2]||(a[2]=e=>ne.value=e),disabled:re.value,class:v({"runninig-logs--top--left-time":!0,"runninig-logs--top--left-time-width":me.value}),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:e.$t("pickADay"),size:"large",onChange:Te},null,8,["modelValue","disabled","class","placeholder"])])]),c("div",O,[c("div",N,[c("div",G,r(e.$t("Time")),1)]),c("div",J,[m(o,{modelValue:ce.timeTwo,"onUpdate:modelValue":a[3]||(a[3]=e=>ce.timeTwo=e),disabled:re.value,class:"time-default-time",clearable:!1,format:de.value?"HH:mm":"hh:mm","value-format":"HH:mm","popper-class":"time-time-hmm"},null,8,["modelValue","disabled","format"])])]),c("div",K,[c("div",P,[c("div",Q,r(e.$t("Time zone")),1)]),c("div",R,r(ce.timeZone),1)]),c("div",W,[c("div",X,[c("div",ee,r(e.$t("Date Format")),1),c("div",ae,[m(I,{modelValue:ce.formatValue,"onUpdate:modelValue":a[4]||(a[4]=e=>ce.formatValue=e),class:"m-2",placeholder:e.$t("Select"),size:"large"},{default:n((()=>[(i(!0),d(g,null,f(ce.dateFormatList,((e,a)=>(i(),p(D,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])])])])])),[[T,ce.loadding]])])),_:1},8,["show","title","is-ash"])])}}};export{le as default};
