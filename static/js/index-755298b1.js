import{r as e,b as o,w as a,b4 as l,be as t,bc as n,b7 as i,ba as r,v as s,q as d,b9 as c,cq as m,b5 as u,F as g,bl as f,bf as v,cc as h,bn as p,bA as _,c6 as w,bi as b,bw as y,bx as V,bz as T,bB as S,j as D,l as k,bk as z,cf as $,br as R,bs as U,bj as x,cd as C,ce as A,bd as L,bh as M,bm as O,bo as H}from"./Akubela-element-plus-Vendor-47553b40.js";import{e as N,s as E,l as P}from"./config-178dd060.js";import{_ as I}from"./index-722e1dac.js";import{j,w as Y,u as F,Q as B,s as G,a as X,n as q,m as Z,ao as K,q as Q,o as W,al as J,an as ee}from"./Akubela-login-home-part-Vendor-facddf88.js";import{h as oe,c as ae}from"./index-8f4b869f.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const le={class:"top-title"},te={class:"part-location"},ne={class:"engr-common-row"},ie={class:"engr-common-row-left"},re={class:"engr-common-row-right"},se={class:"part-section"},de={class:"section-header"},ce={class:"section-body"},me={class:"engr-common-row mobus-cfg-row"},ue={class:"engr-common-row-left"},ge={class:"engr-common-row-right"},fe={class:"engr-common-row mobus-cfg-row"},ve={class:"engr-common-row-left"},he={class:"engr-common-row-right"},pe={class:"engr-common-row-right__span"},_e={class:"engr-common-row mobus-cfg-row"},we={class:"engr-common-row-left"},be={class:"engr-common-row-right"},ye={class:"engr-common-row-right__span"},Ve={class:"engr-common-row mobus-cfg-row"},Te={class:"engr-common-row-left"},Se={class:"engr-common-row-right"},De={class:"engr-common-row-right__span"},ke={class:"part-section"},ze={class:"section-header"},$e={class:"section-body"},Re={class:"engr-common-row mobus-cfg-row"},Ue={class:"engr-common-row-left"},xe={class:"engr-common-row-right"},Ce={class:"engr-common-row mobus-cfg-row"},Ae={class:"engr-common-row-left"},Le={class:"engr-common-row-right"},Me={class:"engr-common-row-right__span"},Oe={class:"part-section"},He={class:"section-header"},Ne={class:"section-body"},Ee={class:"engr-common-row mobus-cfg-row"},Pe={class:"engr-common-row-left"},Ie={class:"engr-common-row-right"},je={class:"engr-common-row mobus-cfg-row"},Ye={class:"engr-common-row-left"},Fe={class:"engr-common-row-right"},Be={class:"engr-common-row-right__span"},Ge={class:"part-location"},Xe={class:"engr-common-row"},qe={class:"engr-common-row-left"},Ze={class:"engr-common-row-right"},Ke={class:"part-section"},Qe={class:"section-header"},We={class:"section-body"},Je={class:"engr-common-row mobus-cfg-row button-line"},eo={class:"engr-common-row-left"},oo={class:"engr-common-row-right"},ao={key:0},lo={class:"engr-common-row mobus-cfg-row"},to={class:"engr-common-row-left"},no={class:"engr-common-row-right"},io={class:"engr-common-row mobus-cfg-row"},ro={class:"engr-common-row-left"},so={class:"engr-common-row-right"},co={class:"engr-common-row-right__span"},mo={class:"engr-common-row mobus-cfg-row"},uo={class:"engr-common-row-left"},go={class:"engr-common-row-right"},fo={class:"engr-common-row-right__span"},vo={class:"section-body"},ho={class:"engr-common-row mobus-cfg-row button-line"},po={class:"engr-common-row-left"},_o={class:"engr-common-row-right"},wo={key:0},bo={class:"engr-common-row mobus-cfg-row"},yo={class:"engr-common-row-left"},Vo={class:"engr-common-row-right"},To={class:"engr-common-row mobus-cfg-row"},So={class:"engr-common-row-left"},Do={class:"engr-common-row-right"},ko={class:"engr-common-row-right__span"},zo={class:"engr-common-row mobus-cfg-row"},$o={class:"engr-common-row-left"},Ro={class:"engr-common-row-right"},Uo={class:"engr-common-row-right__span"},xo={class:"section-body"},Co={class:"engr-common-row mobus-cfg-row button-line"},Ao={class:"engr-common-row-left"},Lo={class:"engr-common-row-right"},Mo={key:0},Oo={class:"engr-common-row mobus-cfg-row"},Ho={class:"engr-common-row-left"},No={class:"engr-common-row-right"},Eo={class:"engr-common-row mobus-cfg-row"},Po={class:"engr-common-row-left"},Io={class:"engr-common-row-right"},jo={class:"engr-common-row-right__span"},Yo={class:"engr-common-row mobus-cfg-row"},Fo={class:"engr-common-row-left"},Bo={class:"engr-common-row-right"},Go={class:"engr-common-row-right__span"},Xo={class:"section-body"},qo={class:"engr-common-row mobus-cfg-row button-line"},Zo={class:"engr-common-row-left"},Ko={class:"engr-common-row-right"},Qo={key:0},Wo={class:"engr-common-row mobus-cfg-row"},Jo={class:"engr-common-row-left"},ea={class:"engr-common-row-right"},oa={class:"engr-common-row mobus-cfg-row"},aa={class:"engr-common-row-left"},la={class:"engr-common-row-right"},ta={class:"engr-common-row-right__span"},na={class:"engr-common-row mobus-cfg-row"},ia={class:"engr-common-row-left"},ra={class:"engr-common-row-right"},sa={class:"engr-common-row-right__span"},da={class:"section-body"},ca={class:"engr-common-row mobus-cfg-row button-line"},ma={class:"engr-common-row-left"},ua={class:"engr-common-row-right"},ga={key:0},fa={class:"engr-common-row mobus-cfg-row"},va={class:"engr-common-row-left"},ha={class:"engr-common-row-right"},pa={class:"engr-common-row mobus-cfg-row"},_a={class:"engr-common-row-left"},wa={class:"engr-common-row-right"},ba={class:"engr-common-row-right__span"},ya={class:"engr-common-row mobus-cfg-row"},Va={class:"engr-common-row-left"},Ta={class:"engr-common-row-right"},Sa={class:"engr-common-row-right__span"},Da={class:"section-body"},ka={class:"engr-common-row mobus-cfg-row button-line"},za={class:"engr-common-row-left"},$a={class:"engr-common-row-right"},Ra={key:0},Ua={class:"engr-common-row mobus-cfg-row"},xa={class:"engr-common-row-left"},Ca={class:"engr-common-row-right"},Aa={class:"engr-common-row mobus-cfg-row"},La={class:"engr-common-row-left"},Ma={class:"engr-common-row-right"},Oa={class:"engr-common-row-right__span"},Ha={class:"engr-common-row mobus-cfg-row"},Na={class:"engr-common-row-left"},Ea={class:"engr-common-row-right"},Pa={class:"engr-common-row-right__span"},Ia={class:"part-section"},ja={class:"section-header"},Ya={class:"section-body"},Fa={class:"engr-common-row mobus-cfg-row button-line"},Ba={class:"engr-common-row-left"},Ga={class:"engr-common-row-right"},Xa={key:0},qa={class:"engr-common-row mobus-cfg-row"},Za={class:"engr-common-row-left"},Ka={class:"engr-common-row-right"},Qa={class:"engr-common-row mobus-cfg-row"},Wa={class:"engr-common-row-left"},Ja={class:"engr-common-row-right"},el={class:"engr-common-row-right__span"},ol={class:"engr-common-row mobus-cfg-row"},al={class:"engr-common-row-left"},ll={class:"engr-common-row-right"},tl={class:"engr-common-row-right__span"},nl={class:"section-body"},il={class:"engr-common-row mobus-cfg-row button-line"},rl={class:"engr-common-row-left"},sl={class:"engr-common-row-right"},dl={key:0},cl={class:"engr-common-row mobus-cfg-row"},ml={class:"engr-common-row-left"},ul={class:"engr-common-row-right"},gl={class:"engr-common-row mobus-cfg-row"},fl={class:"engr-common-row-left"},vl={class:"engr-common-row-right"},hl={class:"engr-common-row-right__span"},pl={class:"engr-common-row mobus-cfg-row"},_l={class:"engr-common-row-left"},wl={class:"engr-common-row-right"},bl={class:"engr-common-row-right__span"},yl={class:"section-body"},Vl={class:"engr-common-row mobus-cfg-row button-line"},Tl={class:"engr-common-row-left"},Sl={class:"engr-common-row-right"},Dl={key:0},kl={class:"engr-common-row mobus-cfg-row"},zl={class:"engr-common-row-left"},$l={class:"engr-common-row-right"},Rl={class:"engr-common-row mobus-cfg-row"},Ul={class:"engr-common-row-left"},xl={class:"engr-common-row-right"},Cl={class:"engr-common-row-right__span"},Al={class:"engr-common-row mobus-cfg-row"},Ll={class:"engr-common-row-left"},Ml={class:"engr-common-row-right"},Ol={class:"engr-common-row-right__span"},Hl={class:"section-body"},Nl={class:"engr-common-row mobus-cfg-row button-line"},El={class:"engr-common-row-left"},Pl={class:"engr-common-row-right"},Il={key:0},jl={class:"engr-common-row mobus-cfg-row"},Yl={class:"engr-common-row-left"},Fl={class:"engr-common-row-right"},Bl={class:"engr-common-row mobus-cfg-row"},Gl={class:"engr-common-row-left"},Xl={class:"engr-common-row-right"},ql={class:"engr-common-row-right__span"},Zl={class:"engr-common-row mobus-cfg-row"},Kl={class:"engr-common-row-left"},Ql={class:"engr-common-row-right"},Wl={class:"engr-common-row-right__span"},Jl={class:"section-body"},et={class:"engr-common-row mobus-cfg-row button-line"},ot={class:"engr-common-row-left"},at={class:"engr-common-row-right"},lt={key:0},tt={class:"engr-common-row mobus-cfg-row"},nt={class:"engr-common-row-left"},it={class:"engr-common-row-right"},rt={class:"engr-common-row mobus-cfg-row"},st={class:"engr-common-row-left"},dt={class:"engr-common-row-right"},ct={class:"engr-common-row-right__span"},mt={class:"engr-common-row mobus-cfg-row"},ut={class:"engr-common-row-left"},gt={class:"engr-common-row-right"},ft={class:"engr-common-row-right__span"},vt={__name:"thermostat-mobus-cfg-dia",props:{show:{type:Boolean,required:!0,default:!1},obj:{type:Object,default:()=>{}}},emits:["update:show","refresh"],setup(D,{emit:k}){const z=D,$=j();$.getRoomList();let R=Y();const{t:U}=F(),x=e(null),C=o({holdingRegister:U("Holding Register"),recevieData:{},diaShow:!1,loading:!1,timeAuto:null,spaceValue:[],newRoomList:[],temperatureFactorList:[{label:0,value:0},{label:1,value:1}]});let A=o({device_addr:"",device_id:"",device_type:"",name:"",area_id:"",config:{Thermostat:{state:{enable:!0,reg_type:"hold",reg_addr:1,on_value:1,off_value:0},room_temp:{reg_type:"hold",reg_addr:1,factor:1},preset_temp:{reg_type:"hold",reg_addr:1,range:[],step:.5,factor:1},fan_modes:{enable:!1,modes:["auto","lower","low","medium","high","higher"],info:{auto:{enable:!0,reg_type:"hold",reg_addr:5,active_value:4},lower:{enable:!1,reg_type:"hold",reg_addr:5,active_value:0},low:{enable:!0,reg_type:"hold",reg_addr:5,active_value:1},medium:{enable:!0,reg_type:"hold",reg_addr:5,active_value:2},high:{enable:!0,reg_type:"hold",reg_addr:5,active_value:3},higher:{enable:!1,reg_type:"hold",reg_addr:5,active_value:5}}},hvac_modes:{enable:!0,modes:["heat","cool","fan_only","auxiliary_heat","heat_and_auxiliary_heat"],info:{heat:{enable:!0,reg_type:"hold",reg_addr:4,active_value:2},cool:{enable:!0,reg_type:"hold",reg_addr:4,active_value:1},fan_only:{enable:!0,reg_type:"hold",reg_addr:4,active_value:0},auxiliary_heat:{enable:!0,reg_type:"hold",reg_addr:4,active_value:3},heat_and_auxiliary_heat:{enable:!0,reg_type:"hold",reg_addr:4,active_value:4}}}}}});const L={expandTrigger:"hover",value:"area_id",label:"name"},M=e=>{const o=e[e.length-1];A.area_id=o},O=e=>{A.config.Thermostat.room_temp.factor=A.config.Thermostat.preset_temp.factor},H=[{validator:(e,o,a)=>{if(!/^(0|[1-9]\d{0,3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(o))return a(U("Please enter 0~65535"));a()},trigger:"change"}],E=o({"config.Thermostat.state.reg_addr":H,"config.Thermostat.state.on_value":H,"config.Thermostat.state.off_value":H,"config.Thermostat.room_temp.reg_addr":H,"config.Thermostat.preset_temp.reg_addr":H,"config.Thermostat.fan_modes.info.auto.reg_addr":H,"config.Thermostat.fan_modes.info.auto.active_value":H,"config.Thermostat.fan_modes.info.lower.reg_addr":H,"config.Thermostat.fan_modes.info.lower.active_value":H,"config.Thermostat.fan_modes.info.low.reg_addr":H,"config.Thermostat.fan_modes.info.low.active_value":H,"config.Thermostat.fan_modes.info.medium.reg_addr":H,"config.Thermostat.fan_modes.info.medium.active_value":H,"config.Thermostat.fan_modes.info.high.reg_addr":H,"config.Thermostat.fan_modes.info.high.active_value":H,"config.Thermostat.fan_modes.info.higher.reg_addr":H,"config.Thermostat.fan_modes.info.higher.active_value":H,"config.Thermostat.hvac_modes.info.fan_only.reg_addr":H,"config.Thermostat.hvac_modes.info.fan_only.active_value":H,"config.Thermostat.hvac_modes.info.cool.reg_addr":H,"config.Thermostat.hvac_modes.info.cool.active_value":H,"config.Thermostat.hvac_modes.info.heat.reg_addr":H,"config.Thermostat.hvac_modes.info.heat.active_value":H,"config.Thermostat.hvac_modes.info.auxiliary_heat.reg_addr":H,"config.Thermostat.hvac_modes.info.auxiliary_heat.active_value":H,"config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.reg_addr":H,"config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.active_value":H}),P=()=>{x.value.validate((async e=>{var o;if(e){C.recevieData[R.wId]=e=>{if(!e.success)return q(U("errorMessage"),"error");q(U("success")),I()},"Other"===A.area_id&&(A.area_id="");const e={type:"ak_modbus/device/set",id:R.wId++,...A};null==(o=R.ws)||o.send(Z(e))}}))},I=()=>{k("refresh"),k("update:show",!1)};return a((()=>z.show),(e=>{var a,l,t,n;e?(A=o(B(z.obj)),C.newRoomList=null==(n=null==(t=null==(l=null==(a=$.newRoomList)?void 0:a.map)?void 0:l.call(a,(e=>({...e,name:U(null==e?void 0:e.name)}))))?void 0:t.filter)?void 0:n.call(t,(e=>!("all"===e.area_id||"public"===e.area_id))),(e=>{var o;let a=[];$.newRoomList.forEach((o=>{var l,t;(null==o?void 0:o.area_id)===e&&(null==(l=null==a?void 0:a.push)||l.call(a,null==o?void 0:o.area_id)),(null==(t=null==o?void 0:o.children)?void 0:t.length)>0&&o.children.forEach((l=>{(null==l?void 0:l.area_id)===e&&(a=[o.area_id,l.area_id])}))})),e&&0!==a.length||null==(o=null==a?void 0:a.push)||o.call(a,"Other"),C.spaceValue=a})(A.area_id),C.diaShow=!0):C.diaShow=!1})),a((()=>R.updataId),(e=>{G(C.recevieData,e,R)}),{immediate:!0}),(e,o)=>{const a=h,D=p,k=_,z=w,$=b,R=y,U=V,H=T,j=S;return l(),t(X,{show:C.diaShow,"onUpdate:show":o[54]||(o[54]=e=>C.diaShow=e),class:"thermostat-mobus-cfg-dia-index","back-show":!1,"foot-show":!0,title:e.$t("Thermostat-Mobus Configuration"),onButtonCancel:I,onButtonConfirm:P},{content:n((()=>[i("div",le,r(e.$t("Device Address"))+": "+r(s(A).device_addr),1),d(j,{ref_key:"ruleFormRef",ref:x,model:s(A),class:"mobus-cfg-form",rules:E,"label-width":"120px"},{default:n((()=>[i("div",te,[i("div",ne,[i("div",ie,r(e.$t("Device Location")),1),i("div",re,[d(a,{modelValue:C.spaceValue,"onUpdate:modelValue":o[0]||(o[0]=e=>C.spaceValue=e),class:"special-select","popper-class":"dia-space-cascader",options:C.newRoomList,props:L,size:s(N),separator:"-",onChange:M},null,8,["modelValue","options","size"])])])]),i("div",se,[i("div",de,[i("span",null,r(e.$t("On/Off State")),1)]),i("div",ce,[i("div",me,[i("div",ue,r(e.$t("Register Type")),1),i("div",ge,[d(k,{label:"",prop:"config.Thermostat.state.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[1]||(o[1]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",fe,[i("div",ve,r(e.$t("Register Address")),1),i("div",he,[d(k,{label:"",prop:"config.Thermostat.state.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.state.reg_addr,"onUpdate:modelValue":o[2]||(o[2]=e=>s(A).config.Thermostat.state.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",pe,r(e.$t("0~65535")),1)])]),i("div",_e,[i("div",we,r(e.$t("On Valve")),1),i("div",be,[d(k,{label:"",prop:"config.Thermostat.state.on_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.state.on_value,"onUpdate:modelValue":o[3]||(o[3]=e=>s(A).config.Thermostat.state.on_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",ye,r(e.$t("0~65535")),1)])]),i("div",Ve,[i("div",Te,r(e.$t("Off Valve")),1),i("div",Se,[d(k,{label:"",prop:"config.Thermostat.state.off_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.state.off_value,"onUpdate:modelValue":o[4]||(o[4]=e=>s(A).config.Thermostat.state.off_value=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",De,r(e.$t("0~65535")),1)])])])]),i("div",ke,[i("div",ze,[i("span",null,r(e.$t("Room Temperature")),1)]),i("div",$e,[i("div",Re,[i("div",Ue,r(e.$t("Register Type")),1),i("div",xe,[d(k,{label:"",prop:"config.Thermostat.room_temp.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[5]||(o[5]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",Ce,[i("div",Ae,r(e.$t("Register Address")),1),i("div",Le,[d(k,{label:"",prop:"config.Thermostat.room_temp.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.room_temp.reg_addr,"onUpdate:modelValue":o[6]||(o[6]=e=>s(A).config.Thermostat.room_temp.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",Me,r(e.$t("0~65535")),1)])])])]),i("div",Oe,[i("div",He,[i("span",null,r(e.$t("set_temperature")),1)]),i("div",Ne,[i("div",Ee,[i("div",Pe,r(e.$t("Register Type")),1),i("div",Ie,[d(k,{label:"",prop:"config.Thermostat.preset_temp.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[7]||(o[7]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",je,[i("div",Ye,r(e.$t("Register Address")),1),i("div",Fe,[d(k,{label:"",prop:"config.Thermostat.preset_temp.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.preset_temp.reg_addr,"onUpdate:modelValue":o[8]||(o[8]=e=>s(A).config.Thermostat.preset_temp.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",Be,r(e.$t("0~65535")),1)])])])]),i("div",Ge,[i("div",Xe,[i("div",qe,[c(r(e.$t("Temperature Factor")),1),d($,{class:"box-item",effect:"light",content:e.$t("tipShowTempFacTip"),placement:"top","raw-content":!0},{default:n((()=>[d(z,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Ze,[d(U,{modelValue:s(A).config.Thermostat.preset_temp.factor,"onUpdate:modelValue":o[9]||(o[9]=e=>s(A).config.Thermostat.preset_temp.factor=e),class:"device-select-raly",placeholder:"",size:s(N),onChange:O},{default:n((()=>[(l(!0),u(g,null,f(C.temperatureFactorList,(e=>(l(),t(R,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])])]),i("div",Ke,[i("div",Qe,[i("span",null,r(e.$t("Fan Mode")),1)]),i("div",We,[i("div",Je,[i("div",eo,r(e.$t("Auto")),1),i("div",oo,[d(H,{modelValue:s(A).config.Thermostat.fan_modes.info.auto.enable,"onUpdate:modelValue":o[10]||(o[10]=e=>s(A).config.Thermostat.fan_modes.info.auto.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.fan_modes.info.auto.enable?(l(),u("span",ao,[i("div",lo,[i("div",to,r(e.$t("Register Type")),1),i("div",no,[d(k,{label:"",prop:"config.fan_modes.info.auto.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[11]||(o[11]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",io,[i("div",ro,r(e.$t("Register Address")),1),i("div",so,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.auto.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.auto.reg_addr,"onUpdate:modelValue":o[12]||(o[12]=e=>s(A).config.Thermostat.fan_modes.info.auto.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",co,r(e.$t("0~65535")),1)])]),i("div",mo,[i("div",uo,r(e.$t("Active Valve")),1),i("div",go,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.auto.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.auto.active_value,"onUpdate:modelValue":o[13]||(o[13]=e=>s(A).config.Thermostat.fan_modes.info.auto.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",fo,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",vo,[i("div",ho,[i("div",po,r(e.$t("Lower")),1),i("div",_o,[d(H,{modelValue:s(A).config.Thermostat.fan_modes.info.lower.enable,"onUpdate:modelValue":o[14]||(o[14]=e=>s(A).config.Thermostat.fan_modes.info.lower.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.fan_modes.info.lower.enable?(l(),u("span",wo,[i("div",bo,[i("div",yo,r(e.$t("Register Type")),1),i("div",Vo,[d(k,{label:"",prop:"config.fan_modes.info.lower.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[15]||(o[15]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",To,[i("div",So,r(e.$t("Register Address")),1),i("div",Do,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.lower.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.lower.reg_addr,"onUpdate:modelValue":o[16]||(o[16]=e=>s(A).config.Thermostat.fan_modes.info.lower.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",ko,r(e.$t("0~65535")),1)])]),i("div",zo,[i("div",$o,r(e.$t("Active Valve")),1),i("div",Ro,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.lower.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.lower.active_value,"onUpdate:modelValue":o[17]||(o[17]=e=>s(A).config.Thermostat.fan_modes.info.lower.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",Uo,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",xo,[i("div",Co,[i("div",Ao,r(e.$t("Low")),1),i("div",Lo,[d(H,{modelValue:s(A).config.Thermostat.fan_modes.info.low.enable,"onUpdate:modelValue":o[18]||(o[18]=e=>s(A).config.Thermostat.fan_modes.info.low.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.fan_modes.info.low.enable?(l(),u("span",Mo,[i("div",Oo,[i("div",Ho,r(e.$t("Register Type")),1),i("div",No,[d(k,{label:"",prop:"config.fan_modes.info.low.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[19]||(o[19]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",Eo,[i("div",Po,r(e.$t("Register Address")),1),i("div",Io,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.low.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.low.reg_addr,"onUpdate:modelValue":o[20]||(o[20]=e=>s(A).config.Thermostat.fan_modes.info.low.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",jo,r(e.$t("0~65535")),1)])]),i("div",Yo,[i("div",Fo,r(e.$t("Active Valve")),1),i("div",Bo,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.low.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.low.active_value,"onUpdate:modelValue":o[21]||(o[21]=e=>s(A).config.Thermostat.fan_modes.info.low.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",Go,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",Xo,[i("div",qo,[i("div",Zo,r(e.$t("Medium")),1),i("div",Ko,[d(H,{modelValue:s(A).config.Thermostat.fan_modes.info.medium.enable,"onUpdate:modelValue":o[22]||(o[22]=e=>s(A).config.Thermostat.fan_modes.info.medium.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.fan_modes.info.medium.enable?(l(),u("span",Qo,[i("div",Wo,[i("div",Jo,r(e.$t("Register Type")),1),i("div",ea,[d(k,{label:"",prop:"config.fan_modes.info.medium.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[23]||(o[23]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",oa,[i("div",aa,r(e.$t("Register Address")),1),i("div",la,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.medium.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.medium.reg_addr,"onUpdate:modelValue":o[24]||(o[24]=e=>s(A).config.Thermostat.fan_modes.info.medium.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",ta,r(e.$t("0~65535")),1)])]),i("div",na,[i("div",ia,r(e.$t("Active Valve")),1),i("div",ra,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.medium.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.medium.active_value,"onUpdate:modelValue":o[25]||(o[25]=e=>s(A).config.Thermostat.fan_modes.info.medium.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",sa,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",da,[i("div",ca,[i("div",ma,r(e.$t("High")),1),i("div",ua,[d(H,{modelValue:s(A).config.Thermostat.fan_modes.info.high.enable,"onUpdate:modelValue":o[26]||(o[26]=e=>s(A).config.Thermostat.fan_modes.info.high.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.fan_modes.info.high.enable?(l(),u("span",ga,[i("div",fa,[i("div",va,r(e.$t("Register Type")),1),i("div",ha,[d(k,{label:"",prop:"config.fan_modes.info.high.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[27]||(o[27]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",pa,[i("div",_a,r(e.$t("Register Address")),1),i("div",wa,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.high.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.high.reg_addr,"onUpdate:modelValue":o[28]||(o[28]=e=>s(A).config.Thermostat.fan_modes.info.high.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",ba,r(e.$t("0~65535")),1)])]),i("div",ya,[i("div",Va,r(e.$t("Active Valve")),1),i("div",Ta,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.high.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.high.active_value,"onUpdate:modelValue":o[29]||(o[29]=e=>s(A).config.Thermostat.fan_modes.info.high.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",Sa,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",Da,[i("div",ka,[i("div",za,r(e.$t("Higher")),1),i("div",$a,[d(H,{modelValue:s(A).config.Thermostat.fan_modes.info.higher.enable,"onUpdate:modelValue":o[30]||(o[30]=e=>s(A).config.Thermostat.fan_modes.info.higher.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.fan_modes.info.higher.enable?(l(),u("span",Ra,[i("div",Ua,[i("div",xa,r(e.$t("Register Type")),1),i("div",Ca,[d(k,{label:"",prop:"config.fan_modes.info.higher.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[31]||(o[31]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",Aa,[i("div",La,r(e.$t("Register Address")),1),i("div",Ma,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.higher.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.higher.reg_addr,"onUpdate:modelValue":o[32]||(o[32]=e=>s(A).config.Thermostat.fan_modes.info.higher.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",Oa,r(e.$t("0~65535")),1)])]),i("div",Ha,[i("div",Na,r(e.$t("Active Valve")),1),i("div",Ea,[d(k,{label:"",prop:"config.Thermostat.fan_modes.info.higher.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.fan_modes.info.higher.active_value,"onUpdate:modelValue":o[33]||(o[33]=e=>s(A).config.Thermostat.fan_modes.info.higher.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",Pa,r(e.$t("0~65535")),1)])])])):v("",!0)])]),i("div",Ia,[i("div",ja,[i("span",null,r(e.$t("Operation Mode")),1)]),i("div",Ya,[i("div",Fa,[i("div",Ba,r(e.$t("Heating")),1),i("div",Ga,[d(H,{modelValue:s(A).config.Thermostat.hvac_modes.info.heat.enable,"onUpdate:modelValue":o[34]||(o[34]=e=>s(A).config.Thermostat.hvac_modes.info.heat.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.hvac_modes.info.heat.enable?(l(),u("span",Xa,[i("div",qa,[i("div",Za,r(e.$t("Register Type")),1),i("div",Ka,[d(k,{label:"",prop:"config.hvac_modes.info.heat.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[35]||(o[35]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",Qa,[i("div",Wa,r(e.$t("Register Address")),1),i("div",Ja,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.heat.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.heat.reg_addr,"onUpdate:modelValue":o[36]||(o[36]=e=>s(A).config.Thermostat.hvac_modes.info.heat.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",el,r(e.$t("0~65535")),1)])]),i("div",ol,[i("div",al,r(e.$t("Active Valve")),1),i("div",ll,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.heat.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.heat.active_value,"onUpdate:modelValue":o[37]||(o[37]=e=>s(A).config.Thermostat.hvac_modes.info.heat.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",tl,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",nl,[i("div",il,[i("div",rl,r(e.$t("Cooling")),1),i("div",sl,[d(H,{modelValue:s(A).config.Thermostat.hvac_modes.info.cool.enable,"onUpdate:modelValue":o[38]||(o[38]=e=>s(A).config.Thermostat.hvac_modes.info.cool.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.hvac_modes.info.cool.enable?(l(),u("span",dl,[i("div",cl,[i("div",ml,r(e.$t("Register Type")),1),i("div",ul,[d(k,{label:"",prop:"config.hvac_modes.info.cool.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[39]||(o[39]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",gl,[i("div",fl,r(e.$t("Register Address")),1),i("div",vl,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.cool.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.cool.reg_addr,"onUpdate:modelValue":o[40]||(o[40]=e=>s(A).config.Thermostat.hvac_modes.info.cool.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",hl,r(e.$t("0~65535")),1)])]),i("div",pl,[i("div",_l,r(e.$t("Active Valve")),1),i("div",wl,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.cool.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.cool.active_value,"onUpdate:modelValue":o[41]||(o[41]=e=>s(A).config.Thermostat.hvac_modes.info.cool.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",bl,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",yl,[i("div",Vl,[i("div",Tl,r(e.$t("Ventilation")),1),i("div",Sl,[d(H,{modelValue:s(A).config.Thermostat.hvac_modes.info.fan_only.enable,"onUpdate:modelValue":o[42]||(o[42]=e=>s(A).config.Thermostat.hvac_modes.info.fan_only.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.hvac_modes.info.fan_only.enable?(l(),u("span",Dl,[i("div",kl,[i("div",zl,r(e.$t("Register Type")),1),i("div",$l,[d(k,{label:"",prop:"config.hvac_modes.info.fan_only.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[43]||(o[43]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",Rl,[i("div",Ul,r(e.$t("Register Address")),1),i("div",xl,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.fan_only.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.fan_only.reg_addr,"onUpdate:modelValue":o[44]||(o[44]=e=>s(A).config.Thermostat.hvac_modes.info.fan_only.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",Cl,r(e.$t("0~65535")),1)])]),i("div",Al,[i("div",Ll,r(e.$t("Active Valve")),1),i("div",Ml,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.fan_only.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.fan_only.active_value,"onUpdate:modelValue":o[45]||(o[45]=e=>s(A).config.Thermostat.hvac_modes.info.fan_only.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",Ol,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",Hl,[i("div",Nl,[i("div",El,r(e.$t("auxiliary_heat")),1),i("div",Pl,[d(H,{modelValue:s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.enable,"onUpdate:modelValue":o[46]||(o[46]=e=>s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.enable?(l(),u("span",Il,[i("div",jl,[i("div",Yl,r(e.$t("Register Type")),1),i("div",Fl,[d(k,{label:"",prop:"config.hvac_modes.info.auxiliary_heat.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[47]||(o[47]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",Bl,[i("div",Gl,r(e.$t("Register Address")),1),i("div",Xl,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.auxiliary_heat.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.reg_addr,"onUpdate:modelValue":o[48]||(o[48]=e=>s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",ql,r(e.$t("0~65535")),1)])]),i("div",Zl,[i("div",Kl,r(e.$t("Active Valve")),1),i("div",Ql,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.auxiliary_heat.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.active_value,"onUpdate:modelValue":o[49]||(o[49]=e=>s(A).config.Thermostat.hvac_modes.info.auxiliary_heat.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",Wl,r(e.$t("0~65535")),1)])])])):v("",!0)]),i("div",Jl,[i("div",et,[i("div",ot,r(e.$t("Heating + Auxiliary electric heater")),1),i("div",at,[d(H,{modelValue:s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.enable,"onUpdate:modelValue":o[50]||(o[50]=e=>s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.enable=e),size:"large"},null,8,["modelValue"])])]),s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.enable?(l(),u("span",lt,[i("div",tt,[i("div",nt,r(e.$t("Register Type")),1),i("div",it,[d(k,{label:"",prop:"config.hvac_modes.info.heat_and_auxiliary_heat.reg_type"},{default:n((()=>[d(D,{modelValue:C.holdingRegister,"onUpdate:modelValue":o[51]||(o[51]=e=>C.holdingRegister=e),disabled:!0,size:s(N),maxlength:63},null,8,["modelValue","size"])])),_:1})])]),i("div",rt,[i("div",st,r(e.$t("Register Address")),1),i("div",dt,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.reg_addr"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.reg_addr,"onUpdate:modelValue":o[52]||(o[52]=e=>s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.reg_addr=e),modelModifiers:{number:!0},size:s(N)},null,8,["modelValue","size"])])),_:1}),i("span",ct,r(e.$t("0~65535")),1)])]),i("div",mt,[i("div",ut,r(e.$t("Active Valve")),1),i("div",gt,[d(k,{label:"",prop:"config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.active_value"},{default:n((()=>[d(D,{modelValue:s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.active_value,"onUpdate:modelValue":o[53]||(o[53]=e=>s(A).config.Thermostat.hvac_modes.info.heat_and_auxiliary_heat.active_value=e),modelModifiers:{number:!0},size:s(N),maxlength:5},null,8,["modelValue","size"])])),_:1}),i("span",ft,r(e.$t("0~65535")),1)])])])):v("",!0)])])])),_:1},8,["model","rules"])])),_:1},8,["show","title"])}}},ht={class:"rcu-relay-index"},pt={class:"rcu-switch-title"},_t={class:"engr-common-row"},wt={class:"engr-common-row-left"},bt={class:"engr-common-row-right"},yt={class:"engr-common-row"},Vt={class:"engr-common-row-left"},Tt={class:"engr-common-row-right"},St={class:"engr-common-row"},Dt={class:"engr-common-row-left"},kt={class:"engr-common-row-right"},zt={class:"engr-common-row"},$t={class:"engr-common-row-left"},Rt={class:"engr-common-row-right"},Ut={class:"engr-common-row"},xt={class:"engr-common-row-left"},Ct={class:"engr-common-row-right"},At={class:"engr-common-row"},Lt={class:"engr-common-row-left"},Mt={class:"engr-common-row-right"},Ot={class:"engr-common-row"},Ht={class:"engr-common-row-left"},Nt={class:"engr-common-row-right"},Et={class:"engr-common-row"},Pt={class:"engr-common-row-left"},It={class:"engr-common-row-right"},jt={key:1,class:"engr-common-row"},Yt={class:"engr-common-row-left"},Ft={class:"engr-common-row-right"},Bt={__name:"rcu-relay",props:{obj:{type:Object,default:()=>{}},getAllFormData:{type:Object,default:()=>{}}},setup(a,{expose:h}){const $=a;j();const{t:R}=F(),U=e(null),x=e({}),C=o({temArray:[]}),A=D((()=>({typeArray:[{label:R("Switch"),value:"Switch"},{label:R("Light"),value:"Light"},{label:R("Fan"),value:"Fan"},{label:R("Shade-open"),value:"Shade-open"},{label:R("Shade-close"),value:"Shade-close"},{label:R("Heating"),value:"Heating"},{label:R("Cooling"),value:"Cooling"},{label:R("Plug"),value:"Plug"},{label:R("TV"),value:"TV"},{label:R("DND indicator"),value:"Dnd"},{label:R("MUR indicator"),value:"Clean"}],ncnoArray:[{label:R("rcuNO"),value:0},{label:R("NC"),value:1}],memoryArray:[{label:R("OFF"),value:0},{label:R("RCUON"),value:1},{label:R("Before power off"),value:2}]}))),L=e({data:[]});k((()=>{B()}));const M={"Shade-open":["Shade-close"],"Shade-close":["Shade-open"],Heating:["Cooling"],Cooling:["Heating"]},O=e=>{const o=L.value.data.filter((o=>o.index!==e.index&&o.enable&&M[e.func].includes(o.func))).map((e=>({value:e.index,label:e.device_name,disabled:0!==e.combination})));return o.push({value:0,label:R("empty")}),o},H=(e,o,a)=>o?a():a(R("Please select temperature source")),P=(e,o,a)=>{const{nowObj:l}=e;if(!o)return void a(R("Enter Device Name"));if(!(K(l.device_name)>63))return a();a(R("Please enter a name no longer than 63 characters."))},I=(e,o,a)=>(e=>{if("-0"===e)return!0;if(!Q(e))return!0;if(e.toString().includes("+"))return!0;const o=e.toString().split(".");if(o.length>1&&o[1].length>1)return!0;if(o.length>1&&""===o[1])return!0;for(let a=0;a<e.length;a++){const o=e[a];if(a+1<e.length&&"0"===o&&"."!==e[a+1])return!0}return e>5||(e<0||""===e)})(o)?a(R("Please enter a valid number.")):a(),Y=(e,o,a)=>{const{nowObj:l}=e;return["Shade-open","Shade-close"].includes(l.func)&&!o?a(R("Please select another shade control relay.")):a()},B=()=>{const e=$.obj.config.Switch.switch;L.value.data=e;E.getTemperatureList((e=>{C.temArray=e}))},G=e=>{var o;let a=[];const l=e.index,t=null==(o=$.getAllFormData.allData)?void 0:o.io_in;return t&&(a=t.filter((e=>e.link===l&&(null==e?void 0:e.enable)))),a},X=e=>{let o=G(e);return null==o?void 0:o.length},q=e=>{let o=G(e);return R("The device has been associated with Input1. If you want to change the type, you need to cancel the association first.",{name:o.map((e=>e.device_name)).join(",")})},Z=e=>["Heating","Cooling","Shade-open","Shade-close"].includes(e.func);return h({init:B,isPass:async()=>{let e=!1;return await U.value.validate((async o=>{e=o})),e},getFormData:()=>(L.value.data.forEach((e=>{e.combination||(e.combination=0)})),L.value.data)}),(e,o)=>{const a=T,h=_,D=p,k=y,$=V,R=w,E=b,j=z,F=S;return l(),u("div",ht,[i("div",pt,r(e.$t("Relays")),1),d(F,{ref_key:"ruleFormRef",ref:U,model:L.value,class:"mobus-cfg-form",rules:x.value,"label-width":"120px"},{default:n((()=>[d(j,{class:"rcu-relay-card"},{default:n((()=>[(l(!0),u(g,null,f(L.value.data,((o,p)=>{return l(),u(g,{key:o.index},[i("div",_t,[i("div",wt,r(e.$t("Enable Relay")+o.index),1),i("div",bt,[d(h,{label:""},{default:n((()=>[d(a,{modelValue:o.enable,"onUpdate:modelValue":e=>o.enable=e,size:s(N)},null,8,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])]),o.enable?(l(),u(g,{key:0},[i("div",yt,[i("div",Vt,r(e.$t("Relay Name")),1),i("div",Tt,[d(h,{label:"",prop:"data."+p+".device_name",rules:[{validator:P,trigger:"change",nowObj:o}]},{default:n((()=>[d(D,{modelValue:o.device_name,"onUpdate:modelValue":e=>o.device_name=e,size:s(N),maxlength:63,onChange:e=>(e=>{if(M[e.func]){const o=L.value.data.find((o=>o.index===e.combination));o&&(o.device_name=e.device_name)}})(o)},null,8,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1032,["prop","rules"])])]),i("div",St,[i("div",Dt,r(e.$t("Relay Type")),1),i("div",kt,[d(h,{label:"",prop:"formMobus.config.Thermostat.fan_modes.info.auto.reg_addr"},{default:n((()=>[d($,{modelValue:o.func,"onUpdate:modelValue":e=>o.func=e,size:s(N),class:"device-select-raly",placeholder:"",disabled:X(o),onChange:e=>(e=>{if(e.combination){const o=L.value.data.find((o=>o.index===e.combination));o.func="Switch",o.combination=0}e.combination=0})(o)},{default:n((()=>[(l(!0),u(g,null,f(A.value.typeArray,(e=>(l(),t(k,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","disabled","onChange"]),X(o)?(l(),t(E,{key:0,effect:"light",content:q(o),placement:"top","raw-content":!0},{default:n((()=>[d(R,{class:"ak-mar-left"},{default:n((()=>[d(s(m))])),_:1})])),_:2},1032,["content"])):v("",!0)])),_:2},1024)])]),i("div",zt,[i("div",$t,r(e.$t("Power off memory")),1),i("div",Rt,[d(h,{label:"",prop:"formMobus.config.Thermostat.fan_modes.info.auto.reg_addr"},{default:n((()=>[d($,{modelValue:o.memory,"onUpdate:modelValue":e=>o.memory=e,size:s(N),class:"device-select-raly",placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(A.value.memoryArray,(e=>(l(),t(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])]),i("div",Ut,[i("div",xt,r(e.$t("NCNO")),1),i("div",Ct,[d(h,{label:"",prop:"formMobus.config.Thermostat.fan_modes.info.auto.reg_addr"},{default:n((()=>[d($,{modelValue:o.NCNO,"onUpdate:modelValue":e=>o.NCNO=e,size:s(N),class:"device-select-raly",placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(A.value.ncnoArray,(e=>(l(),t(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])]),(_=o,["Heating","Cooling"].includes(_.func)?(l(),u(g,{key:0},[i("div",At,[i("div",Lt,[c(r(e.$t("Upper Hysteresis Value"))+" ",1),d(E,{class:"box-item",effect:"light",content:e.$t("tipShowHeatting"),placement:"top","raw-content":!0},{default:n((()=>[d(R,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Mt,[d(h,{label:"",prop:"data."+p+".upper_hysteresis_value",rules:[{validator:I,trigger:"change"}]},{default:n((()=>[d(D,{modelValue:o.upper_hysteresis_value,"onUpdate:modelValue":e=>o.upper_hysteresis_value=e,size:s(N),maxlength:63},null,8,["modelValue","onUpdate:modelValue","size"])])),_:2},1032,["prop","rules"])])]),i("div",Ot,[i("div",Ht,[c(r(e.$t("Lower Hysteresis Value"))+" ",1),d(E,{class:"box-item",effect:"light",content:e.$t("tipShowCooling"),placement:"top","raw-content":!0},{default:n((()=>[d(R,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Nt,[d(h,{label:"",prop:"data."+p+".lower_hysteresis_value",rules:[{validator:I,trigger:"change"}]},{default:n((()=>[d(D,{modelValue:o.lower_hysteresis_value,"onUpdate:modelValue":e=>o.lower_hysteresis_value=e,size:s(N),maxlength:63},null,8,["modelValue","onUpdate:modelValue","size"])])),_:2},1032,["prop","rules"])])]),i("div",Et,[i("div",Pt,r(e.$t("Temperature source")),1),i("div",It,[d(h,{label:"",prop:"data."+p+".temperature_source",rules:[{validator:H,trigger:"change"}]},{default:n((()=>[d($,{modelValue:o.temperature_source,"onUpdate:modelValue":e=>o.temperature_source=e,class:"device-select-raly",size:s(N),placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(C.temArray,(e=>(l(),t(k,{key:e.device_id,label:e.name,value:e.device_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1032,["prop","rules"])])])],64)):v("",!0)),Z(o)?(l(),u("div",jt,[i("div",Yt,r(e.$t("combination")),1),i("div",Ft,[d(h,{label:"",prop:"data."+p+".combination",rules:[{validator:Y,trigger:"change",nowObj:o}]},{default:n((()=>[i("div",null,[d($,{modelValue:o.combination,"onUpdate:modelValue":e=>o.combination=e,size:s(N),class:"device-select-raly device-select-combinantion",placeholder:"",onChange:e=>((e,o)=>{if(0===e){const e=L.value.data.find((e=>e.combination===o.index));return void(e&&(e.combination=0))}L.value.data.find((o=>o.index===e)).combination=o.index})(e,o)},{default:n((()=>[(l(!0),u(g,null,f(O(o),(e=>(l(),t(k,{key:e.value,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","onChange"])])])),_:2},1032,["prop","rules"])])])):v("",!0)],64)):v("",!0)],64);var _})),128))])),_:1})])),_:1},8,["model","rules"])])}}},Gt={class:"rcu-out-index"},Xt={class:"rcu-switch-title"},qt={class:"engr-common-row out-cfg-row"},Zt={class:"engr-common-row-left"},Kt={class:"engr-common-row-right"},Qt={key:0},Wt={class:"engr-common-row out-cfg-row"},Jt={class:"engr-common-row-left"},en={class:"engr-common-row-right"},on={class:"engr-common-row out-cfg-row"},an={class:"engr-common-row-left"},ln={class:"engr-common-row-right"},tn={class:"engr-common-row out-cfg-row"},nn={class:"engr-common-row-left"},rn={class:"engr-common-row-right"},sn={class:"engr-common-row out-cfg-row"},dn={class:"engr-common-row-left"},cn={class:"engr-common-row-right"},mn={class:"engr-common-row out-cfg-row"},un={class:"engr-common-row-left"},gn={class:"engr-common-row-right"},fn={key:0,class:"engr-common-row out-cfg-row"},vn={class:"engr-common-row-left"},hn={class:"engr-common-row-right"},pn={key:1,class:"engr-common-row out-cfg-row"},_n={class:"engr-common-row-left"},wn={class:"engr-common-row-right"},bn={key:2,class:"engr-common-row out-cfg-row engr-rcu-in-right"},yn={class:"engr-common-row-left"},Vn={class:"engr-common-row-right"},Tn={class:"engr-common-row-right__span"},Sn={key:3,class:"engr-common-row out-cfg-row engr-rcu-in-right"},Dn={class:"engr-common-row-left"},kn={class:"engr-common-row-right"},zn={class:"engr-common-row-right__span"},$n={__name:"rcu-out",props:{obj:{type:Object,default:()=>{}},getAllFormData:{type:Object,default:()=>{}}},emits:["get-all-data"],setup(a,{expose:c,emit:h}){var k,$;const R=a;let U=j();const{t:x}=F(),C=e(null);let A=(null==($=null==(k=R.obj.config)?void 0:k.Switch)?void 0:$.io_out)?o(B(R.obj.config.Switch.io_out)):[];const L=[];for(let e=1;e<=60;e++)L.push({value:e,label:x("number s",{number:e})});const M={validator:(e,o,a)=>{if(!(e.click_mode?/^(1000|[1-9]\d{2}|100)$/.test(e.v):/^(3000|[1-9]\d{2}|[1-2]\d{3})$/.test(e.v)))return e.click_mode?a(x("Please enter 100ms~1000ms")):a(x("Please enter 100ms~3000ms"));a()},trigger:"change"},O={validator:(e,o,a)=>{var l,t;if(!e.v.device_name)return void a(x("Enter Device Name"));if(K(e.v.device_name)>63)return void a(x("Please enter a name no longer than 63 characters."));(null==(t=null==(l=null==U?void 0:U.devicesList)?void 0:l.filter)?void 0:t.call(l,(o=>o.device_id!==e.v.device_id))).find((o=>o.name===e.v.device_name));return R.getAllFormData.allName.filter((o=>o===e.v.device_name)).length,a()},trigger:"change"},H=D((()=>({outputTypeOptions:[{label:x("Bell"),value:"Bell"},{label:x("Light"),value:"Light"},{label:x("Switch"),value:"Switch"},{label:x("Lock"),value:"Lock"},{label:x("DND indicator"),value:"Dnd"},{label:x("MUR indicator"),value:"Clean"}],NCNOOptions:[{label:x("rcuNO"),value:0},{label:x("NC"),value:1}],memoryOptions:[{label:x("Before power off"),value:2},{label:x("On"),value:1},{label:x("OFF"),value:0}],outputModeOptions:[{label:x("Logic Level"),value:0},{label:x("Pulse"),value:1}],clickModeOptions:[{label:x("Single Pulse"),value:0},{label:x("Double Pulse"),value:1}]}))),E=e=>{var o;let a=[];const l=e.index,t=null==(o=R.getAllFormData.allData)?void 0:o.io_in;return t&&(a=t.filter((e=>e.link===l&&(null==e?void 0:e.enable)))),a},P=e=>{let o=E(e);return null==o?void 0:o.length},I=e=>{let o=E(e);return x("The device has been associated with Input1. If you want to change the type, you need to cancel the association first.",{name:o.map((e=>e.device_name)).join(",")})};return c({isPass:async()=>{let e=!1;return await C.value.validate((async o=>{e=o})),e},getFormData:()=>A}),(e,o)=>{const a=T,c=_,h=p,D=y,k=V,$=w,R=b,U=z,x=S;return l(),u("div",Gt,[i("div",Xt,r(e.$t("Digital Output")),1),d(x,{ref_key:"ruleFormRef",ref:C,model:s(A),class:"out-cfg-form"},{default:n((()=>[d(U,{class:"rcu-relay-card"},{default:n((()=>[(l(!0),u(g,null,f(s(A),((o,p)=>(l(),u("div",{key:o.index+"out",class:"out-part"},[i("div",qt,[i("div",Zt,r(e.$t("Enable Output")+(p+1)),1),i("div",Kt,[d(c,{label:""},{default:n((()=>[d(a,{modelValue:o.enable,"onUpdate:modelValue":e=>o.enable=e,size:s(N)},null,8,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])]),o.enable?(l(),u("div",Qt,[i("div",Wt,[i("div",Jt,r(e.$t("Output Name")),1),i("div",en,[d(c,{label:"",prop:`formOut[${p}].device_name`,rules:[{...O,v:o}]},{default:n((()=>[d(h,{modelValue:o.device_name,"onUpdate:modelValue":e=>o.device_name=e,size:s(N),maxlength:63},null,8,["modelValue","onUpdate:modelValue","size"])])),_:2},1032,["prop","rules"])])]),i("div",on,[i("div",an,r(e.$t("Output Type")),1),i("div",ln,[d(c,{label:""},{default:n((()=>[d(k,{modelValue:o.func,"onUpdate:modelValue":e=>o.func=e,size:s(N),disabled:P(o),class:"device-select-raly",placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(H.value.outputTypeOptions,(e=>(l(),t(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","disabled"]),P(o)?(l(),t(R,{key:0,effect:"light",content:I(o),placement:"top","raw-content":!0},{default:n((()=>[d($,{class:"ak-mar-left"},{default:n((()=>[d(s(m))])),_:1})])),_:2},1032,["content"])):v("",!0)])),_:2},1024)])]),i("div",tn,[i("div",nn,r(e.$t("NO/NC")),1),i("div",rn,[d(c,{label:""},{default:n((()=>[d(k,{modelValue:o.NCNO,"onUpdate:modelValue":e=>o.NCNO=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(H.value.NCNOOptions,(e=>(l(),t(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])]),i("div",sn,[i("div",dn,r(e.$t("Power off memory")),1),i("div",cn,[d(c,{label:""},{default:n((()=>[d(k,{modelValue:o.memory,"onUpdate:modelValue":e=>o.memory=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(H.value.memoryOptions,(e=>(l(),t(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])]),i("div",mn,[i("div",un,r(e.$t("Output Mode")),1),i("div",gn,[d(c,{label:""},{default:n((()=>[d(k,{modelValue:o.output_mode,"onUpdate:modelValue":e=>o.output_mode=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:"",onChange:e=>{}},{default:n((()=>[(l(!0),u(g,null,f(H.value.outputModeOptions,(e=>(l(),t(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1024)])]),"Lock"===o.func?(l(),u("div",fn,[i("div",vn,r(e.$t("Unlock Time")),1),i("div",hn,[d(c,{label:""},{default:n((()=>[d(k,{modelValue:o.unlock_time,"onUpdate:modelValue":e=>o.unlock_time=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:"",filterable:""},{default:n((()=>[(l(),u(g,null,f(L,(e=>d(D,{key:e,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])])):v("",!0),o.output_mode?(l(),u("div",pn,[i("div",_n,r(e.$t("Click Mode")),1),i("div",wn,[d(c,{label:""},{default:n((()=>[d(k,{modelValue:o.click_mode,"onUpdate:modelValue":e=>o.click_mode=e,size:s(N),class:"device-select-raly",placeholder:"",onChange:e=>((e,o)=>{A[o].click_interval=100,A[o].gap_click_interval=100})(0,p)},{default:n((()=>[(l(!0),u(g,null,f(H.value.clickModeOptions,(e=>(l(),t(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1024)])])):v("",!0),o.output_mode&&!o.click_mode?(l(),u("div",bn,[i("div",yn,r(e.$t("Click Duration")),1),i("div",Vn,[d(c,{label:"",prop:`formOut[${p}].click_interval`,rules:[{...M,v:o.click_interval,click_mode:o.click_mode}]},{default:n((()=>[d(h,{modelValue:o.click_interval,"onUpdate:modelValue":e=>o.click_interval=e,modelModifiers:{number:!0},size:s(N),maxlength:4},null,8,["modelValue","onUpdate:modelValue","size"]),i("div",Tn,r(e.$t("100ms~3000ms")),1)])),_:2},1032,["prop","rules"])])])):v("",!0),o.output_mode&&o.click_mode?(l(),u("div",Sn,[i("div",Dn,r(e.$t("Click Duration")),1),i("div",kn,[d(c,{label:"",prop:`formOut[${p}].click_interval`,rules:[{...M,v:o.click_interval,click_mode:o.click_mode}]},{default:n((()=>[d(h,{modelValue:o.click_interval,"onUpdate:modelValue":e=>o.click_interval=e,modelModifiers:{number:!0},size:s(N),maxlength:4},null,8,["modelValue","onUpdate:modelValue","size"]),i("span",zn,r(e.$t("100ms~1000ms")),1)])),_:2},1032,["prop","rules"])])])):v("",!0)])):v("",!0)])))),128))])),_:1})])),_:1},8,["model"])])}}},Rn={class:"rcu-in-index"},Un={class:"rcu-switch-title"},xn={class:"engr-common-row in-cfg-row"},Cn={class:"engr-common-row-left"},An={class:"engr-common-row-right"},Ln={key:0},Mn={class:"engr-common-row in-cfg-row"},On={class:"engr-common-row-left"},Hn={class:"engr-common-row-right"},Nn={class:"engr-common-row in-cfg-row"},En={class:"engr-common-row-left"},Pn={class:"engr-common-row-right rcu-in-hidden-switch"},In={class:"engr-common-row in-cfg-row"},jn={class:"engr-common-row-left"},Yn={class:"engr-common-row-right"},Fn={key:0,class:"engr-common-row in-cfg-row"},Bn={class:"engr-common-row-left"},Gn={class:"engr-common-row-right"},Xn={key:1,class:"engr-common-row in-cfg-row"},qn={class:"engr-common-row-left"},Zn={class:"engr-common-row-right"},Kn={key:2,class:"engr-common-row in-cfg-row"},Qn={class:"engr-common-row-left"},Wn={class:"engr-common-row-right"},Jn={class:"engr-common-row in-cfg-row engr-rcu-in-right"},ei={class:"engr-common-row-left"},oi={class:"engr-common-row-right"},ai={class:"engr-common-row-right__span"},li={class:"engr-common-row in-cfg-row engr-rcu-in-right"},ti={class:"engr-common-row-left"},ni={class:"engr-common-row-right engr-in-select"},ii={class:"engr-common-row-right__span"},ri={class:"engr-common-row in-cfg-row"},si={class:"engr-common-row-left"},di={class:"engr-common-row-right"},ci={__name:"rcu-in",props:{obj:{type:Object,default:()=>{}},getAllFormData:{type:Object,default:()=>{}}},setup(a,{expose:c}){var m,w;const b=a;let k=j();const{t:$}=F(),R=e(null),U=o({confirmDialog:!1,changeType:"",changeObj:{}});let x=(null==(w=null==(m=b.obj.config)?void 0:m.Switch)?void 0:w.io_in)?o(B(b.obj.config.Switch.io_in)):[];const C=()=>{U.confirmDialog=!1},A=()=>{let e=0,o={};U.changeObj.link=0,x.forEach(((a,l)=>{a.index===U.changeObj.combination&&(e=l+1,o=a)})),o.hidden=!1,o.func="Switch",o.link=0,o.input_mode=0,o.device_name="input"+e,o.combination=0,U.changeObj.func=U.changeType,U.changeObj.combination=0,U.confirmDialog=!1},L={validator:(e,o,a)=>{const l="click_interval"===e.key;if(!(l?/^(500|[1-9]\d{0,1}|[1-4]\d{2})$/.test(e.v):/^(501|50[1-9]|5[1-9]\d|[6-9]\d{2}|[1-2]\d{3}|3000)$/.test(e.v)))return a($(l?"Please enter 1~500":"Please enter 501~3000"));a()},trigger:"change"},M={validator:(e,o,a)=>{var l,t;if(!e.v.device_name)return void a($("Enter Device Name"));if(K(e.v.device_name)>63)return void a($("Please enter a name no longer than 63 characters."));(null==(t=null==(l=null==k?void 0:k.devicesList)?void 0:l.filter)?void 0:t.call(l,(o=>o.device_id!==e.v.device_id))).find((o=>o.name===e.v.device_name));return b.getAllFormData.allName.filter((o=>o===e.v.device_name)).length,a()},trigger:"change"},O=D((()=>({inputTypeOptions:[{label:$("Switch"),value:"Switch"},{label:$("DoorMagnet"),value:"Door"},{label:$("Smoke"),value:"Smoke"},{label:$("Gas"),value:"Gas"},{label:$("Urgency"),value:"Safety"},{label:$("Flood"),value:"Moisture"},{label:$("Doorbell"),value:"Doorbell"},{label:$("Shade-open"),value:"Shade-open"},{label:$("Shade-close"),value:"Shade-close"}],inputModeOptions:[{label:$("Logic Level"),value:0},{label:$("Pulse"),value:1}],controlModeOptions:[{label:$("Voltage Control"),value:0},{label:$("State Toggle"),value:1}]}))),H=(e,o,a="")=>{"inputMode"===a&&"Switch"===o.func&&0===o.input_mode&&(o.control_mode=0),J(o)},E=e=>{if(e.link&&[0,1,2].includes(e.link_action))return[e.link,e.link_action];return[e.link?e.link:0]},P=e=>ae(e),I=e=>{const o=x.map(((e,o)=>({...e,value:e.index,label:$("InputN",{N:o+1})})));return o.push({value:0,label:$("empty")}),o.filter((o=>o.device_id!==e.device_id&&!(null==o?void 0:o.combination)||e.combination===o.index))},Y={validator:(e,o,a)=>{var l;return(null==(l=e.v)?void 0:l.combination)?a():a($("Please select another shade control Input."))},trigger:"change"},G=["Shade-open","Shade-close"],q=e=>G.includes(e.func),Z=["Shade-open","Shade-close","Switch"],Q=e=>Z.includes(e.func),W=e=>"Switch"===e.func&&0===e.input_mode,J=e=>{var o,a;if(!e.combination)return;const l=x.find((o=>o.index===e.combination));l.enable=e.enable,l.device_name=e.device_name,l.hidden=e.hidden,l.input_mode=e.input_mode,l.link=e.link,l.combination=e.index,l.click_interval=e.click_interval,l.long_click_interval=e.long_click_interval;if(0!==l.link){const t=((null==(a=null==(o=b.getAllFormData)?void 0:o.allData)?void 0:a.switch)||[]).find((o=>o.index===e.link));l.link=t.combination}l.func={"Shade-open":"Shade-close","Shade-close":"Shade-open"}[e.func]},ee=e=>0!==e.combination,oe=["Shade-open","Shade-close","Switch"],ae=e=>{var o,a,l,t;const n=(null==(a=null==(o=b.getAllFormData)?void 0:o.allData)?void 0:a.switch)||[],i=(null==(t=null==(l=b.getAllFormData)?void 0:l.allData)?void 0:t.io_out)||[],r=[...n.filter((e=>e.enable)),...i.filter((e=>e.enable))],s=["Switch","Light","Fan","Heating","Cooling","Plug","TV","Dnd","Clean","Bell","Light","Lock"],d={Switch:s,"Shade-open":["Shade-open","Shade-close"],"Shade-close":["Shade-open","Shade-close"],Door:s,Smoke:s,Gas:s,Safety:s,Moisture:s,Doorbell:s}[e.func];return r.filter((e=>d.includes(e.func))).map((o=>({value:o.index,label:o.device_name,children:oe.includes(e.func)?[]:[{value:0,label:$("Turn on")},{value:1,label:$("Turn off")},{value:2,label:$("Toggle")}]}))).concat({value:0,label:$("empty")})},le=e=>e.input_mode&&oe.includes(e.func);return c({isPass:async()=>{let e=!1;return await R.value.validate((async o=>{e=o})),e},getFormData:()=>x}),(e,o)=>{const a=T,c=_,m=p,w=y,b=V,D=h,k=z,$=S;return l(),u("div",Rn,[i("div",Un,r(e.$t("Digital Input")),1),d($,{ref_key:"ruleFormRef",ref:R,model:s(x),class:"in-cfg-form"},{default:n((()=>[d(k,{class:"rcu-relay-card"},{default:n((()=>[(l(!0),u(g,null,f(s(x),((o,h)=>(l(),u("div",{key:o.index+"out",class:"in-part"},[i("div",xn,[i("div",Cn,r(e.$t("Enable Input")+(h+1)),1),i("div",An,[d(c,{label:""},{default:n((()=>[d(a,{modelValue:o.enable,"onUpdate:modelValue":e=>o.enable=e,size:s(N),onChange:e=>H(0,o)},null,8,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1024)])]),o.enable?(l(),u("div",Ln,[i("div",Mn,[i("div",On,r(e.$t("Input Name")),1),i("div",Hn,[d(c,{label:"",prop:`formIn[${h}].device_name`,rules:[{...M,v:o}]},{default:n((()=>[d(m,{modelValue:o.device_name,"onUpdate:modelValue":e=>o.device_name=e,size:s(N),maxlength:63,onChange:e=>H(0,o)},null,8,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1032,["prop","rules"])])]),i("div",Nn,[i("div",En,r(e.$t("Hide in device page")),1),i("div",Pn,[d(c,{label:""},{default:n((()=>[d(a,{modelValue:o.hidden,"onUpdate:modelValue":e=>o.hidden=e,size:s(N),disabled:ee(o)},null,8,["modelValue","onUpdate:modelValue","size","disabled"])])),_:2},1024)])]),i("div",In,[i("div",jn,r(e.$t("Input Type")),1),i("div",Yn,[d(c,{label:""},{default:n((()=>[d(b,{"model-value":o.func,size:s(N),class:"device-select-raly",placeholder:"",onChange:e=>((e,o)=>{o.combination&&"0"!==o.combination?(U.changeType=e,U.changeObj=o,U.confirmDialog=!0):(o.link=0,o.func=e),"Switch"===o.func&&0===o.input_mode&&(o.control_mode=0)})(e,o)},{default:n((()=>[(l(!0),u(g,null,f(O.value.inputTypeOptions,(e=>(l(),t(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["model-value","size","onChange"])])),_:2},1024)])]),q(o)?(l(),u("div",Fn,[i("div",Bn,r(e.$t("Combination Input")),1),i("div",Gn,[d(c,{label:"",prop:`formIn[${h}].combination`,rules:[{...Y,v:o}]},{default:n((()=>[d(b,{modelValue:o.combination,"onUpdate:modelValue":e=>o.combination=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:"",onChange:e=>((e,o)=>{0!==o.combination&&(o.hidden=!0,J(o))})(0,o)},{default:n((()=>[(l(!0),u(g,null,f(I(o),(e=>(l(),t(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1032,["prop","rules"])])])):v("",!0),Q(o)?(l(),u("div",Xn,[i("div",qn,r(e.$t("Input Mode")),1),i("div",Zn,[d(c,{label:""},{default:n((()=>[d(b,{modelValue:o.input_mode,"onUpdate:modelValue":e=>o.input_mode=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:"",onChange:e=>H(0,o,"inputMode")},{default:n((()=>[(l(!0),u(g,null,f(O.value.inputModeOptions,(e=>(l(),t(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size","onChange"])])),_:2},1024)])])):v("",!0),W(o)?(l(),u("div",Kn,[i("div",Qn,r(e.$t("Control Mode")),1),i("div",Wn,[d(c,{label:""},{default:n((()=>[d(b,{modelValue:o.control_mode,"onUpdate:modelValue":e=>o.control_mode=e,modelModifiers:{number:!0},size:s(N),class:"device-select-raly",placeholder:""},{default:n((()=>[(l(!0),u(g,null,f(O.value.controlModeOptions,(e=>(l(),t(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","size"])])),_:2},1024)])])):v("",!0),le(o)?(l(),u(g,{key:3},[i("div",Jn,[i("div",ei,r(e.$t("Click Duration")),1),i("div",oi,[d(c,{label:"",prop:`formIn[${h}].click_interval`,rules:[{...L,v:o.click_interval,key:"click_interval"}]},{default:n((()=>[d(m,{modelValue:o.click_interval,"onUpdate:modelValue":e=>o.click_interval=e,modelModifiers:{number:!0},size:s(N),maxlength:3,onChange:e=>H(0,o)},null,8,["modelValue","onUpdate:modelValue","size","onChange"]),i("div",ai,r(e.$t("1~500ms")),1)])),_:2},1032,["prop","rules"])])]),i("div",li,[i("div",ti,r(e.$t("Long Click Duration")),1),i("div",ni,[d(c,{label:"",prop:`formIn[${h}].long_click_interval`,rules:[{...L,v:o.long_click_interval,key:"long_click_interval"}]},{default:n((()=>[d(m,{modelValue:o.long_click_interval,"onUpdate:modelValue":e=>o.long_click_interval=e,modelModifiers:{number:!0},size:s(N),maxlength:4,onChange:e=>H(0,o)},null,8,["modelValue","onUpdate:modelValue","size","onChange"]),i("div",ii,r(e.$t("501~3000ms")),1)])),_:2},1032,["prop","rules"])])])],64)):v("",!0),i("div",ri,[i("div",si,r(e.$t("Link Relay/Output")),1),i("div",di,[d(c,{label:""},{default:n((()=>[d(D,{class:"device-select-raly","model-value":E(o),options:P(o),onChange:e=>((e,o)=>{o.link=e[0],2===e.length?o.link_action=e[1]:o.link_action=-1,J(o)})(e,o)},null,8,["model-value","options","onChange"])])),_:2},1024)])])])):v("",!0)])))),128))])),_:1})])),_:1},8,["model"]),d(X,{show:U.confirmDialog,"onUpdate:show":o[0]||(o[0]=e=>U.confirmDialog=e),class:"in-confirm-dialog","button-cancel-show":!0,onButtonCancel:C,onButtonConfirm:A},{content:n((()=>[i("div",null,r(e.$t("Changing the inPut type will make the associated functions unavailable. Confirm the change?")),1)])),_:1},8,["show"])])}}},mi={class:"rcu-switch-dia"},ui={key:0,class:"rcu-switch-box"},gi={class:"rcu-switch-title-center"},fi={class:"rcu-switch-title"},vi={class:"rcu-switch-title"},hi={class:"switch-setting-box"},pi={__name:"rcu-switch-dia",props:{show:{type:Boolean,required:!0,default:!1},obj:{type:Object,default:()=>({})}},emits:["update:show","refresh"],setup(t,{emit:s}){const c=t;W();let m=j(),g=Y();a((()=>c.show),(e=>{e?b():h.diaShow=!1}));const{t:f}=F(),h=o({diaShow:!1,name:"",Address:"",recevieData:{},isShowNameRe:!1}),p=e(null),_=e(null),w=e(null),b=()=>{h.diaShow=!0},y=()=>{s("update:show",!1)},V=D((()=>{if(p.value&&_.value&&w.value){const e=p.value.getFormData(),o=_.value.getFormData(),a=w.value.getFormData(),l={switch:e,io_out:o,io_in:a},t=e.map((e=>e.device_name)),n=o.map((e=>e.device_name)),i=a.map((e=>e.device_name));return{allData:l,allName:t.concat(n).concat(i).filter((e=>e))}}return{}})),T=()=>{h.isShowNameRe=!1},S=()=>{h.isShowNameRe=!1,z()},k=async()=>{const e=await p.value.isPass();let o=p.value.getFormData();const a=await _.value.isPass(),l=_.value.getFormData(),t=await w.value.isPass(),n=w.value.getFormData();if(!e||!a||!t)return;o=(e=>{if(!Array.isArray(e)||!e.length)return[];const o=e.filter((e=>e.enable)),a=new Set;return o.filter((e=>!(a.has(e.device_name)&&0!==e.combination||(0!==e.combination&&a.add(e.device_name),0))))})(o);const i=[...o,...l,...n].filter((e=>e.enable)),r=(e=>{if(!Array.isArray(e)||!e.length)return!1;const o=new Set;for(const a of e)if(a.device_name){if(o.has(a.device_name))return!0;o.add(a.device_name)}return!1})(i);if(r)return void(h.isShowNameRe=!0);((e,o)=>{if(!(Array.isArray(e)&&Array.isArray(o)&&e.length&&o.length))return!1;const a=new Set;for(const l of e)l.device_name&&a.add(l.device_name);for(const l of o)if(l.name&&a.has(l.name))return!0;return!1})(i,((e,o)=>{if(!(Array.isArray(e)&&Array.isArray(o)&&e.length&&o.length))return o;const a=new Set(e.map((e=>e.device_id)));return o.filter((e=>!a.has(e.device_id)))})(i,null==m?void 0:m.devicesList))?h.isShowNameRe=!0:z()},z=async()=>{var e;const o=await p.value.isPass(),a=p.value.getFormData(),l=await _.value.isPass(),t=_.value.getFormData(),n=await w.value.isPass(),i=w.value.getFormData();if(!o||!l||!n)return;h.recevieData[g.wId]=e=>{if(!e.success)return q(f("errorMessage"),"error");s("update:show",!1),s("refresh"),q(f("success"))};const r={Switch:{switch:a,io_out:t,io_in:i}},d={type:"ak_modbus/device/set",id:g.wId++,...c.obj,config:r};null==(e=g.ws)||e.send(Z(d))};return a((()=>g.updataId),(e=>{G(h.recevieData,e,g)}),{immediate:!0}),(e,o)=>(l(),u("div",mi,[d(X,{show:h.diaShow,"onUpdate:show":o[0]||(o[0]=e=>h.diaShow=e),"back-show":!1,"foot-show":!0,class:"rcu-switch-dia-sw",title:e.$t("Configuration"),onButtonCancel:y,onButtonConfirm:k},{content:n((()=>{var o,a;return[h.diaShow?(l(),u("div",ui,[i("div",gi,r(e.$t("Device Version: XXXX",{version:(null==(o=c.obj)?void 0:o.version)||"--"})),1),i("div",fi,r((c.obj.name||"--")+" "+e.$t("Configuration")),1),i("div",vi,r(e.$t("Device")+" "+e.$t("Address")+":"+(null==(a=c.obj)?void 0:a.device_addr)||"--"),1),i("div",hi,[d(Bt,{ref_key:"refRcuRelay",ref:p,obj:c.obj,"get-all-form-data":V.value},null,8,["obj","get-all-form-data"]),d($n,{ref_key:"refRcuOut",ref:_,obj:c.obj,"get-all-form-data":V.value},null,8,["obj","get-all-form-data"]),d(ci,{ref_key:"refRcuIn",ref:w,obj:c.obj,"get-all-form-data":V.value},null,8,["obj","get-all-form-data"])])])):v("",!0)]})),_:1},8,["show","title"]),d(X,{show:h.isShowNameRe,"onUpdate:show":o[1]||(o[1]=e=>h.isShowNameRe=e),class:"tip-dia-re-sw","button-cancel-show":!0,"button-ok-name":e.$t("Confirm"),onButtonCancel:T,onButtonConfirm:S},{content:n((()=>[i("div",null,r(e.$t("The name already exists. Continue?")),1)])),_:1},8,["show","button-ok-name"])]))}},_i={class:"rs-485-box"},wi={class:"card-header"},bi={class:"engr-common-row"},yi={class:"engr-common-row-left"},Vi={class:"engr-common-row-right"},Ti={class:"engr-common-row"},Si={class:"engr-common-row-left"},Di={class:"engr-common-row-right"},ki={class:"engr-common-row"},zi={class:"engr-common-row-left"},$i={class:"engr-common-row-right"},Ri={class:"engr-common-row"},Ui={class:"engr-common-row-left"},xi={class:"engr-common-row-right"},Ci={class:"engr-common-row"},Ai={class:"engr-common-row-left"},Li={class:"engr-common-row-right"},Mi={class:"engr-common-row"},Oi={class:"engr-common-row-left"},Hi={class:"engr-common-row-right"},Ni={class:"engr-common-row"},Ei={class:"engr-common-row-left"},Pi={class:"engr-common-row-right"},Ii={class:"card-header"},ji={class:"rs-delete-box"},Yi={__name:"rs-485",setup(m,{expose:h}){j();const{t:w}=F(),b=e(null),L=o({enable:!1,mobusCfgShow:!1,rcuSwitchShow:!1,obj:{},protocol:"Modbus",connection:"RTU",baud:9600,parity:"NO",data:8,stop:"1",addDeviceDialog:!1,deleteDeviceDialog:!1,showType:"",isShowNameRe:!1}),M=o({handleType:"",device_id:"",title:w("Add device"),name:"",device_type:"",device_addr:"",rules:{name:[{validator:(e,o,a)=>o?a():a(w("Enter Device Name")),trigger:["change","blur"]}],device_addr:[{validator:(e,o,a)=>{if(!o)return a(w("Please enter a valid address."));if(!Number.isInteger(Number(o)))return a(w("Please enter a valid address."));if(0>=Number(o)||Number(o)>247)return a(w("Please enter a valid address."));if("0"===o[0]&&o.length>1)return a(w("Please enter a valid address."));let l=O.value;M.device_id&&(l=l.filter((e=>e.device_id!==M.device_id)));return l.some((e=>Number(e.device_addr)===Number(o)))?a(w("nameAlready",{name:w("Address")})):a()},trigger:["change","blur"]}]}}),O=e([]),H=D((()=>({connectionArray:[{label:w("RTU"),value:"RTU"},{label:w("akubela"),value:"akubela"}],baudArray:[300,600,1200,2400,4800,9600,19200,38400,57600,76800,115200,230400],parityArray:[{label:w("None"),value:"NO"},{label:w("ODD"),value:"ODD"},{label:w("EVEN"),value:"EVEN"}],dataArray:[7,8],stopArray:["1","1.5","2"],deviceTypeArray:[{label:w("switch actuator")}],connectTypeArray:[w("RS485")]})));k((()=>{P(!0)}));const P=e=>{if(e){const e=e=>{L.enable=e.enable,L.protocol=e.protocol,L.connection=e.connection,L.baud=e.baud,L.parity=e.parity,L.data=e.data,L.stop=e.stop};E.getrs485Config(e)}I()},I=()=>{E.get485DeviceTable((e=>{O.value=e}))},Y={akubela:w("switch actuator"),RTU:w("Thermostat")},G={akubela:"Switch",RTU:"Thermostat"},q={Switch:w("switch actuator"),Thermostat:w("Thermostat")},Z=()=>{M.handleType="0",M.device_id="",M.name="",M.device_addr="",M.title=w("Add device"),L.showType=(null==Y?void 0:Y[L.connection])||"",M.device_type=(null==G?void 0:G[L.connection])||"",L.addDeviceDialog=!0},K=()=>{L.deleteDeviceDialog=!1},Q=()=>{L.addDeviceDialog=!1},W=()=>{L.isShowNameRe=!1},ee=()=>{L.isShowNameRe=!1,te()},le=()=>{var e,o,a,l,t;M.name=null==(e=M.name)?void 0:e.replace(J.regSpace,"");(null==(t=null==(l=null==(a=null==(o=O.value)?void 0:o.filter)?void 0:a.call(o,(e=>e.device_id!==M.device_id)))?void 0:l.some)?void 0:t.call(l,(e=>e.name===M.name)))?L.isShowNameRe=!0:te()},te=()=>{b.value.validate((e=>{if(e){const e={name:M.name,device_type:M.device_type,device_addr:Number(M.device_addr)},o=e=>{I(),Q()};"0"===M.handleType?E.add485Device(e,o):(e.device_id=M.device_id,e.config=M.config,E.edit485Device(e,o))}}))},ne=()=>{const e={device_ids:[M.device_id]};E.delete485Device(e,(e=>{I(),K()}))};return a((()=>L.mobusCfgShow),(e=>{e||I()})),h({submit:()=>{E.setRs485Config(L,P)}}),(e,o)=>{const a=T,m=y,h=V,D=z,k=x,E=C,I=A,j=p,Y=_,F=S;return l(),u("div",_i,[d(D,null,{header:n((()=>[i("div",wi,[i("span",null,r(e.$t("RS485 Configuration")),1)])])),default:n((()=>[i("div",bi,[i("div",yi,r(e.$t("RS485 enable")),1),i("div",Vi,[d(a,{modelValue:L.enable,"onUpdate:modelValue":o[0]||(o[0]=e=>L.enable=e),size:s(N)},null,8,["modelValue","size"])])]),L.enable?(l(),u(g,{key:0},[i("div",Ti,[i("div",Si,r(e.$t("Protocol Type")),1),i("div",Di,r(L.protocol),1)]),i("div",ki,[i("div",zi,r(e.$t("Connection Type")),1),i("div",$i,[d(h,{modelValue:L.connection,"onUpdate:modelValue":o[1]||(o[1]=e=>L.connection=e),size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(H.value.connectionArray,(e=>(l(),t(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])]),i("div",Ri,[i("div",Ui,r(e.$t("Baud Rate")),1),i("div",xi,[d(h,{modelValue:L.baud,"onUpdate:modelValue":o[2]||(o[2]=e=>L.baud=e),size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(H.value.baudArray,(e=>(l(),t(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])]),i("div",Ci,[i("div",Ai,r(e.$t("Parity")),1),i("div",Li,[d(h,{modelValue:L.parity,"onUpdate:modelValue":o[3]||(o[3]=e=>L.parity=e),size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(H.value.parityArray,(e=>(l(),t(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])]),i("div",Mi,[i("div",Oi,r(e.$t("Data Message")),1),i("div",Hi,[d(h,{modelValue:L.data,"onUpdate:modelValue":o[4]||(o[4]=e=>L.data=e),size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(H.value.dataArray,(e=>(l(),t(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])]),i("div",Ni,[i("div",Ei,r(e.$t("Stop Bits")),1),i("div",Pi,[d(h,{modelValue:L.stop,"onUpdate:modelValue":o[5]||(o[5]=e=>L.stop=e),size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(H.value.stopArray,(e=>(l(),t(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])])],64)):v("",!0)])),_:1}),L.enable?(l(),t(D,{key:0},{header:n((()=>[i("div",Ii,[i("span",null,r(e.$t("RS485 Connected  Devices")),1),d(k,{class:"engr-submit-cancel rs485-add",type:"primary",size:s(N),icon:s($),onClick:Z},null,8,["size","icon"])])])),default:n((()=>[i("div",null,[d(I,{data:O.value,"header-cell-style":s(oe),"cell-style":s(ae),"max-height":"600",style:R({width:"calc(100vw - 270px)"}),"highlight-current-row":"","scrollbar-always-on":""},{default:n((()=>[d(E,{label:e.$t("Device Name")},{default:n((e=>[c(r(e.row.name),1)])),_:1},8,["label"]),d(E,{label:e.$t("Device Type"),width:"150"},{default:n((o=>{var a,l;return[c(r(e.$t(null!=(l=null==(a=null==o?void 0:o.row)?void 0:a.device_type)?l:"")),1)]})),_:1},8,["label"]),d(E,{label:e.$t("Address"),width:"100"},{default:n((e=>{var o;return[c(r(null==(o=e.row)?void 0:o.device_addr),1)]})),_:1},8,["label"]),d(E,{label:e.$t("Action"),width:"400"},{default:n((o=>[d(k,{size:s(N),class:"engr-submit-type-config",type:"primary",onClick:e=>(e=>{const o=e;L.showType=q[o.device_type],M.handleType="1",M.title=w("Edit device"),M.name=o.name,M.device_type=o.device_type,M.device_addr=o.device_addr,M.device_id=o.device_id,M.config=o.config,L.addDeviceDialog=!0})(o.row)},{default:n((()=>[c(r(e.$t("edit")),1)])),_:2},1032,["size","onClick"]),d(k,{size:s(N),class:"engr-submit-type-config",type:"primary",onClick:e=>{return a=o.row,L.obj=B(a),void{Thermostat:()=>{L.mobusCfgShow=!0},Switch:()=>{L.rcuSwitchShow=!0}}[a.device_type]();var a}},{default:n((()=>[c(r(e.$t("Configuration")),1)])),_:2},1032,["size","onClick"]),d(k,{size:s(N),class:"engr-submit-delete-485",type:"danger",onClick:e=>{return a=o.row,M.device_id=a.device_id,void(L.deleteDeviceDialog=!0);var a}},{default:n((()=>[c(r(e.$t("Delete")),1)])),_:2},1032,["size","onClick"])])),_:1},8,["label"])])),_:1},8,["data","header-cell-style","cell-style","style"])])])),_:1})):v("",!0),d(vt,{show:L.mobusCfgShow,"onUpdate:show":o[6]||(o[6]=e=>L.mobusCfgShow=e),obj:L.obj,onRefresh:P},null,8,["show","obj"]),d(pi,{show:L.rcuSwitchShow,"onUpdate:show":o[7]||(o[7]=e=>L.rcuSwitchShow=e),obj:L.obj,onRefresh:P},null,8,["show","obj"]),d(X,{show:L.addDeviceDialog,"onUpdate:show":o[11]||(o[11]=e=>L.addDeviceDialog=e),class:"rs-add-dialog","button-cancel-show":!0,"button-ok-name":e.$t("Done"),title:M.title,onButtonBack:Q,onButtonCancel:Q,onButtonConfirm:le},{content:n((()=>[i("div",null,[d(F,{ref_key:"ruleFormRef",ref:b,"label-width":"auto","label-position":"left",model:M,rules:M.rules,onSubmit:o[10]||(o[10]=U((()=>{}),["prevent"]))},{default:n((()=>[d(Y,{prop:"name",label:e.$t("Device Name")},{default:n((()=>[d(j,{modelValue:M.name,"onUpdate:modelValue":o[8]||(o[8]=e=>M.name=e),maxlength:63,size:s(N),placeholder:e.$t("Please enter")},null,8,["modelValue","size","placeholder"])])),_:1},8,["label"]),d(Y,{prop:"alias",label:e.$t("Device Type")},{default:n((()=>[c(r(L.showType)+" ",1)])),_:1},8,["label"]),d(Y,{prop:"device_addr",label:e.$t("Device Address")},{default:n((()=>[d(j,{modelValue:M.device_addr,"onUpdate:modelValue":o[9]||(o[9]=e=>M.device_addr=e),size:s(N),placeholder:"1~247"},null,8,["modelValue","size"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])])),_:1},8,["show","button-ok-name","title"]),d(X,{show:L.isShowNameRe,"onUpdate:show":o[12]||(o[12]=e=>L.isShowNameRe=e),class:"tip-dia-re","button-cancel-show":!0,"button-ok-name":e.$t("Confirm"),onButtonCancel:W,onButtonConfirm:ee},{content:n((()=>[i("div",null,r(e.$t("The name already exists. Continue?")),1)])),_:1},8,["show","button-ok-name"]),d(X,{show:L.deleteDeviceDialog,"onUpdate:show":o[13]||(o[13]=e=>L.deleteDeviceDialog=e),"button-cancel-show":!0,"button-ok-name":e.$t("Confirm"),onButtonCancel:K,onButtonConfirm:ne},{content:n((()=>[i("div",ji,r(e.$t("Are you sure about delete this device")),1)])),_:1},8,["show","button-ok-name"])])}}},Fi={class:"card-header"},Bi={class:"engr-common-row"},Gi={class:"engr-common-row-left"},Xi={class:"engr-common-row-right"},qi={class:"engr-common-row"},Zi={class:"engr-common-row-left"},Ki={class:"engr-common-row-right"},Qi={key:0,class:"engr-common-row"},Wi={class:"engr-common-row-left"},Ji={class:"engr-common-row-right"},er={class:"engr-common-row"},or={class:"engr-common-row-left"},ar={class:"engr-common-row-right tem-row-new"},lr=i("div",{class:"row-tem-unit"},"℃",-1),tr={class:"engr-common-row"},nr={class:"engr-common-row-left"},ir={class:"engr-common-row-right tem-row-new"},rr=i("div",{class:"row-tem-unit"},"℃",-1),sr={class:"engr-common-row"},dr={class:"engr-common-row-left"},cr={class:"engr-common-row-right"},mr={__name:"relay",setup(a,{expose:h}){W();ee().deviceModel,Y(),F(),e();const p=o({loading:!1,relayData:[{area_id:"",device_name:"",product_type:"",device_id:"",index:1,enabled:!0,type_list:["Switch","Light","Fan","Plug","TV","Dnd","Clean","Heating","Cooling"],entity_id:"",upper_hysteresis_value:4,lower_hysteresis_value:5,temperature_source:""}],temArray:[],temperaturSourceList:[]});k((()=>{for(let e=0;e<=5;e+=.5)p.temArray.push({value:e});_(0)}));const _=(e=1e3)=>{p.loading=!0,setTimeout((()=>{p.loading=!1}),6e3);const o=e=>{p.loading=!1,p.relayData=e};setTimeout((()=>{E.getAllRelayData(o);E.getTemperatureList((e=>{p.temperaturSourceList=e}))}),e)},S={"Shade-open":"Shade-close","Shade-close":"Shade-close",1:2,2:1},D=[];for(let e=1;e<=60;e++)D.push(e);const $=e=>{E.settingRelayObj(e)},R=e=>["Heating","Cooling"].includes(e.product_type),x=e=>["Door"].includes(e.product_type),C={Heating:"Cooling",Cooling:"Heating",1:2,2:1};return h({showRelay:()=>p.relayData.length}),(e,o)=>{const a=T,h=y,k=V,A=w,O=b,H=z,P=M;return p.relayData.length?L((l(),t(H,{key:0,"akubela-test":"engr-device-has_relay",class:"engr-device-index__relay"},{header:n((()=>[i("div",Fi,[i("span",null,r(e.$t("Relay")),1)])])),default:n((()=>[(l(!0),u(g,null,f(p.relayData,((o,w)=>(l(),u("div",{key:o.device_id},[i("div",Bi,[i("div",Gi,r(e.$t("Display Relay index",{index:w+1})),1),i("div",Xi,[d(a,{modelValue:o.enabled,"onUpdate:modelValue":e=>o.enabled=e,"akubela-test":`engr-device-Display-Relay${o.index}`,size:s(N),onClick:U((e=>(e=>{E.settingRelayObj({enabled:e.enabled,device_id:e.device_id,index:e.index},_)})(o)),["stop"])},null,8,["modelValue","onUpdate:modelValue","akubela-test","size","onClick"])])]),i("div",qi,[i("div",Zi,r(e.$t("Relay index Type",{index:w+1})),1),i("div",Ki,[d(k,{"model-value":o.product_type,"akubela-test":`engr-device-Relay${o.index}-select`,disabled:!o.enabled,size:s(N),onChange:e=>((e,o)=>{const a=e.product_type,l=o;S[l]&&(p.relayData.find((o=>o.index===S[e.index])).product_type=S[l]);S[a]&&(p.relayData.find((o=>o.index===S[e.index])).product_type="Switch");p.loading=!0,E.settingRelayType({device_id:e.device_id,index:e.index,type:l},_),e.product_type=l})(o,e)},{default:n((()=>[(l(!0),u(g,null,f(o.type_list,(a=>(l(),t(h,{key:a,"akubela-test":`engr-device-Relay${o.index}-option-${a===o.product_type}`,label:e.$t(a),value:a},null,8,["akubela-test","label","value"])))),128))])),_:2},1032,["model-value","akubela-test","disabled","size","onChange"])])]),x(o)?(l(),u("div",Qi,[i("div",Wi,r(e.$t("Unlock Time")),1),i("div",Ji,[d(k,{modelValue:o.unlock_time,"onUpdate:modelValue":e=>o.unlock_time=e,disabled:!o.enabled,size:s(N),filterable:"",onChange:e=>(e=>{E.closeUnlockTime(e)})(o)},{default:n((()=>[(l(),u(g,null,f(D,(o=>d(h,{key:o,label:e.$t(o),value:o},null,8,["label","value"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","size","onChange"])])])):v("",!0),R(o)?(l(),u(g,{key:1},[i("div",er,[i("div",or,[c(r(e.$t("Upper Hysteresis Value"))+" ",1),d(O,{class:"box-item",effect:"light",content:e.$t("tipShow"),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",ar,[d(k,{modelValue:o.upper_hysteresis_value,"onUpdate:modelValue":e=>o.upper_hysteresis_value=e,filterable:"",disabled:!o.enabled,size:s(N),onChange:e=>$(o)},{default:n((()=>[(l(!0),u(g,null,f(p.temArray,(e=>(l(),t(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","size","onChange"]),lr])]),i("div",tr,[i("div",nr,[c(r(e.$t("Lower Hysteresis Value"))+" ",1),d(O,{class:"box-item",effect:"light",content:e.$t("tipShow"),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",ir,[d(k,{modelValue:o.lower_hysteresis_value,"onUpdate:modelValue":e=>o.lower_hysteresis_value=e,filterable:"",disabled:!o.enabled,size:s(N),onChange:e=>$(o)},{default:n((()=>[(l(!0),u(g,null,f(p.temArray,(e=>(l(),t(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","size","onChange"]),rr])]),i("div",sr,[i("div",dr,r(e.$t("Temperature source")),1),i("div",cr,[d(k,{modelValue:o.temperature_source,"onUpdate:modelValue":e=>o.temperature_source=e,filterable:"",disabled:!o.enabled,size:s(N),placeholder:e.$t("Please enter"),onChange:e=>(e=>{if(2===p.relayData.length){const o=p.relayData.find((o=>o.index===C[e.index]));o.product_type===C[e.product_type]&&(o.temperature_source=e.temperature_source)}E.settingRelayObj(e)})(o)},{default:n((()=>[(l(!0),u(g,null,f(p.temperaturSourceList,((e,o)=>(l(),t(h,{key:o,label:e.name,value:e.device_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","size","placeholder","onChange"])])])],64)):v("",!0)])))),128))])),_:1})),[[P,p.loading]]):v("",!0)}}},ur={class:"engr-device-index"},gr={class:"card-header"},fr={class:"engr-common-row"},vr={class:"engr-common-row-left"},hr={class:"engr-common-row-right"},pr={class:"engr-common-row"},_r={class:"engr-common-row-left"},wr={class:"engr-common-row-right"},br={key:0,class:"engr-common-row"},yr={class:"engr-common-row-left"},Vr={class:"engr-common-row-right"},Tr={key:1,class:"engr-common-row"},Sr={class:"engr-common-row-left"},Dr={class:"engr-common-row-right"},kr={class:"card-header"},zr={class:"engr-common-row"},$r={class:"engr-common-row-left"},Rr={class:"engr-common-row-right"},Ur={class:"card-header"},xr={class:"engr-common-row"},Cr={class:"engr-common-row-left"},Ar={class:"engr-common-row-right"},Lr={class:"engr-common-row"},Mr={class:"engr-common-row-left"},Or={class:"engr-common-row-right"},Hr={class:"card-header"},Nr={key:0,class:"engr-common-row"},Er={class:"engr-common-row-left"},Pr={class:"engr-common-row-right"},Ir={key:1,class:"engr-common-row"},jr={class:"engr-common-row-left"},Yr={class:"engr-common-row-right"},Fr={class:"engr-common-row"},Br={class:"engr-common-row-left"},Gr={class:"engr-common-row-right"},Xr={key:2,class:"engr-common-title"},qr={key:3,class:"engr-common-row"},Zr={class:"engr-common-row-left"},Kr={class:"engr-common-row-right"},Qr={key:4,class:"engr-common-row"},Wr={class:"engr-common-row-left"},Jr={class:"engr-common-row-right"},es={key:5,class:"engr-common-title"},os={key:6,class:"engr-common-row"},as={class:"engr-common-row-left"},ls={class:"engr-common-row-right"},ts={key:7,class:"engr-common-row"},ns={class:"engr-common-row-left"},is={class:"engr-common-row-right"},rs={class:"card-header"},ss={class:"engr-common-row"},ds={class:"engr-common-row-left"},cs={class:"engr-common-row-right"},ms={class:"engr-common-row"},us={class:"engr-common-row-left"},gs={class:"engr-common-row-right"},fs={__name:"index",setup(h){const $=W(),R=ee(),x=R.deviceModel;let C=Y();const{t:A}=F(),j=e(null),B=e(),X=o({fanValue:!1,configData:{"features.DND.ReturnCode":"","Settings.MOTION.ProximitySensor":!0,"Settings.MOTION.ProximityDetectionDistance":1,"Settings.RELAY1.Type":"Switch","Settings.RELAY1.UpperHysteresisValue":"","Settings.RELAY1.LowerHysteresisValue":"","Settings.RELAY1.TemperatureSource":"","Settings.RELAY2.Type":"Switch","Settings.RELAY2.UpperHysteresisValue":"","Settings.RELAY2.LowerHysteresisValue":"","Settings.RELAY2.TemperatureSource":"","Settings.Thermostat.Cooling":"0","Settings.Thermostat.Heating":"0","Settings.Thermostat.Ventilation":"0",tem_offset:"0",hum_offset:"0"},configRelayType:{},send_cmd:!1,url:"",show485:!1,allowList:"",returnCodeArr:[{value:"404",label:A("Not found")},{value:"480",label:A("Temporarily Unavailable")},{value:"486",label:A("Busy Here")},{value:"603",label:A("Decline")}],relay1status:!0,relay1_device_id:"",index1:"",relay2status:!0,relay2_device_id:"",index2:"",ProximityDetectionDistanceArr:[{value:"0",label:A("Short Distance")},{value:"1",label:A("Long Distance")}],ProximityDetectionDistanceArrX1:[{value:"0",label:A("Short Distance")},{value:"2",label:A("Middle Distance")},{value:"1",label:A("Long Distance")}],relayList:["Switch","Light","Fan","Shade-open","Shade-close","Heating","Cooling"],zoneTypeList:[{label:A("Infrared"),value:1},{label:A("DoorMagnet"),value:3},{label:A("Smoke"),value:5},{label:A("Gas"),value:4},{label:A("Urgency"),value:6},{label:A("Flood"),value:2},{label:A("Doorbell"),value:7},{label:A("Switch"),value:8}],temperaturSourceList:[],zoneList:[],loading:!1,recevieData:{},allRelayList:[],baseModel:""}),K=e(null),oe=["KS41","PS51","PS51V2","RT61","PG71","PG71N","PH81","PHX1","PS52","PS52V2","PS52N"];D((()=>{if(ze.value)return!0;const e="PG71"===R.deviceModel,o=[78,79,16,18].includes(X.baseModel);return e&&o}));const ae=(e,o,a)=>{const l="01"===o||"02"===o||"03"===o||"04"===o||"05"===o||"0."===o||"1."===o||"2."===o||"3."===o||"4."===o||"5."===o,t=+o;return o.length>3||""===o||l||isNaN(t)||!J.regNum0To5.test(t)?a(A("Please enter a valid number.")):a()},le=(e,o,a)=>o?a():a(A("Please select temperature source")),te=(e,o,a)=>{(X.relay2status||ze.value)&&ae(0,o,a),a()},ne=(e,o,a)=>{(X.relay1status||ze.value)&&ae(0,o,a),a()},ie=(e,o,a)=>(e=>{if(!Q(e))return!0;if(e.includes("+"))return!0;const o=e.split(".");if(o.length>1&&o[1].length>1)return!0;if(o.length>1&&""===o[1])return!0;for(let a=0;a<e.length;a++){const o=e[a];if(a+1<e.length&&"0"===o&&"."!==e[a+1])return!0}return e>10||(e<-10||""===e)})(o)?a(A("Please enter a valid number.")):a(),re=o({"Settings.RELAY2.TemperatureSource":[{validator:(e,o,a)=>{(X.relay2status||ze.value)&&le(0,o,a),a()},trigger:"change"}],"Settings.RELAY2.UpperHysteresisValue":[{validator:te,trigger:["blur","change"]}],"Settings.RELAY2.LowerHysteresisValue":[{validator:te,trigger:["blur","change"]}],"Settings.RELAY1.TemperatureSource":[{validator:(e,o,a)=>{(X.relay1status||ze.value)&&le(0,o,a),a()},trigger:"change"}],"Settings.RELAY1.UpperHysteresisValue":[{validator:ne,trigger:"blur"}],"Settings.RELAY1.LowerHysteresisValue":[{validator:ne,trigger:"blur"}],heatingCoolingVentilation:[{validator:(e,o,a)=>X.configData["Settings.Thermostat.Heating"]||X.configData["Settings.Thermostat.Cooling"]||X.configData["Settings.Thermostat.Ventilation"]?a():a(A("Please select mode")),trigger:"change"}],tem_offset:[{validator:ie,trigger:"blur"}],hum_offset:[{validator:ie,trigger:"blur"}]}),se=()=>{var e;X.recevieData[C.wId]=e=>{var o;if(!e.success)return q(A("errorMessage"),"error");if(X.send_cmd=!!e.result.send_cmd,X.url=e.result.url,!X.url&&$.getGuoNei){X.recevieData[C.wId]=e=>{X.url=e.result.url};const e={type:"ak_api/config/get",config_type:"api_server_info",id:C.wId++};null==(o=C.ws)||o.send(Z(e))}};const o={type:"ak_api/config/get",config_type:"motion",id:C.wId++};null==(e=C.ws)||e.send(Z(o))},de=()=>{var e;X.recevieData[C.wId]=e=>{if(!e.success)return q(A("errorMessage"),"error");X.allowList=e.result.list+""};const o={type:"ak_api/config/get",config_type:"api_white_list",id:C.wId++};null==(e=C.ws)||e.send(Z(o))},ce=e=>{if(setTimeout((()=>{X.loading=!1}),1e3),!e.success)return q(A("errorMessage"),"error");(null==e?void 0:e.result)&&(null==e?void 0:e.result.length)&&(e.result.length<=2?e.result.forEach((e=>{1===e.index?(X.relayList=e.type_list,X.configData["Settings.RELAY1.Type"]=e.product_type,X.relay1status=e.enabled,X.relay1_device_id=e.device_id,X.index1=e.index):2===e.index&&(X.relayList=e.type_list,X.configData["Settings.RELAY2.Type"]=e.product_type,X.relay2status=e.enabled,X.relay2_device_id=e.device_id,X.index2=e.index)})):(X.allRelayList=e.result,e.result.forEach((e=>{X.configRelayType[`Settings.RELAY${e.index}.Type`]=e.product_type,X[`relay${e.index}status`]=e.enabled,X[`relay${e.index}_device_id`]=e.device_id,X[`index${e.index}`]=e.index}))))},me=e=>{var o;if(!ke.value)return;"no_loading"!==e&&(X.loading=!0,setTimeout((()=>{X.loading=!1}),15e3)),X.recevieData[C.wId]=ue;const a={type:"device/zone_info",id:C.wId++};null==(o=C.ws)||o.send(Z(a))},ue=e=>{if(X.loading=!1,!e.success)return q(A("errorMessage"),"error");X.zoneList=e.result},ge=e=>{var o;X.recevieData[C.wId]=fe;const a={type:"device/zone_set",enabled:e.enabled,device_id:e.device_id,mode:e.mode,id:C.wId++};null==(o=C.ws)||o.send(Z(a))},fe=e=>{if(me(),!e.success)return q(A("errorMessage"),"error")},ve=()=>{be(),se(),de()},he=async()=>{B.value.validate((async e=>{e&&(ye(),(()=>{var e;X.recevieData[C.wId]=e=>{if(!e.success)return q(A("errorMessage"),"error")};const o={type:"ak_api/config/set",config_type:"motion",param:{send_cmd:X.send_cmd,url:X.url},id:C.wId++};null==(e=C.ws)||e.send(Z(o))})(),(()=>{var e,o;X.recevieData[C.wId]=e=>{if(!e.success)return q(A("errorMessage"),"error")};const a={type:"ak_api/config/set",config_type:"api_white_list",param:{list:null==(e=X.allowList)?void 0:e.split(",")},id:C.wId++};null==(o=C.ws)||o.send(Z(a))})(),X.show485&&j.value.submit(),ze.value&&we())}))},pe=()=>{};k((()=>{(()=>{var e;X.recevieData[C.wId]=e=>{if(!e.success)return q(A("errorMessage"),"error");const o=e.result;X.configData.tem_offset=(null==o?void 0:o.tem_offset)||0,X.configData.hum_offset=(null==o?void 0:o.hum_offset)||0};const o={type:"ak_device/attr/get",device_id:R.selfDeviceId,item:["tem_offset","hum_offset"],id:C.wId++};null==(e=C.ws)||e.send(Z(o))})(),Ve(),be(),se(),de(),_e()}));const _e=()=>{var e;X.recevieData[C.wId]=e=>{if(!e.success)return q(A("errorMessage"),"error");X.show485=e.result.support};const o={type:"feature/support",feature:"rs485",id:C.wId++};null==(e=C.ws)||e.send(Z(o))},we=()=>{E.setThermostatConfig({fan_follow:X.fanValue,device_id:X.selefDevice})},be=e=>{var o;X.recevieData[C.wId]=o=>{if(!o.success)return q(A("errorMessage"),"error");X.baseModel=Number(o.result["status.base_module.type"]),ze.value&&E.getThermostatConfig((e=>{X.fanValue=e.fan_follow,X.selefDevice=e.device_id})),me(e),X.configData["features.DND.ReturnCode"]=o.result["features.DND.ReturnCode"],X.configData["Settings.MOTION.ProximitySensor"]="1"===o.result["Settings.MOTION.ProximitySensor"],X.configData["Settings.MOTION.ProximityDetectionDistance"]=o.result["Settings.MOTION.ProximityDetectionDistance"],X.configData["Settings.RELAY1.TemperatureSource"]=o.result["Settings.RELAY1.TemperatureSource"],X.configData["Settings.RELAY1.UpperHysteresisValue"]=o.result["Settings.RELAY1.UpperHysteresisValue"],X.configData["Settings.RELAY1.LowerHysteresisValue"]=o.result["Settings.RELAY1.LowerHysteresisValue"],X.configData["Settings.RELAY2.UpperHysteresisValue"]=o.result["Settings.RELAY2.UpperHysteresisValue"],X.configData["Settings.RELAY2.LowerHysteresisValue"]=o.result["Settings.RELAY2.LowerHysteresisValue"],ze.value&&(X.configData["Settings.Thermostat.Cooling"]="1"===o.result["Settings.Thermostat.Cooling"],X.configData["Settings.Thermostat.Heating"]="1"===o.result["Settings.Thermostat.Heating"],X.configData["Settings.Thermostat.Ventilation"]="1"===o.result["Settings.Thermostat.Ventilation"])};const a={type:"ak_config/get",id:C.wId++,item:["features.DND.ReturnCode","Settings.MOTION.ProximitySensor","Settings.MOTION.ProximityDetectionDistance","status.base_module.type","Settings.Thermostat.Heating","Settings.Thermostat.Cooling","Settings.Thermostat.Ventilation","Settings.RELAY1.Type","Settings.RELAY1.UpperHysteresisValue","Settings.RELAY1.LowerHysteresisValue","Settings.RELAY1.TemperatureSource","Settings.RELAY2.Type","Settings.RELAY2.UpperHysteresisValue","Settings.RELAY2.LowerHysteresisValue","Settings.RELAY2.TemperatureSource"]};null==(o=C.ws)||o.send(Z(a))},ye=e=>{var o,a,l,t;X.recevieData[C.wId]=o=>{if(setTimeout((()=>{X.loading=!1}),2e3),!o.success)return q(A("errorMessage"),"error");(e=>{var o;"no_loading"!==e&&(X.loading=!0,setTimeout((()=>{X.loading=!1}),15e3)),X.recevieData[C.wId]=ce;const a={type:"device/relay_info",id:C.wId++};null==(o=C.ws)||o.send(Z(a))})(e),be(e),"no_loading"!==e&&q(A("Submitted successfully!"),"success")};const n={type:"ak_config/update",id:C.wId++,item:{...X.configData,"Settings.MOTION.ProximitySensor":X.configData["Settings.MOTION.ProximitySensor"]?"1":"0"}};null==(o=n.item)||delete o.tem_offset,null==(a=n.item)||delete a.hum_offset;if(K.value.showRelay()){["Settings.RELAY1.Type","Settings.RELAY1.UpperHysteresisValue","Settings.RELAY1.LowerHysteresisValue","Settings.RELAY1.TemperatureSource","Settings.RELAY2.Type","Settings.RELAY2.UpperHysteresisValue","Settings.RELAY2.LowerHysteresisValue","Settings.RELAY2.TemperatureSource"].forEach((e=>{var o,a;(null==(o=n.item)?void 0:o[e])&&(null==(a=n.item)||delete a[e])}))}ze.value&&(X.configData["Settings.Thermostat.Cooling"]?n.item["Settings.Thermostat.Cooling"]="1":(n.item["Settings.Thermostat.Cooling"]="0",n.item["Settings.RELAY1.LowerHysteresisValue"]="1",n.item["Settings.RELAY1.UpperHysteresisValue"]="2"),X.configData["Settings.Thermostat.Heating"]?n.item["Settings.Thermostat.Heating"]="1":(n.item["Settings.Thermostat.Heating"]="0",n.item["Settings.RELAY2.LowerHysteresisValue"]="1",n.item["Settings.RELAY2.UpperHysteresisValue"]="2"),n.item["Settings.Thermostat.Ventilation"]=X.configData["Settings.Thermostat.Ventilation"]?"1":"0"),X.loading=!0,setTimeout((()=>{X.loading=!1}),15e3),null==(l=C.ws)||l.send(Z(n)),X.recevieData[C.wId]=e=>{if(!e.success)return q(A("errorMessage"),"error")};const i={type:"ak_device/attr/set",device_id:R.selfDeviceId,item:{tem_offset:X.configData.tem_offset,hum_offset:X.configData.hum_offset},id:C.wId++};null==(t=C.ws)||t.send(Z(i))},Ve=()=>{var e;X.recevieData[C.wId]=e=>{if(X.loading=!1,!e.success)return q(A("errorMessage"),"error");X.temperaturSourceList=(null==e?void 0:e.result)||[]},X.loading=!0,setTimeout((()=>{X.loading=!1}),15e3);const o={type:"config/ak_device/temperature_list",id:C.wId++};null==(e=C.ws)||e.send(Z(o))},Te=D((()=>X.configData["Settings.Thermostat.Heating"]||X.configData["Settings.Thermostat.Cooling"])),Se=D((()=>oe.includes(x)&&R.isApiVersion)),De=D((()=>"X933H"!==x&&"C319H"!==x)),ke=D((()=>129===X.baseModel||80===X.baseModel||130===X.baseModel)),ze=D((()=>239===X.baseModel||238===X.baseModel||82===X.baseModel||83===X.baseModel));return D((()=>[65,66,67,68,80,129].includes(X.baseModel))),a((()=>C.updataId),(e=>{G(X.recevieData,e,C)}),{immediate:!0}),(e,o)=>{const a=T,h=_,D=b,k=y,$=V,R=p,C=z,A=w,E=H,Y=S,F=M;return L((l(),u("div",ur,[d(Y,{ref_key:"ruleFormRef",ref:B,model:X.configData,rules:re,"label-width":s(P)},{default:n((()=>[De.value?(l(),t(C,{key:0,class:"engr-device-index__motion"},{header:n((()=>[i("div",gr,[i("span",null,r(e.$t("Motion")),1)])])),default:n((()=>[i("div",fr,[i("div",vr,r(e.$t("Proximity sensor")),1),i("div",hr,[d(h,{key:"Settings.MOTION.ProximitySensor",prop:"Settings.MOTION.ProximitySensor"},{default:n((()=>[d(a,{modelValue:X.configData["Settings.MOTION.ProximitySensor"],"onUpdate:modelValue":o[0]||(o[0]=e=>X.configData["Settings.MOTION.ProximitySensor"]=e),"akubela-test":"engr-device-MOTION-switch",size:s(N),onClick:U(pe,["stop"])},null,8,["modelValue","size","onClick"])])),_:1})])]),i("div",pr,[i("div",_r,[c(r(e.$t("Proximity detection distance"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("Proximity detection distance"),placement:"top","raw-content":!0},null,8,["content"])]),i("div",wr,[d(h,{key:"Settings.MOTION.ProximityDetectionDistance",prop:"Settings.MOTION.ProximityDetectionDistance"},{default:n((()=>[d($,{modelValue:X.configData["Settings.MOTION.ProximityDetectionDistance"],"onUpdate:modelValue":o[1]||(o[1]=e=>X.configData["Settings.MOTION.ProximityDetectionDistance"]=e),disabled:!X.configData["Settings.MOTION.ProximitySensor"],size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(X.ProximityDetectionDistanceArr,(e=>(l(),t(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled","size"])])),_:1})])]),Se.value?(l(),u("div",br,[i("div",yr,r(e.$t("Send command when triggered")),1),i("div",Vr,[d(h,{key:"send_cmd",prop:"send_cmd"},{default:n((()=>[d(a,{modelValue:X.send_cmd,"onUpdate:modelValue":o[2]||(o[2]=e=>X.send_cmd=e),size:s(N),onClick:U(pe,["stop"])},null,8,["modelValue","size","onClick"])])),_:1})])])):v("",!0),Se.value?(l(),u("div",Tr,[i("div",Sr,r(e.$t("Receiver address")),1),i("div",Dr,[d(h,{label:"",prop:"url"},{default:n((()=>[d(R,{modelValue:X.url,"onUpdate:modelValue":o[3]||(o[3]=e=>X.url=e),size:s(N)},null,8,["modelValue","size"])])),_:1})])])):v("",!0)])),_:1})):v("",!0),Se.value?(l(),t(C,{key:1,class:"engr-device-index__motion"},{header:n((()=>[i("div",kr,[i("span",null,r(e.$t("DND Setting")),1)])])),default:n((()=>[i("div",zr,[i("div",$r,r(e.$t("Return Code When DND")),1),i("div",Rr,[d(h,{key:"features.DND.ReturnCode",prop:"features.DND.ReturnCode"},{default:n((()=>[d($,{modelValue:X.configData["features.DND.ReturnCode"],"onUpdate:modelValue":o[4]||(o[4]=e=>X.configData["features.DND.ReturnCode"]=e),size:s(N)},{default:n((()=>[(l(!0),u(g,null,f(X.returnCodeArr,(e=>(l(),t(k,{key:e.value,label:`${e.value}(${e.label})`,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size"])])),_:1})])])])),_:1})):v("",!0),L(d(C,{class:"engr-device-index__motion"},{header:n((()=>[i("div",Ur,[i("span",null,r(e.$t("Temperature & Humidity")),1)])])),default:n((()=>[i("div",xr,[i("div",Cr,[c(r(e.$t("Temperature Offset"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("This parameter defines the offset value for the HyPanel temperature. If the built-in temperature sensor of the HyPanel is not calibrated properly, manual calibration can be performed by adjusting the values up to ±10.0°C."),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Ar,[d(h,{key:"tem_offset",prop:"tem_offset"},{default:n((()=>[d(R,{modelValue:X.configData.tem_offset,"onUpdate:modelValue":o[5]||(o[5]=e=>X.configData.tem_offset=e),modelModifiers:{trim:!0},size:s(N),placeholder:"-10-10"},{append:n((()=>[c("℃")])),_:1},8,["modelValue","size"])])),_:1})])]),i("div",Lr,[i("div",Mr,[c(r(e.$t("Humidity Offset"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("This parameter defines the offset value for the HyPanel humidity. If the built-in humidity sensor of the HyPanel is not calibrated properly, manual calibration can be performed by adjusting the values up to ±10.0%."),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Or,[d(h,{key:"hum_offset",prop:"hum_offset"},{default:n((()=>[d(R,{modelValue:X.configData.hum_offset,"onUpdate:modelValue":o[6]||(o[6]=e=>X.configData.hum_offset=e),modelModifiers:{trim:!0},size:s(N),placeholder:"-10-10"},{append:n((()=>[c("%")])),_:1},8,["modelValue","size"])])),_:1})])])])),_:1},512),[[O,!["C319H","X933H"].includes(x)]]),d(mr,{ref_key:"relayRef",ref:K},null,512),ze.value?(l(),t(C,{key:2,class:"engr-device-index__thermostat"},{header:n((()=>[i("div",Hr,[i("span",null,r(e.$t("Thermostat")),1)])])),default:n((()=>[239===X.baseModel?(l(),u("div",Nr,[i("div",Er,r(e.$t("Mode Select Custom")),1),i("div",Pr,[d(h,{prop:"heatingCoolingVentilation"},{default:n((()=>[d(E,{modelValue:X.configData["Settings.Thermostat.Cooling"],"onUpdate:modelValue":o[7]||(o[7]=e=>X.configData["Settings.Thermostat.Cooling"]=e),label:e.$t("Cooling")},null,8,["modelValue","label"]),d(E,{modelValue:X.configData["Settings.Thermostat.Heating"],"onUpdate:modelValue":o[8]||(o[8]=e=>X.configData["Settings.Thermostat.Heating"]=e),label:e.$t("Heating")},null,8,["modelValue","label"]),d(E,{modelValue:X.configData["Settings.Thermostat.Ventilation"],"onUpdate:modelValue":o[9]||(o[9]=e=>X.configData["Settings.Thermostat.Ventilation"]=e),label:e.$t("Ventilation")},null,8,["modelValue","label"])])),_:1})])])):v("",!0),Te.value?(l(),u("div",Ir,[i("div",jr,r(e.$t("Temperature source")),1),i("div",Yr,[d(h,{key:"Settings.RELAY1.TemperatureSource",prop:"Settings.RELAY1.TemperatureSource"},{default:n((()=>[d($,{modelValue:X.configData["Settings.RELAY1.TemperatureSource"],"onUpdate:modelValue":o[10]||(o[10]=e=>X.configData["Settings.RELAY1.TemperatureSource"]=e),size:s(N),placeholder:e.$t("Please enter")},{default:n((()=>[(l(!0),u(g,null,f(X.temperaturSourceList,((e,o)=>(l(),t(k,{key:o,label:e.name,value:e.device_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","size","placeholder"])])),_:1})])])):v("",!0),L(i("div",Fr,[i("div",Br,r(e.$t("The fan follows the valve to close")),1),i("div",Gr,[d(h,null,{default:n((()=>[d(a,{modelValue:X.fanValue,"onUpdate:modelValue":o[11]||(o[11]=e=>X.fanValue=e),size:s(N)},null,8,["modelValue","size"])])),_:1})])],512),[[O,!(!X.configData["Settings.Thermostat.Cooling"]&&!X.configData["Settings.Thermostat.Heating"])]]),X.configData["Settings.Thermostat.Heating"]?(l(),u("div",Xr,r(e.$t("Heating Hysteresis")),1)):v("",!0),X.configData["Settings.Thermostat.Heating"]?(l(),u("div",qr,[i("div",Zr,[c(r(e.$t("Upper Hysteresis Value"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("tipShowHeatting"),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Kr,[d(h,{key:"Settings.RELAY2.UpperHysteresisValue",prop:"Settings.RELAY2.UpperHysteresisValue"},{default:n((()=>[d(R,{modelValue:X.configData["Settings.RELAY2.UpperHysteresisValue"],"onUpdate:modelValue":o[12]||(o[12]=e=>X.configData["Settings.RELAY2.UpperHysteresisValue"]=e),modelModifiers:{trim:!0},size:s(N),placeholder:"0-5"},{append:n((()=>[c("℃")])),_:1},8,["modelValue","size"])])),_:1})])])):v("",!0),X.configData["Settings.Thermostat.Heating"]?(l(),u("div",Qr,[i("div",Wr,[c(r(e.$t("Lower Hysteresis Value"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("tipShowHeatting"),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",Jr,[d(h,{key:"Settings.RELAY2.LowerHysteresisValue",prop:"Settings.RELAY2.LowerHysteresisValue"},{default:n((()=>[d(R,{modelValue:X.configData["Settings.RELAY2.LowerHysteresisValue"],"onUpdate:modelValue":o[13]||(o[13]=e=>X.configData["Settings.RELAY2.LowerHysteresisValue"]=e),modelModifiers:{trim:!0},size:s(N),placeholder:"0-5"},{append:n((()=>[c("℃")])),_:1},8,["modelValue","size"])])),_:1})])])):v("",!0),X.configData["Settings.Thermostat.Cooling"]?(l(),u("div",es,r(e.$t("Cooling Hysteresis")),1)):v("",!0),X.configData["Settings.Thermostat.Cooling"]?(l(),u("div",os,[i("div",as,[c(r(e.$t("Upper Hysteresis Value"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("tipShowCooling"),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",ls,[d(h,{key:"Settings.RELAY1.UpperHysteresisValue",prop:"Settings.RELAY1.UpperHysteresisValue"},{default:n((()=>[d(R,{modelValue:X.configData["Settings.RELAY1.UpperHysteresisValue"],"onUpdate:modelValue":o[14]||(o[14]=e=>X.configData["Settings.RELAY1.UpperHysteresisValue"]=e),modelModifiers:{trim:!0},size:s(N),placeholder:"0-5"},{append:n((()=>[c("℃")])),_:1},8,["modelValue","size"])])),_:1})])])):v("",!0),X.configData["Settings.Thermostat.Cooling"]?(l(),u("div",ts,[i("div",ns,[c(r(e.$t("Lower Hysteresis Value"))+" ",1),d(D,{class:"box-item",effect:"light",content:e.$t("tipShowCooling"),placement:"top","raw-content":!0},{default:n((()=>[d(A,null,{default:n((()=>[d(s(m))])),_:1})])),_:1},8,["content"])]),i("div",is,[d(h,{key:"Settings.RELAY1.LowerHysteresisValue",prop:"Settings.RELAY1.LowerHysteresisValue"},{default:n((()=>[d(R,{modelValue:X.configData["Settings.RELAY1.LowerHysteresisValue"],"onUpdate:modelValue":o[15]||(o[15]=e=>X.configData["Settings.RELAY1.LowerHysteresisValue"]=e),modelModifiers:{trim:!0},size:s(N),placeholder:"0-5"},{append:n((()=>[c("℃")])),_:1},8,["modelValue","size"])])),_:1})])])):v("",!0)])),_:1})):v("",!0),ke.value?(l(),t(C,{key:3,class:"engr-device-index__zone"},{header:n((()=>[i("div",rs,[i("span",null,r(e.$t("Zone")),1)])])),default:n((()=>[(l(!0),u(g,null,f(X.zoneList,(e=>(l(),u("div",{key:e.device_id},[i("div",ss,[i("div",ds,"Display Zone-"+r(e.index),1),i("div",cs,[d(h,null,{default:n((()=>[d(a,{modelValue:e.enabled,"onUpdate:modelValue":o=>e.enabled=o,size:s(N),onClick:U((o=>ge(e)),["stop"])},null,8,["modelValue","onUpdate:modelValue","size","onClick"])])),_:2},1024)])]),i("div",ms,[i("div",us,"Zone Type-"+r(e.index),1),i("div",gs,[d(h,null,{default:n((()=>[d($,{modelValue:e.mode,"onUpdate:modelValue":o=>e.mode=o,disabled:!e.enabled,size:s(N),onChange:o=>ge(e)},{default:n((()=>[(l(!0),u(g,null,f(X.zoneTypeList,(e=>(l(),t(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","size","onChange"])])),_:2},1024)])])])))),128))])),_:1})):v("",!0)])),_:1},8,["model","rules","label-width"]),X.show485?(l(),t(Yi,{key:0,ref_key:"refRs485",ref:j},null,512)):v("",!0),d(I,{onCancel:ve,onSubmit:he})])),[[F,X.loading]])}}};export{fs as default};
