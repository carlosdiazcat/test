import{b as e,j as i,w as d,b4 as s,be as a,bc as t,bd as l,b5 as c,F as n,bl as o,b7 as r,q as v,bb as u,ba as m,bh as p}from"./Akubela-element-plus-Vendor-47553b40.js";import{u as _,e as b,j as h,w,s as f,am as y,S as D,a as g,m as I,n as k,Q as j}from"./Akubela-login-home-part-Vendor-facddf88.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const A={key:0,class:"dia-devices-list"},L=["onClick"],C={class:"dia-row-left"},V={class:"devices-content-detail"},B={class:"devices-content-name"},q={class:"dia-row-right"},M={key:1},S={__name:"DeviceDialogTemsoure",props:{show:{type:Boolean,required:!0,default:!1},deviceSelected:{type:Array,default:()=>[]}},emits:["update:show"],setup(S,{emit:T}){const $=S,{t:x}=_();let E=b(),F=h(),{deviceCardObj:N}=F,O=w();const Q=e({recevieData:{},devicesList:[],loading:!1,selectedDeviceId:""}),U=e=>{if(Q.loading=!1,!e.success)return k(x("errorMessage"),"error");const i=E.findAbility(N.deviceDetail,"climate","listen_temperature_device_id");e.result.forEach((e=>{var d,s,a,t;const l=null==(s=null==(d=F.devicesList)?void 0:d.find)?void 0:s.call(d,(i=>i.device_id===e.device_id)),c=j(l);(null==c?void 0:c.device_id)&&((null==i?void 0:i.value)===(null==c?void 0:c.device_id)&&(Q.selectedDeviceId=null==e?void 0:e.device_id),c.name=(null==e?void 0:e.name)||"",null==(t=null==(a=Q.devicesList)?void 0:a.push)||t.call(a,c))}))},z=()=>{var e,i;const d=E.findAbility(N.deviceDetail,"climate","listen_temperature_device_id");Q.recevieData[O.wId]=e=>{if(!e.success)return k(x("errorMessage"),"error");(null==d?void 0:d.value)&&(d.value=Q.selectedDeviceId),T("update:show",!1)};const s={type:"config/ak_device/update_relay_climate",device_id:null==(e=N.deviceDetail)?void 0:e.device_id,entity_id:null==d?void 0:d.entity_id,listen_temperature_device_id:Q.selectedDeviceId,id:O.wId++};null==(i=O.ws)||i.send(I(s))},G=i({get:()=>$.show,set:e=>{T("update:show",e)}});return d((()=>$.show),(e=>{$.show&&(Q.selectedDeviceId="",(()=>{var e;Q.recevieData[O.wId]=U;const i={type:"config/ak_device/temperature_list",id:O.wId++};Q.loading=!0,Q.devicesList=[],null==(e=O.ws)||e.send(I(i))})())}),{immediate:!0}),d((()=>O.updataId),(e=>{f(Q.recevieData,e,O)}),{immediate:!0}),(e,i)=>{const d=p;return s(),a(g,{show:G.value,"onUpdate:show":i[0]||(i[0]=e=>G.value=e),class:"dia-tem-soure-device",title:e.$t("Temperature source"),"is-ash":!Q.selectedDeviceId,onButtonCancel:i[1]||(i[1]=e=>T("update:show",!1)),onButtonConfirm:z},{content:t((()=>[l((s(),c("div",null,[Q.devicesList.length>0?(s(),c("div",A,[(s(!0),c(n,null,o(Q.devicesList,(e=>(s(),c("div",{key:e.entity_id,class:"dia-devices-row",onClick:i=>(e=>{Q.selectedDeviceId=null==e?void 0:e.device_id})(e)},[r("div",C,[v(y,{"card-obj":e,online:null==e?void 0:e.online,"class-name":"primary"},null,8,["card-obj","online"]),r("div",V,[r("div",B,[v(D,{content:e.name},null,8,["content"])])])]),r("div",q,[r("span",{class:u([Q.selectedDeviceId===e.device_id?"modify-more-right-active":" ","modify-more-right"])},null,2)])],8,L)))),128))])):(s(),c("div",M,m(e.$t("No Data")),1))])),[[d,Q.loading]])])),_:1},8,["show","title","is-ash"])}}};export{S as default};
