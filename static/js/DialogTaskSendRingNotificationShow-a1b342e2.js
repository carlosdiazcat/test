import{j as e,u as s,w as t,g as o,a as i,n as a,s as n,m as l}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as c,l as d,j as r,w as u,b4 as m,b5 as h,q as p,bc as v,b7 as _,ba as w,v as g,F as f,bl as b,bb as k}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const y={class:"scenes-dia-ring-notification"},j={class:"scene-message-content"},L={class:"condition-content-box"},A={class:"condition-row-left"},B={class:"condition-left__span"},C={class:"condition-row-right"},D=["src"],V={class:"condition-content-child"},q=["onClick"],x={class:"condition-child-row__left condition-left-max-setting"},E={class:"condition-child-row__right"},I={__name:"DialogTaskSendRingNotificationShow",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(I,{emit:R}){const S=I;e();const{t:T}=s();let N=t();const $=c({recevieData:{},is_selected_all:!0,devicesList:[]});d((()=>{$.loading=!0}));const F=()=>{$.is_selected_all=!$.is_selected_all,$.is_selected_all?$.devicesList.forEach((e=>{e.selected=!0})):$.devicesList.forEach((e=>{e.selected=!1}))},M=()=>{R("open-dia-show"),R("update:show",!1)},O=()=>{R("update:show",!1),R("pop-closed")},U=()=>{var e,s,t,o;if(!$.devicesList.find((e=>!0===e.selected)))return a(T("At Least One Required"),"error");const i={send_ring_notification:{target_ids:null==(o=null==(t=null==(s=null==(e=$.devicesList)?void 0:e.filter)?void 0:s.call(e,(e=>e.selected)))?void 0:t.map)?void 0:o.call(t,(e=>e.id))}};R("set-add-obj",i),R("update:show",!1)},z=r({get:()=>S.show,set:e=>{R("update:show",e)}});return u((()=>S.show),(()=>{S.show&&(()=>{var e;$.recevieData[N.wId]=e=>{if($.loading=!1,!e.success)return a(T("errorMessage"),"error");e.result.forEach((e=>{e.selected=!0})),$.devicesList=e.result};const s={mode:3,type:"homeassistant/contacts_automation",id:N.wId++};$.loading=!0,setTimeout((()=>{$.loading=!1}),1e4),null==(e=N.ws)||e.send(l(s))})()})),u((()=>N.updataId),(e=>{n($.recevieData,e,N)}),{immediate:!0}),(e,s)=>(m(),h("div",y,[p(i,{show:z.value,"onUpdate:show":s[0]||(s[0]=e=>z.value=e),"back-show":!0,title:e.$t("Ring Notification"),loading:$.loading,onButtonCancel:O,onButtonBack:M,onButtonConfirm:U},{content:v((()=>[_("div",j,[_("div",L,[_("div",{class:"condition-content-row",onClick:F},[_("div",A,[_("span",B,w(e.$t("Send To")),1)]),_("div",C,[_("img",{alt:"smart home,home automation,homekit,smart security,smart home systems,google home",class:"bottom-buttons__cancel__icon",src:$.is_selected_all?g(o)("security/deselect_all_selected.webp"):g(o)("security/deselect_all.webp")},null,8,D)])]),_("div",V,[(m(!0),h(f,null,b($.devicesList,(e=>(m(),h("div",{key:e.id,class:"condition-child-row",onClick:s=>(e=>{e.selected=!e.selected})(e)},[_("div",x,w(e.name),1),_("div",E,[_("span",{class:k([e.selected?"modify-more-right-active":" ","modify-more-right"])},null,2)])],8,q)))),128))])])])])),_:1},8,["show","title","loading"])]))}};export{I as default};
