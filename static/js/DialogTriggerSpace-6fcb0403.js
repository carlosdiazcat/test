import{u as e,w as a,s as l,a as s,bf as t,b as o,j as i,m as n,n as d}from"./Akubela-login-home-part-Vendor-facddf88.js";import{_ as u}from"./CommonChoiceSlider-61b1a375.js";import{_ as r}from"./CommonChoiceTamperature-02779d00.js";import{c as p,e as c}from"./Akubela-scenes-part-Vendor-b442de17.js";import{b as y,j as v,w as b,b4 as m,b5 as h,b7 as w,q as f,bc as g,F as T,bl as j,bb as O,ba as D,bf as _,l as k}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const C={class:"trigger-device-default"},I={class:"trigger-space-default"},A={key:0},S={class:"common-big-row"},V=["onClick"],U={class:"common-dialog-left"},M={class:"common-dialog-right"},L={key:1},x={class:"common-big-row"},B=["onClick"],E={class:"common-dialog-left"},P={class:"common-dialog-right"},H={key:2},q={key:3},F={key:4},W={key:5},N={__name:"DialogTriggerSpaceDefault",props:{show:{type:Boolean,required:!0,default:!1},spaceObj:{type:Object,required:!0,default:()=>{}}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(i,{emit:n}){const d=i,{t:k}=e();let N=a();const $=y({recevieData:{},defaultList:[{label:k("Motion"),value:"Motion",sendType:"motion"},{label:k("Temperature"),value:"Tamperature",sendType:"temperature"},{label:k("Humidity"),value:"Humidity",sendType:"humidity"},{label:k("Light"),value:"default",sendType:"light"},{label:k("Siren"),value:"default",sendType:"siren"},{label:k("Door/Window"),value:"defaultOpen",sendType:"door"},{label:k("Fan"),value:"default",sendType:"fan"},{label:k("Switch"),value:"default",sendType:"switch"},{label:k("Curtain"),value:"defaultOpen",sendType:"curtain"},{label:k("Music"),value:"Music",sendType:"music"},{label:k("Power"),value:"Power",sendType:"power"},{label:k("Energy Consumption"),value:"Energy Consumption",sendType:"energy"},{label:k("Occupancy"),value:"Motion",sendType:"occupancy"}],showType:"",sendType:"",resultData:[],sendData:{},oldDeviceId:"",triggerDetail:[],sliderValue:0,sliderType:"",energyTime:0,energyType:0,tamperature:{value:0,type:""},humidityObj:{value:0,type:""},spicalIsPass:!1}),z=()=>{n("open-dia-show"),n("update:show",!1)},G=()=>{var e;delete $.sendData.select,J(),(null==(e=d.spaceObj)?void 0:e.areaId)||($.sendData.area_id="others"),n("set-add-obj",$.sendData),n("update:show",!1)},J=()=>{var e,a,l,s;"Tamperature"===$.showType&&($.sendData={platform:"space",area_id:null==(e=d.spaceObj)?void 0:e.areaId,type:$.sendType,status:t.get($.tamperature.type),value:$.tamperature.value}),"Humidity"===$.showType&&($.sendData={platform:"space",area_id:null==(a=d.spaceObj)?void 0:a.areaId,type:$.sendType,status:t.get($.humidityObj.type),value:$.humidityObj.value}),"Energy Consumption"===$.showType&&($.sendData={platform:"space",area_id:null==(l=d.spaceObj)?void 0:l.areaId,type:$.sendType,status:t.get($.sliderType),value:$.sliderValue,energy_type:$.energyType}),"Power"===$.showType&&($.sendData={platform:"space",area_id:null==(s=d.spaceObj)?void 0:s.areaId,type:$.sendType,status:"above",value:$.sliderValue})},K=v({get:()=>d.show,set:e=>{n("update:show",e)}}),Q=v((()=>{var e;return!(null==(e=$.sendData)?void 0:e.platform)&&("Energy Consumption"===$.showType?!$.spicalIsPass:"Tamperature"!==$.showType&&"Power"!==$.showType&&"Humidity"!==$.showType)})),R=()=>{n("update:show",!1),n("pop-closed")},X=e=>{var a;$.resultData.forEach((e=>e.select=!1)),e.select=!0,"Motion"!==$.showType&&"default"!==$.showType&&"defaultOpen"!==$.showType&&"Music"!==$.showType&&"occupancy"!==$.showType||($.sendData={platform:"space",area_id:null==(a=d.spaceObj)?void 0:a.areaId,type:$.sendType,status:e.status,value:e.value})},Y=e=>{$.spicalIsPass=e};return b((()=>N.updataId),(e=>{l($.recevieData,e,N)}),{immediate:!0}),b((()=>d.show),(e=>{e&&(()=>{var e,a,l,s,t,o,i,n,u,r,p,c,y,v;$.sendData={};const b=null==(a=null==(e=$.defaultList)?void 0:e.find)?void 0:a.call(e,(e=>{var a;return e.sendType===(null==(a=d.spaceObj)?void 0:a.value)}));$.showType=b.value,$.sendType=b.sendType,"default"===$.showType&&($.resultData=[{label:k("Any label on",{label:null==(l=d.spaceObj)?void 0:l.label})+" ",status:"on",value:"any"},{label:k("Any label off",{label:null==(s=d.spaceObj)?void 0:s.label})+" ",status:"off",value:"any"},{label:k("All label on",{label:null==(t=d.spaceObj)?void 0:t.label})+" ",status:"on",value:"all"},{label:k("All label off",{label:null==(o=d.spaceObj)?void 0:o.label})+" ",status:"off",value:"all"}]),"defaultOpen"===$.showType&&($.resultData=[{label:k("Any label open",{label:null==(i=d.spaceObj)?void 0:i.label})+" ",status:"on",value:"any"},{label:k("Any label close",{label:null==(n=d.spaceObj)?void 0:n.label})+" ",status:"off",value:"any"},{label:k("All label open",{label:null==(u=d.spaceObj)?void 0:u.label})+" ",status:"on",value:"all"},{label:k("All label close",{label:null==(r=d.spaceObj)?void 0:r.label})+" ",status:"off",value:"all"}]),"Music"===$.showType&&($.resultData=[{label:k("Any label play",{label:null==(p=d.spaceObj)?void 0:p.label})+" ",status:"on",value:"any"},{label:k("Any label stop",{label:null==(c=d.spaceObj)?void 0:c.label})+" ",status:"off",value:"any"},{label:k("All label play",{label:null==(y=d.spaceObj)?void 0:y.label})+" ",status:"on",value:"all"},{label:k("All label stop",{label:null==(v=d.spaceObj)?void 0:v.label})+" ",status:"off",value:"all"}]),"Motion"===$.showType&&($.resultData=[{label:k("Someone Detected"),value:"Someone Detected",status:"on",value:"any"},{label:k("no one detected"),value:"No One Detected",status:"off",value:"all"}])})()})),(e,a)=>{var l;const t=o;return m(),h("div",C,[w("div",I,[f(s,{show:K.value,"onUpdate:show":a[12]||(a[12]=e=>K.value=e),"back-show":!0,"is-ash":Q.value,title:null==(l=d.spaceObj)?void 0:l.label,onButtonCancel:R,onButtonBack:z,onButtonConfirm:G},{content:g((()=>[w("div",null,["defaultOpen"===$.showType||"default"===$.showType||"Music"===$.showType?(m(),h("div",A,[(m(!0),h(T,null,j($.resultData,((e,a)=>(m(),h("div",{key:a},[w("div",S,[w("div",null,[w("div",{class:"common-humidity-row",onClick:a=>X(e)},[w("div",U,[w("div",{class:O(["common-dialog-row-left-text",e.select?"row-left-active":""])},D(e.label),3)]),w("div",M,[f(t,{"icon-class":e.select?"tick_active":""},null,8,["icon-class"])])],8,V)])])])))),128))])):_("",!0),"Motion"===$.showType?(m(),h("div",L,[(m(!0),h(T,null,j($.resultData,((e,a)=>(m(),h("div",{key:a},[w("div",x,[w("div",null,[w("div",{class:"common-humidity-row",onClick:a=>X(e)},[w("div",E,[w("div",{class:O(["common-dialog-row-left-text",e.select?"row-left-active":""])},D(e.label),3)]),w("div",P,[f(t,{"icon-class":e.select?"tick_active":""},null,8,["icon-class"])])],8,B)])])])))),128))])):_("",!0),"Tamperature"===$.showType?(m(),h("div",H,[f(r,{"slider-value":$.tamperature.value,"onUpdate:sliderValue":a[0]||(a[0]=e=>$.tamperature.value=e),"slider-type":$.tamperature.type,"onUpdate:sliderType":a[1]||(a[1]=e=>$.tamperature.type=e),type:"space"},null,8,["slider-value","slider-type"])])):_("",!0),"Humidity"===$.showType?(m(),h("div",q,[f(u,{"slider-value":$.humidityObj.value,"onUpdate:sliderValue":a[2]||(a[2]=e=>$.humidityObj.value=e),"slider-type":$.humidityObj.type,"onUpdate:sliderType":a[3]||(a[3]=e=>$.humidityObj.type=e),"item-type":$.showType},null,8,["slider-value","slider-type","item-type"])])):_("",!0),"Energy Consumption"===$.showType?(m(),h("div",F,[f(p,{"slider-value":$.sliderValue,"onUpdate:sliderValue":a[4]||(a[4]=e=>$.sliderValue=e),"slider-type":$.sliderType,"onUpdate:sliderType":a[5]||(a[5]=e=>$.sliderType=e),"energy-time":$.energyTime,"onUpdate:energyTime":a[6]||(a[6]=e=>$.energyTime=e),"energy-type":$.energyType,"onUpdate:energyType":a[7]||(a[7]=e=>$.energyType=e),onAddEnergy:Y},null,8,["slider-value","slider-type","energy-time","energy-type"])])):_("",!0),"Power"===$.showType?(m(),h("div",W,[f(c,{"slider-value":$.sliderValue,"onUpdate:sliderValue":a[8]||(a[8]=e=>$.sliderValue=e),"slider-type":$.sliderType,"onUpdate:sliderType":a[9]||(a[9]=e=>$.sliderType=e),"energy-time":$.energyTime,"onUpdate:energyTime":a[10]||(a[10]=e=>$.energyTime=e),"energy-type":$.energyType,"onUpdate:energyType":a[11]||(a[11]=e=>$.energyType=e)},null,8,["slider-value","slider-type","energy-time","energy-type"])])):_("",!0)])])),_:1},8,["show","is-ash","title"])])])}}},$={class:"trigger-device-index"},z=["onClick"],G={class:"condition-row-left"},J={class:"condition-left__span"},K={key:0},Q=["onClick"],R={class:"condition-child-row-security"},X={class:"condition-child-row"},Y={class:"condition-child-row__left"},Z=w("div",{class:"condition-child-row__right"},[w("div",{class:"common-row-triangle"})],-1),ee={__name:"DialogTriggerSpace",props:{show:{type:Boolean,required:!0,default:!1},type:{type:String,default:"condition"}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(t,{emit:u}){const r=t;i();const{t:p}=e();let c=a();const O=y({recevieData:{},sendData:{},devicesTriggerList:{},defaultIndex:0,deviceShow:!1,spaceObj:{},defaultList:[{label:p("Motion"),value:"motion"},{label:p("Temperature"),value:"temperature"},{label:p("Humidity"),value:"humidity"},{label:p("Light"),value:"light"},{label:p("Siren"),value:"siren"},{label:p("Door/Window"),value:"door"},{label:p("Fan"),value:"fan"},{label:p("Switch"),value:"switch"},{label:p("Curtain"),value:"curtain"},{label:p("Music"),value:"music"},{label:p("Instantaneous power"),value:"power"},{label:p("Energy Consumption"),value:"energy"},{label:p("Occupancy"),value:"occupancy"}],spaceList:[],loading:!1});k((()=>{O.loading=!0,setTimeout((()=>{C()}),1e3)}));const C=()=>{A()},I=()=>{u("update:show",!1),u("pop-closed")},A=()=>{var e;O.recevieData[c.wId]=S;const a={type:"config/ak_area/triggers",id:c.wId++};O.loading=!0,setTimeout((()=>{O.loading=!1}),1e4),null==(e=c.ws)||e.send(n(a))},S=e=>{var a,l;if(O.loading=!1,!e.success)return d(p("errorMessage"),"error");let s={area_id:"all",area_name:p("Whole Home"),options:[]};e.result.forEach((e=>{""===e.area_name&&(e.area_name=p("Other")),e.options.forEach((e=>{var a,l;null==(l=null==(a=s.options)?void 0:a.push)||l.call(a,e)}))})),s.options=Array.from(new Set(s.options)),null==(l=null==(a=e.result)?void 0:a.unshift)||l.call(a,s),O.spaceList=e.result},V=e=>{var a,l;const s=null==(l=null==(a=O.defaultList)?void 0:a.find)?void 0:l.call(a,(a=>a.value===e));return(null==s?void 0:s.label)||""},U=()=>{u("open-dia-show"),u("update:show",!1)},M=()=>{if(!B.value)return d(p("please Select Device"),"error");L()},L=()=>{u("set-add-obj",{}),u("update:show",!1)},x=v({get:()=>r.show,set:e=>{u("update:show",e)}}),B=v((()=>{let e=!1;return O.sendData.platform&&(e=!0),e})),E=()=>{u("update:show",!0)},P=e=>{u("set-add-obj",e)},H=()=>{u("update:show",!1),u("pop-closed")};return b((()=>c.updataId),(e=>{l(O.recevieData,e,c)}),{immediate:!0}),b((()=>r.show),(e=>{e&&C()})),(e,a)=>{const l=o;return m(),h("div",$,[f(s,{show:x.value,"onUpdate:show":a[0]||(a[0]=e=>x.value=e),"back-show":!0,"foot-show":!1,"is-ash":!B.value,title:e.$t("Spaces"),loading:O.loading,onButtonCancel:I,onButtonBack:U,onButtonConfirm:M},{content:g((()=>[(m(!0),h(T,null,j(O.spaceList,((e,a)=>(m(),h("div",{key:a},[w("div",{class:"common-dialog-row",onClick:e=>(e=>{if(O.defaultIndex===e)return O.defaultIndex="";O.defaultIndex=e})(a)},[w("div",G,[f(l,{"icon-class":"card_room",class:"device-room__svg"}),w("span",J,D(e.area_name||"other"),1)])],8,z),a===O.defaultIndex?(m(),h("div",K,[(m(!0),h(T,null,j(e.options,((e,a)=>(m(),h("div",{key:a,onClick:a=>(e=>{var a,l;const s=null==(l=null==(a=O.defaultList)?void 0:a.find)?void 0:l.call(a,(a=>a.value===e));O.spaceObj={...s,areaId:O.spaceList[O.defaultIndex].area_id},u("update:show",!1),O.deviceShow=!0})(e)},[w("div",R,[w("div",X,[w("div",Y,[w("span",null,D(V(e)),1)]),Z])])],8,Q)))),128))])):_("",!0)])))),128))])),_:1},8,["show","is-ash","title","loading"]),f(N,{show:O.deviceShow,"onUpdate:show":a[1]||(a[1]=e=>O.deviceShow=e),"space-obj":O.spaceObj,onOpenDiaShow:E,onSetAddObj:P,onPopClosed:H},null,8,["show","space-obj"])])}}};export{ee as default};
