import{i as e,M as t,aq as s,e as i,w as n,n as o,m as a,ar as r,Y as c,as as l}from"./Akubela-login-home-part-Vendor-facddf88.js";let{t:h}=e().global;t.on("i18nInited",(()=>{h=e().global.t}));const d=()=>[{label:h("All"),value:-1},{label:h("Door Phone"),value:0},{label:h("Guard phone"),value:1},{label:h("Indoor Monitor"),value:2},{label:h("Camera"),value:3}],u={fontSize:"12px",fontFamily:"ArialMT",color:"#000000"},L={color:"#5D5D5D"},w=s("setUpShare",{state:()=>({actionStore:i(),wsLink:n(),componentLoading:!1,homeCenterDevice:{},pannelList:[],doorphoneList:[],cardList:[],tableList:[],loaclContactsList:[],cloundContactsList:[],componentObjFun:{cardFun:()=>{},deviceList:()=>{}},localRefreshFun:"",timeoutID:null}),getters:{recevieScenesData(){return this.actionStore.recevieScenesData},newControlObj(){return{create:this.refresh,update:this.refresh,delete:this.refresh,state:this.refresh,device_id_changed:()=>{this.getLocalContactsList((()=>{}),"refresh"),this.getPannelList()},gateway_on_offline:this.getPannelList,connect_home_center:this.getPannelList}}},actions:{refresh(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((()=>{this.getLocalContactsList((()=>{}),"refresh"),this.getPannelList()}),3e3)},getPannelList(e){var t;this.recevieScenesData[this.wsLink.wId]=e=>{if(!e.success)return o(h("errorMessage"),"error");this.pannelList=e.result.map((e=>({...e,product_type:"Panel",device_type:e.model,isDoorPhone:!!(null==e?void 0:e.add_on)}))),this.getPublicDoorphone()};const s={type:"config/ak_device/panel/list",id:this.wsLink.wId++};null==(t=this.wsLink.ws)||t.send(a(s))},getPublicDoorphone(){var e;this.recevieScenesData[this.wsLink.wId]=e=>{if(!e.success)return o(h("errorMessage"),"error");this.doorphoneList=e.result.map((e=>({...e,model:"DoorPhone",network:"wifi",product_type:"DoorPhone",device_type:"DoorPhone",isDoorPhone:!0,online:!0}))),this.setDeviceData()};const t={type:"config/ak_device/doorphone/list",id:this.wsLink.wId++};null==(e=this.wsLink.ws)||e.send(a(t))},setDeviceData(){let e=[];this.pannelList.forEach((t=>{(null==t?void 0:t.homecenter)?this.homeCenterDevice=t:e.push(t)})),e=r(e,"name");const t=r([...e,...this.doorphoneList],"name");this.cardList=[this.homeCenterDevice,...t],this.tableList=[this.homeCenterDevice,...e].filter((e=>!(null==e?void 0:e.add_on))),this.componentObjFun.cardFun(),this.componentObjFun.deviceList()},getLocalContactsList(e,t){var s;this.recevieScenesData[this.wsLink.wId]=s=>{if(!s.success)return o(h("errorMessage"),"error");this.loaclContactsList=s.result,e(),"refresh"===t&&this.localRefreshFun&&this.localRefreshFun(this.loaclContactsList)};const i={type:"contact/local/get",id:this.wsLink.wId++};null==(s=this.wsLink.ws)||s.send(a(i))},deleteLocalList(e,t){var s;this.recevieScenesData[this.wsLink.wId]=t=>{e(t)};const i={type:"contact/local/del",ids:t,id:this.wsLink.wId++};null==(s=this.wsLink.ws)||s.send(a(i))},importLoaclList(e,t,s){var i;this.recevieScenesData[this.wsLink.wId]=t=>{var i;if(!t.success){s(t);const e=(null==(i=null==t?void 0:t.error)?void 0:i.code)?t.error.code:"import fail";return o(h(e),"error")}e(t)};const n={type:"contact/local/import",content:t,id:this.wsLink.wId++};null==(i=this.wsLink.ws)||i.send(a(n))},addLoaclList(e,t){var s;this.recevieScenesData[this.wsLink.wId]=t=>{e(t)};const i={type:(null==t?void 0:t.contact_id)?"contact/local/set":"contact/local/add",id:this.wsLink.wId++,...t};null==(s=this.wsLink.ws)||s.send(a(i))},getCloundContactsList(e){var t;this.recevieScenesData[this.wsLink.wId]=t=>{if(!t.success)return o(h("errorMessage"),"error");this.cloundContactsList=t.result,e()};const s={type:"contact/intercom/get",id:this.wsLink.wId++};null==(t=this.wsLink.ws)||t.send(a(s))},setCloundContactsList(e,t){var s;this.recevieScenesData[this.wsLink.wId]=t=>{if(!t.success)return o(h("errorMessage"),"error");e()};const i={type:"contact/intercom/set",id:this.wsLink.wId++,...t};null==(s=this.wsLink.ws)||s.send(a(i))},exportLocalContactList(e){var t;this.recevieScenesData[this.wsLink.wId]=async t=>{var s;if(!t.success)return o(h("errorMessage"),"error");const i={file:null==(s=null==t?void 0:t.result)?void 0:s.file_path,_customSilentError:!0,responseType:"arraybuffer"};await c.commonDownLoad(i).then((t=>{const s=t.data;l(s,"LocalContact.tgz"),setTimeout((()=>{e()}),2e3)}))};const s={type:"contact/local/export",id:this.wsLink.wId++};null==(t=this.wsLink.ws)||t.send(a(s))}}});export{d as a,u as c,L as h,w as s};
