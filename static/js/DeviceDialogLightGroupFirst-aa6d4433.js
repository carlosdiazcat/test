import{_ as e,u as s,j as o,w as a,M as t,s as i,S as d,g as l,a as n,a0 as r,n as c,m as u}from"./Akubela-login-home-part-Vendor-facddf88.js";import{by as g,b as p,j as v,l as h,p as m,w,b4 as _,b5 as b,bd as k,be as f,bc as j,ba as D,v as G,bf as y,F as T,bl as A,b7 as C,q as I,b9 as S,bh as L}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const O={key:0,class:"linked-text"},V={key:1,class:"dia-devices-list"},$=["onClick"],x={class:"dia-row-left"},M={class:"devices-content-detail"},q={class:"devices-content-name"},B=C("div",{class:"dia-row-right"},null,-1),E={key:2,class:"dia-devices-no-data"},F=["src"],N={__name:"DeviceDialogLightGroupFirst",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(N,{emit:U}){const P=N,R=g((()=>e((()=>import("./DeviceDialogLightGroupSecond-a0d63822.js")),["static/js/DeviceDialogLightGroupSecond-a0d63822.js","static/js/Akubela-login-home-part-Vendor-facddf88.js","static/js/Akubela-element-plus-Vendor-47553b40.js","static/js/Akubela-devices-img-Vendor-0f46fa2c.js","static/js/Akubela-scenes-security-other-img-Vendor-2a1534ad.js"]))),{t:z}=s(),H=o(),{deviceCardObj:J}=H,K=a(),Q=p({recevieData:{},lightGroups:[],loading:!1,showSecond:!1,secondTitle:"",groupObj:{}}),W=r((()=>{var e,s;Q.recevieData[K.wId]=e=>{if(setTimeout((()=>{Q.loading=!1}),2e3),!e.success)return Q.loading=!1,c(z("errorMessage"),"error")};const o={type:"ak_device/light_group/add",link_device_ids:[null==(e=J.deviceDetail)?void 0:e.device_id],id:K.wId++};setTimeout((()=>{Q.loading=!1}),5e3),Q.loading=!0,null==(s=K.ws)||s.send(u(o))})),X=()=>{var e,s;Q.recevieData[K.wId]=e=>{if(Q.loading=!1,!e.success)return c(z("errorMessage"),"error");Q.lightGroups=e.result};const o={type:"ak_device/light_group/get_link_group",device_id:null==(e=J.deviceDetail)?void 0:e.device_id,id:K.wId++};setTimeout((()=>{Q.loading=!1}),5e3),Q.loading=!0,Q.lightGroups=[],null==(s=K.ws)||s.send(u(o))},Y=()=>{U("update:show",!1)},Z=e=>{Q.loading=!1,Q.secondTitle=e.name,Q.groupObj=e,Q.showSecond=!0},ee=v({get:()=>P.show,set:e=>{U("update:show",e)}});return h((()=>{t.on("$mitt_update_light_group",Z)})),m((()=>{t.off("$mitt_update_light_group")})),w((()=>K.updataId),(e=>{i(Q.recevieData,e,K)}),{immediate:!0}),w((()=>P.show),(e=>{e&&X()})),(e,s)=>{const o=L;return _(),b(T,null,[k((_(),f(n,{show:ee.value,"onUpdate:show":s[1]||(s[1]=e=>ee.value=e),class:"dia-light-group-first-device",title:e.$t("Linked Groups"),"foot-show":!1,onButtonCancel:Y},{content:j((()=>{var o;return[Q.lightGroups.length>0?(_(),b("div",O,D(e.$t("Groups linked with xx Devices",{currrent:null==(o=G(J).deviceDetail)?void 0:o.name})),1)):y("",!0),Q.lightGroups.length>0?(_(),b("div",V,[(_(!0),b(T,null,A(Q.lightGroups,(e=>(_(),b("div",{key:e.device_id,class:"dia-devices-row",onClick:s=>Z(e)},[C("div",x,[C("div",M,[C("div",q,[I(d,{content:e.name},null,8,["content"])])])]),B],8,$)))),128))])):(_(),b("div",E)),C("div",{class:"current-add-button",onClick:s[0]||(s[0]=(...e)=>G(W)&&G(W)(...e))},[C("img",{class:"current-add-button-icon",alt:"smart home,home automation,homekit,smart security,smart home systems,google home",src:G(l)("add_hover.webp")},null,8,F),S(" "+D(e.$t("Add New Group")),1)])]})),_:1},8,["show","title"])),[[o,Q.loading,void 0,{fullscreen:!0,lock:!0}]]),I(G(R),{show:Q.showSecond,"onUpdate:show":s[2]||(s[2]=e=>Q.showSecond=e),title:Q.secondTitle,"group-obj":Q.groupObj,onGetList:X,onChangeName:s[3]||(s[3]=e=>Q.secondTitle=e)},null,8,["show","title","group-obj"])],64)}}};export{N as default};
