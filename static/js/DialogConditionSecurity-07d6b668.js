import{h as e,u as i,w as t,a as o,n as s,s as a,b as c}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as l,j as n,w as d,b4 as r,b5 as u,q as m,bc as h,b7 as w,ba as v,bb as y,F as p,bl as f,bf as _,v as b}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const k={class:"condition-dia-security"},g={class:"condition-row-left"},S={class:"condition-left__span"},A={class:"condition-row-right"},C={key:0},D=["onClick"],j={class:"condition-child-row-security"},N={class:"condition-child-row"},z={class:"condition-child-row__left"},L=w("div",{class:"condition-child-row__right"},[w("div",{class:"common-row-triangle"})],-1),B={key:0,class:"condition-content-child"},E=["onClick"],V={class:"condition-child-row__left"},$={key:0,class:"condition-child-row__right"},O={class:"condition-row-left"},q={class:"condition-left__span"},x={class:"condition-row-right"},F={key:0},I=["onClick"],M={class:"condition-child-row-security"},R={class:"condition-child-row"},U={class:"condition-child-row__left"},G=w("div",{class:"condition-child-row__right"},[w("div",{class:"common-row-triangle"})],-1),H={key:0,class:"condition-content-child"},J=["onClick"],K={class:"condition-child-row__left"},P={key:0,class:"condition-child-row__right"},Q={__name:"DialogConditionSecurity",props:{show:{type:Boolean,required:!0,default:!1},type:{type:String,default:"condition"}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(Q,{emit:T}){const W=Q;let X=e();const{t:Y}=i();let Z=t();const ee=l({recevieData:{},defaultShow:!0,customizeShow:!1,securityNowObj:{},selectedArray:[{title:Y("Arming"),value:"Arm"},{title:Y("Disarm"),value:"Disarm"},{title:Y("Alarm"),value:"Alarm"}],sendData:{}}),ie=()=>{ee.customizeShow=!1,ee.defaultShow=!0},te=()=>{ee.defaultShow=!1,ee.customizeShow=!0},oe=e=>{X.baseSecurityList.forEach((e=>e.selected=!1)),X.areaSecurityList.forEach((e=>e.selected=!1)),e.selected=!0,ee.securityNowObj=e},se=()=>{T("update:show",!1),T("pop-closed")},ae=()=>{T("open-dia-show"),T("update:show",!1)},ce=()=>{if(!ue.value)return s(Y("please Select Security"),"error");"condition"===W.type?le():ne()},le=()=>{T("set-add-obj",ee.sendData),T("update:show",!1)},ne=()=>{const e={service:"automation.turn_on",target:{entity_id:ee.securityNowObj.entity_id}};T("set-add-obj",e),T("update:show",!1)},de=n({get:()=>W.show,set:e=>{T("update:show",e)}}),re=(e,i)=>{e.selectName=i.value,"Arm"===i.value||"Disarm"===i.value?ee.sendData={condition:"state",entity_id:e.entity_id,state:"Arm"===i.value?"on":"off"}:"Alarm"!==i.value&&"Alarm Release"!==i.value||(ee.sendData={condition:"state",entity_id:e.entity_id,state:"on",attribute:"is_alarm"})},ue=n((()=>{let e=!1;return ee.sendData.condition&&(e=!0),e}));return d((()=>Z.updataId),(e=>{a(ee.recevieData,e,Z)}),{immediate:!0}),d((()=>W.show),(e=>{e&&(ee.sendData={},X.baseSecurityList.forEach((e=>{e.selected=!1,e.selectName=""})),X.areaSecurityList.forEach((e=>{e.selected=!1,e.selectName=""})))})),(e,i)=>{const t=c;return r(),u("div",k,[m(o,{show:de.value,"onUpdate:show":i[0]||(i[0]=e=>de.value=e),"back-show":!0,"is-ash":!ue.value,title:e.$t("Security"),onButtonCancel:se,onButtonBack:ae,onButtonConfirm:ce},{content:h((()=>[w("div",null,[w("div",{class:"common-dialog-row",onClick:ie},[w("div",g,[w("span",S,v(e.$t("Default")),1)]),w("div",A,[w("div",{class:y(ee.customizeShow?"common-row-triangle":"common-row-triangle-bottom")},null,2)])]),ee.defaultShow?(r(),u("div",C,[(r(!0),u(p,null,f(b(X).baseSecurityList,(i=>(r(),u("div",{key:i.id,onClick:e=>oe(i)},[w("div",j,[w("div",N,[w("div",z,v(e.$t(i.name)),1),L]),i.selected?(r(),u("div",B,[(r(!0),u(p,null,f(ee.selectedArray,((e,o)=>(r(),u("div",{key:o,class:"condition-child-row",onClick:t=>re(i,e)},[w("div",V,v(e.title),1),i.selectName===e.value?(r(),u("div",$,[m(t,{"icon-class":"activeNik"})])):_("",!0)],8,E)))),128))])):_("",!0)])],8,D)))),128))])):_("",!0)]),w("div",null,[w("div",{class:"common-dialog-row",onClick:te},[w("div",O,[w("span",q,v(e.$t("Customize Mode")),1)]),w("div",x,[w("div",{class:y(ee.defaultShow?"common-row-triangle":"common-row-triangle-bottom")},null,2)])]),ee.customizeShow?(r(),u("div",F,[(r(!0),u(p,null,f(b(X).areaSecurityList,(e=>(r(),u("div",{key:e.id,onClick:i=>oe(e)},[w("div",M,[w("div",R,[w("div",U,v(e.name),1),G]),e.selected?(r(),u("div",H,[(r(!0),u(p,null,f(ee.selectedArray,((i,o)=>(r(),u("div",{key:o,class:"condition-child-row",onClick:t=>re(e,i)},[w("div",K,v(i.title),1),e.selectName===i.value?(r(),u("div",P,[m(t,{"icon-class":"activeNik"})])):_("",!0)],8,J)))),128))])):_("",!0)])],8,I)))),128))])):_("",!0)])])),_:1},8,["show","is-ash","title"])])}}};export{Q as default};
