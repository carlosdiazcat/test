import{r as e,b as a,l,bd as r,v as t,b4 as s,b5 as o,q as d,bc as n,b7 as i,ba as u,cd as m,bn as c,bA as b,bz as f,ce as p,bk as h,bB as g,bh as w}from"./Akubela-element-plus-Vendor-47553b40.js";import{_ as T}from"./index-722e1dac.js";import{an as V,u as P,R as v,q as _,n as N}from"./Akubela-login-home-part-Vendor-facddf88.js";import{s as E}from"./config-178dd060.js";import{h as j,c as y}from"./index-8f4b869f.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const $={class:"engr-status-mulit"},x={class:"card-header"},I={class:"ak-mulit-table"},U={class:"card-header"},k={class:"ak-mulit-table"},M={__name:"index",setup(M){V();const{t:A}=P(),D=e(null);let L=a({loading:!1,multicastTable:[{id:1,name:"",address:"",enable:!1},{id:2,name:"",address:"",enable:!1},{id:3,name:"",address:"",enable:!1},{id:4,name:"",address:"",enable:!1},{id:5,name:"",address:"",enable:!1}],listTable:[{id:1,name:"",address:"",enable:!1},{id:2,name:"",address:"",enable:!1},{id:3,name:"",address:"",enable:!1},{id:4,name:"",address:"",enable:!1},{id:5,name:"",address:"",enable:!1}]});const R=(e,a,l)=>{const{obj:r}=e,t=r.enable&&!a;if(v(a||"")>20||t)return l(new Error(A("Please enter a valid type",{type:A("Multicast Name")})));if(a){const{allData:r}=e;if(r.filter((e=>e&&e.name===a)).length>1)return l(A("Duplicate Name, please check data uniqueness"))}return l()},q=(e,a,l)=>{const{obj:r}=e,t=r.enable&&!a;if(v(a||"")>21||t)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(a){const e=a.split(":");if(2!==e.length)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(!_(e[1]))return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(Number(e[1])<1024||Number(e[1])>65535)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));const r=e[0].split(".");if(4!==r.length)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(!(_(r[0])&&_(r[1])&&_(r[2])&&_(r[3])))return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(Number(r[0])<224||Number(r[0])>239)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(Number(r[1])<0||Number(r[1])>255)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(Number(r[2])<0||Number(r[2])>255)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")));if(Number(r[3])<0||Number(r[3])>255)return l(new Error(A("Please set the correct address:The IP range is from 224.0.0.0 to 239.255.255.255,and the port range is from 1024 to 65535.")))}return l()},z=a({}),B=e=>{L.multicastTable=e.multicastTable,L.listTable=e.listTable};l((()=>{L.loading=!1,E.getMulticast(B)}));const C=()=>{},F=()=>{const e=L.multicastTable.map((e=>e.address)).filter((e=>e)),a=L.listTable.map((e=>e.address)).filter((e=>e)),l=e.concat(a);D.value.validate((e=>{let a=!0;if(l.forEach(((e,r)=>{const t=e.split(":");l.filter(((e,a)=>e.includes(t[0])&&r!==a)).forEach((e=>{const l=e.split(":");(function(e,a){const l=Math.abs(Number(e)-Number(a));return 1===l||0===l})(t[1],l[1])&&(a=!1)}))})),!a)return N(A("Multicast addresses do not support configuring adjacent port numbers."),"error");e&&E.setMulticast({multicastTable:L.multicastTable,listTable:L.listTable})}))};return(e,a)=>{const l=m,V=c,P=b,v=f,_=p,N=h,E=g,M=w;return r((s(),o("div",$,[d(E,{ref_key:"ruleFormRef",ref:D,class:"add-contacts-form commen-main-new",model:t(L),rules:z,inline:!0},{default:n((()=>[d(N,{class:"min-card"},{header:n((()=>[i("div",x,[i("span",null,u(e.$t("Multicast List")),1)])])),default:n((()=>[i("div",I,[d(_,{data:t(L).multicastTable,"header-cell-style":t(j),"cell-style":t(y),style:{borderRadius:"12px"}},{default:n((()=>[d(l,{label:e.$t("Index"),prop:"id",width:"150"},null,8,["label"]),d(l,{label:e.$t("Multicast Name"),"show-overflow-tooltip":""},{default:n((e=>[d(P,{prop:`multicastTable[${e.row.id-1}].name`,rules:[{obj:e.row,validator:R,trigger:"change",allData:t(L).multicastTable}]},{default:n((()=>[d(V,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,maxlength:20},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop","rules"])])),_:1},8,["label"]),d(l,{label:e.$t("Multicast Address"),"show-overflow-tooltip":""},{default:n((e=>[d(P,{class:"error-title",prop:`multicastTable[${e.row.id-1}].address`,rules:[{obj:e.row,validator:q,trigger:"change"}]},{default:n((()=>[d(V,{modelValue:e.row.address,"onUpdate:modelValue":a=>e.row.address=a,maxlength:21},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop","rules"])])),_:1},8,["label"]),d(l,{label:e.$t("Enable"),"show-overflow-tooltip":""},{default:n((e=>[d(v,{modelValue:e.row.enable,"onUpdate:modelValue":a=>e.row.enable=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"])])),_:1},8,["data","header-cell-style","cell-style"])])])),_:1}),d(N,{class:"engr-status-mulit-second min-card"},{header:n((()=>[i("div",U,[i("span",null,u(e.$t("Listening list")),1)])])),default:n((()=>[i("div",k,[d(_,{data:t(L).listTable,"header-cell-style":t(j),"cell-style":t(y),style:{borderRadius:"12px"}},{default:n((()=>[d(l,{label:e.$t("Index"),prop:"id",width:"150"},null,8,["label"]),d(l,{label:e.$t("Listening Name"),"show-overflow-tooltip":""},{default:n((e=>[d(P,{prop:`listTable[${e.row.id-1}].name`,rules:[{obj:e.row,validator:R,trigger:"change",allData:t(L).listTable}]},{default:n((()=>[d(V,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,maxlength:20},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop","rules"])])),_:1},8,["label"]),d(l,{label:e.$t("Listening Address"),"show-overflow-tooltip":""},{default:n((e=>[d(P,{class:"error-title",prop:`listTable[${e.row.id-1}].address`,rules:[{obj:e.row,validator:q,trigger:"change"}]},{default:n((()=>[d(V,{modelValue:e.row.address,"onUpdate:modelValue":a=>e.row.address=a,maxlength:21},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop","rules"])])),_:1},8,["label"]),d(l,{label:e.$t("Enable"),"show-overflow-tooltip":""},{default:n((e=>[d(v,{modelValue:e.row.enable,"onUpdate:modelValue":a=>e.row.enable=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"])])),_:1},8,["data","header-cell-style","cell-style"])])])),_:1})])),_:1},8,["model","rules"]),d(T,{onCancel:C,onSubmit:F})])),[[M,t(L).loading]])}}};export{M as default};
