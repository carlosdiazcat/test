import{_ as e,u as i,j as s,w as a,s as t,am as d,S as o,g as l,a as n,n as c,m as r,a0 as v}from"./Akubela-login-home-part-Vendor-facddf88.js";import{by as u,b as m,j as h,w,b4 as b,b5 as _,bd as g,be as p,bc as k,ba as f,bf as D,F as y,bl as j,bb as C,b7 as A,q as L,v as I,b9 as S,bh as M}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const V={key:0,class:"linked-text"},$={key:1,class:"dia-devices-list"},q={class:"dia-row-left"},x={class:"devices-content-detail"},B={class:"devices-content-name"},E=["onClick"],O={key:2,class:"dia-devices-no-data"},T=["src"],U={__name:"DeviceDialogMultiControlAssociationCurrent",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show"],setup(U,{emit:F}){const G=U,P=u((()=>e((()=>import("./DeviceDialogMultiControlAssociationAll-3cf72d0d.js")),["static/js/DeviceDialogMultiControlAssociationAll-3cf72d0d.js","static/js/Akubela-element-plus-Vendor-47553b40.js","static/js/Akubela-login-home-part-Vendor-facddf88.js","static/js/Akubela-devices-img-Vendor-0f46fa2c.js","static/js/Akubela-scenes-security-other-img-Vendor-2a1534ad.js"]))),{t:R}=i(),z=s(),{deviceCardObj:H}=z,J=a(),K=m({recevieData:{},devicesList:[],loading:!1,allShow:!1}),N=()=>{K.allShow=!0},Q=()=>{var e,i;K.recevieData[J.wId]=e=>{if(K.loading=!1,!e.success)return c(R("errorMessage"),"error");K.devicesList=e.result.device_list};const s={type:"device/link_ctrl/list",device_id:null==(e=H.deviceDetail)?void 0:e.device_id,linked:!0,id:J.wId++};setTimeout((()=>{K.loading=!1}),5e3),K.loading=!0,null==(i=J.ws)||i.send(r(s))},W=()=>{F("update:show",!1)},X=v((e=>{var i,s,a;if((null==(i=H.deviceDetail)?void 0:i.device_id)===e.device_id)return;K.recevieData[J.wId]=e=>{if(!e.success)return c(R("errorMessage"),"error");Q()};const t={type:"device/link_ctrl/set",device_id:null==(s=H.deviceDetail)?void 0:s.device_id,link_id:e.device_id,status:!1,id:J.wId++};null==(a=J.ws)||a.send(r(t))})),Y=h({get:()=>G.show,set:e=>{F("update:show",e)}}),Z=e=>{var i;return(null==(i=H.deviceDetail)?void 0:i.device_id)===e.device_id};return w((()=>J.updataId),(e=>{t(K.recevieData,e,J)}),{immediate:!0}),w((()=>G.show),(e=>{e&&Q()})),(e,i)=>{const s=M;return b(),_(y,null,[g((b(),p(n,{show:Y.value,"onUpdate:show":i[0]||(i[0]=e=>Y.value=e),class:"dia-multi-control-association-current-device",title:e.$t("Multi-Control Association"),"foot-show":!1,onButtonCancel:W},{content:k((()=>[K.devicesList.length>0?(b(),_("div",V,f(e.$t("Current linked")),1)):D("",!0),K.devicesList.length>0?(b(),_("div",$,[(b(!0),_(y,null,j(K.devicesList,(e=>(b(),_("div",{key:e.device_id,class:C(["dia-devices-row",{"dia-devices-row-dis":Z(e)}])},[A("div",q,[L(d,{"card-obj":e,online:!Z(e),"class-name":"trans"},null,8,["card-obj","online"]),A("div",x,[A("div",B,[L(o,{content:e.device_name},null,8,["content"])])])]),A("div",{class:C(["dia-row-right",{"dia-row-right-dis":Z(e)}]),onClick:i=>I(X)(e)},null,10,E)],2)))),128))])):(b(),_("div",O)),A("div",{class:"current-add-button",onClick:N},[A("img",{class:"current-add-button-icon",alt:"smart home,home automation,homekit,smart security,smart home systems,google home",src:I(l)("add_hover.webp")},null,8,T),S(" "+f(e.$t("Link with Swtich/Light")),1)])])),_:1},8,["show","title"])),[[s,K.loading,void 0,{fullscreen:!0,lock:!0}]]),L(I(P),{show:K.allShow,"onUpdate:show":i[1]||(i[1]=e=>K.allShow=e),onGetList:Q},null,8,["show"])],64)}}};export{U as default};
