import{w as e,a7 as t,s as a,g as s,a as o,m as i,u as n,n as d,j as c,aj as l,P as m,a8 as u}from"Akubela-login-home-part-Vendor-facddf88.js";import{_ as r}from"AddSettingDevcie-8f47d357.js";import{b as h,l as v,j as w,w as p,b4 as g,b5 as b,q as y,bc as _,b7 as S,ba as k,v as D,bf as f,bn as I,p as C,F as $,bl as L,be as x}from"Akubela-element-plus-Vendor-47553b40.js";const B={class:"setting-add-hue"},A={class:"hue-device-content"},j={class:"hue-add-title"},O={class:"hue-add__img"},U=["src"],W={key:0,class:"hue-add-remind"},P={__name:"index",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show","open-dia-show"],setup(n,{emit:d}){const c=n;let l=e();const m=t(),u=h({acceptData:{},apiKey:"",nextShow:!1,resultData:{},settingShow:!1,loading:!1,remind:!1});v((()=>{}));const I=()=>{d("open-dia-show"),d("update:show",!1)},C=w({get:()=>c.show,set:e=>{d("update:show",e)}}),$=()=>{var e,t;u.loading=!0,u.acceptData[l.wId]=L;const a={type:"config/ak_device/add_ecosystem",id:l.wId++,flow_id:null==(e=null==m?void 0:m.ecosystemList[0])?void 0:e.flow_id,gateway_device_id:m.gateWayDeviceId};null==(t=l.ws)||t.send(i(a))},L=e=>{var t,a;u.loading=!1,(null==(t=e.result)?void 0:t.status)?(m.nowDeviceObj={...m.nowDeviceObj,activeWebp:"devices/fibaro_hub.webp",flow_id:null==(a=null==m?void 0:m.ecosystemList[0])?void 0:a.flow_id,deviceId:e.result.device_ids[0],type_name:"Phillip Hue Bridge"},d("update:show",!1),u.nextShow=!0):u.remind=!0};return p((()=>l.updataId),(e=>{a(u.acceptData,e,l)}),{immediate:!0}),p((()=>c.show),(e=>{e?(u.remind=!1,u.loading=!1,u.nextShow=!1,m.ecosystemList=[],m.noSubscription(),m.getEcosystem(),m.getEcosWay()):m.ecosystemList=[]}),{immediate:!0}),(e,t)=>(g(),b("div",B,[y(o,{show:C.value,"onUpdate:show":t[0]||(t[0]=e=>C.value=e),"back-show":!0,"class-name":"add-setting-hue-dialog",title:e.$t("Add Phillip Hue Bridge"),"ok-loading":u.loading,"button-ok-name":e.$t("Next"),onButtonBack:I,onButtonCancel:t[1]||(t[1]=e=>d("update:show",!1)),onButtonConfirm:$},{content:_((()=>[S("div",A,[S("div",j,k(e.$t("Press the button on the bridge to continue.")),1),S("div",O,[S("img",{alt:"smart home",src:D(s)("devices_other/press-bridge-hue.webp")},null,8,U)]),u.remind?(g(),b("div",W,k(e.$t("Fail to register, please try again.")),1)):f("",!0)])])),_:1},8,["show","title","ok-loading","button-ok-name"]),y(r,{show:u.nextShow,"onUpdate:show":t[2]||(t[2]=e=>u.nextShow=e),onOpenDiaShow:t[3]||(t[3]=e=>d("update:show",!0))},null,8,["show"])]))}},N={class:"setting-add-shelly"},V={class:"ecobee-device-content"},q={class:"ecobee-add-title"},M={class:"ecobee-add-bottom"},R={class:"ecobee-apk__text"},T={class:"ecobee-apk__input"},E={class:"ecobee-add-bottom"},G={class:"ecobee-apk__text"},F={class:"ecobee-apk__input"},H={class:"ecobee-can-to"},z={__name:"index",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show","open-dia-show"],setup(s,{emit:c}){const l=s,{t:m}=n();let u=e();const w=t(),D=h({diaShow:!1,acceptData:{},username:"",password:"",twoShow:!1,resultData:{},settingShow:!1,loading:!1});v((()=>{}));const f=()=>{c("open-dia-show"),c("update:show",!1)},C=()=>{c("update:show",!0)},$=()=>{var e,t;D.loading=!0,D.acceptData[u.wId]=L;const a={type:"config/ak_device/add_ecosystem",id:u.wId++,flow_id:null==(e=null==w?void 0:w.ecosystemList[0])?void 0:e.flow_id,data:{username:D.username,password:D.password}};null==(t=u.ws)||t.send(i(a))},L=e=>{var t,a;if(D.loading=!1,!(null==(t=e.result)?void 0:t.status))return d(m("Wrong input. Please check your input data."),"error");(null==(a=e.result)?void 0:a.status)&&(w.nowDeviceObj.deviceId=e.result.device_ids[0],c("update:show",!1),D.twoShow=!0)};return p((()=>u.updataId),(e=>{a(D.acceptData,e,u)}),{immediate:!0}),p((()=>l.show),(e=>{D.diaShow=e,e&&(D.username="",D.password="",D.loading=!1,D.twoShow=!1)}),{immediate:!0}),(e,t)=>{const a=I;return g(),b("div",N,[y(o,{show:D.diaShow,"onUpdate:show":t[2]||(t[2]=e=>D.diaShow=e),"back-show":!0,title:e.$t("Add Device"),"button-ok-name":e.$t("Next"),"ok-loading":D.loading,"is-ash":!D.password,onButtonBack:f,onButtonCancel:t[3]||(t[3]=e=>c("update:show",!1)),onButtonConfirm:$},{content:_((()=>[S("div",V,[S("div",q,k(e.$t("Please enter the username and password to connect to the device.")),1),S("div",M,[S("div",R,k(e.$t("Username")),1),S("div",T,[y(a,{modelValue:D.username,"onUpdate:modelValue":t[0]||(t[0]=e=>D.username=e)},null,8,["modelValue"])])]),S("div",E,[S("div",G,k(e.$t("Password")),1),S("div",F,[y(a,{modelValue:D.password,"onUpdate:modelValue":t[1]||(t[1]=e=>D.password=e),type:"password"},null,8,["modelValue"])])])])])),_:1},8,["show","title","button-ok-name","ok-loading","is-ash"]),S("div",H,[y(r,{show:D.twoShow,"onUpdate:show":t[4]||(t[4]=e=>D.twoShow=e),onOpenDiaShow:C},null,8,["show"])])])}}},K={class:"add-setting-connect"},J={class:"device-setting-box"},Q={class:"device-setting-box-left"},X={class:"device-setting-avatar"},Y=["src"],Z={class:"device-setting-name"},ee={class:"device-setting-box-right"},te={class:"device-right-row"},ae=["src"],se={class:"device-row__span"},oe={class:"device-right-row"},ie=["src"],ne={class:"device-row__span"},de={class:"device-right-row"},ce=["src"],le={class:"device-row__span"},me={class:"type-content-right-bottom"},ue={key:0,class:"type-bottom-box"},re={__name:"AddIsConnect",props:{show:{type:Boolean,required:!0,default:!1},replace:{type:Boolean,required:!1,default:!1}},emits:["update:show","open-dia-show"],setup(d,{emit:u}){const I=d;let C=c();const $=t();n();let L=e();const x=h({recevieData:{},showLoadingImg:!0,connect:!1,settingShow:!1,isCancelCan:!1,shellyShow:!1,stepId:""});v((()=>{}));const B=()=>{$.addDeviceList=[],$.ecosystemList=[],x.isCancelCan=!0,u("open-dia-show"),u("update:show",!1)},A=w({get:()=>I.show,set:e=>{u("update:show",e)}}),j=e=>{x.showLoadingImg=!1,$.nowDeviceObj.deviceId=e.result.device_id,x.connect=e.result.status},O=()=>{var e;x.recevieData[L.wId]=U;const t={type:"config/ak_device/add_ecosystem",id:L.wId++,flow_id:$.nowDeviceObj.flow_id,gateway_device_id:$.gateWayDeviceId};x.shellyShow=!1,x.stepId="",null==(e=L.ws)||e.send(i(t))},U=e=>{var t;x.showLoadingImg=!1,$.nowDeviceObj.deviceId=e.result.device_ids[0],x.connect=e.result.status,(null==(t=e.result)?void 0:t.step_id)&&(x.stepId=e.result.step_id)},W=()=>x.connect?(u("update:show",!1),x.stepId?x.shellyShow=!0:void(x.settingShow=!0)):B();return p((()=>L.updataId),(e=>{a(x.recevieData,e,L)}),{immediate:!0}),p((()=>I.show),(e=>{if(e)x.isCancelCan=!1,C.getRoomList(),(()=>{var e,t;if("devices/add_device_somfy.webp"===(null==(e=$.nowDeviceObj)?void 0:e.activeWebp))return x.showLoadingImg=!1,void(x.connect=!0);if(x.showLoadingImg=!0,"ecosystem"===$.type)return O();x.recevieData[L.wId]=j;const a={type:"config/ak_device/connect_status",id:L.wId++,mac:$.nowDeviceObj.mac,device_id:$.gateWayDeviceId};null==(t=L.ws)||t.send(i(a))})();else{if(x.isCancelCan)return;$.cancelGetAkScan()}})),(e,t)=>(g(),b("div",K,[y(o,{show:A.value,"onUpdate:show":t[0]||(t[0]=e=>A.value=e),"foot-show":!1,"back-show":!0,title:I.replace?e.$t("Replace Device"):e.$t("Add device"),onButtonBack:B,onButtonCancel:t[1]||(t[1]=e=>u("update:show",!1))},{content:_((()=>{var t,a;return[S("div",J,[S("div",Q,[S("div",X,[S("img",{alt:"smart home",src:D(s)(null==(t=D($).nowDeviceObj)?void 0:t.activeWebp)},null,8,Y)]),S("div",Z,k(e.$t(D(l)(null==(a=D($).nowDeviceObj)?void 0:a.type_name))),1)]),S("div",ee,[S("div",te,[S("img",{alt:"smart home",class:"device-row__img",src:x.showLoadingImg?D(s)("devices/add_device_loading.webp"):x.connect?D(s)("devices/succeed.webp"):D(s)("devices/fail.webp")},null,8,ae),S("span",se,k(e.$t("Connected devices")),1)]),S("div",oe,[S("img",{alt:"smart home",class:"device-row__img",src:x.showLoadingImg?D(s)("devices/add_device_loading.webp"):x.connect?D(s)("devices/succeed.webp"):D(s)("devices/fail.webp")},null,8,ie),S("span",ne,k(e.$t("Register on Cloud")),1)]),S("div",de,[S("img",{alt:"smart home",class:"device-row__img",src:x.showLoadingImg?D(s)("devices/add_device_loading.webp"):x.connect?D(s)("devices/succeed.webp"):D(s)("devices/fail.webp")},null,8,ce),S("span",le,k(e.$t("Device connection succeeded")),1)])])]),S("div",me,[x.showLoadingImg?f("",!0):(g(),b("div",ue,[y(m,{"akubela-test":"device-add-next","class-name":x.connect?"primary":"disabled","button-name":x.connect?e.$t("Next"):e.$t("Back"),onClick:W},null,8,["class-name","button-name"])]))])]})),_:1},8,["show","title"]),y(z,{show:x.shellyShow,"onUpdate:show":t[2]||(t[2]=e=>x.shellyShow=e),onOpenDiaShow:t[3]||(t[3]=e=>u("update:show",!0))},null,8,["show"]),y(r,{show:x.settingShow,"onUpdate:show":t[4]||(t[4]=e=>x.settingShow=e),replace:I.replace,onOpenDiaShow:t[5]||(t[5]=e=>u("update:show",!0))},null,8,["show","replace"])]))}},he={class:"device-scan-page"},ve={class:"device-scan-box"},we={class:"device-scan-top"},pe={class:"device-scan-left"},ge={class:"device-scan-title"},be={class:"device-scan-title"},ye={key:0,class:"device-scan-right"},_e=["src"],Se={key:0,class:"device-scan-animate"},ke=["src"],De=["src"],fe={key:1,class:"device-scan-add"},Ie=["akubela-test","onClick"],Ce={class:"scan-add-box"},$e=["src"],Le={class:"scan-add-box-name"},xe={key:2,class:"device-scan-add"},Be=["akubela-test","onClick"],Ae={class:"scan-add-box"},je=["src"],Oe={class:"scan-add-box-name"},Ue={class:"device-time-out"},We={key:0},Pe={__name:"AddDeviceScan",props:{show:{type:Boolean,required:!0,default:!1},replace:{type:Boolean,required:!1,default:!1}},emits:["update:show","open-dia-show"],setup(e,{emit:a}){const i=e;n();const d=t();let r=c();const I=h({settingDeviceShow:!1,allDevicesAvatar:[],hueShow:!1,socketsAvatar:[{typeName:"Smart Plug",activeWebp:"devices/add_five_plug.webp"}],autoTime:"",timeScan:120,nowShow:!0});v((()=>{var e,t;I.allDevicesAvatar=null==(t=null==(e=u)?void 0:e.concat)?void 0:t.call(e,I.socketsAvatar)}));const B=e=>{if(d.nowDeviceObj={...e,activeWebp:O(e.type_name)},"Phillip Hue Bridge"===d.nowDeviceObj.type_name)return I.hueShow=!0,a("update:show",!1);I.settingDeviceShow=!0,a("update:show",!1)},A=()=>{a("update:show",!0)},j=()=>{d.noSubscription(),a("update:show",!1),I.hueShow||I.settingDeviceShow||d.cancelGetAkScan()},O=e=>{var t,a;let s=null==(a=null==(t=I.allDevicesAvatar)?void 0:t.find)?void 0:a.call(t,(t=>e===(null==t?void 0:t.typeName)||e===(null==t?void 0:t.value)?t:void 0));return(null==s?void 0:s.activeWebp)||(null==s?void 0:s.addWebp)||(null==s?void 0:s.transparent)||"devices/add_device_Unknown.webp"},U=()=>{d.noSubscription(),a("open-dia-show"),a("update:show",!1),I.hueShow||I.settingDeviceShow||d.cancelGetAkScan()},W=()=>{I.timeScan=120,d.noSubscription(),"ecosystem"===d.type&&"Curtain"!==d.ecosystemName?(d.getEcosystem(),d.getEcosWay()):(d.getAkScan(),d.isReplace=i.replace,i.replace?d.replayDevice():d.getScanWay()),N()},N=()=>{V(),I.autoTime=setTimeout((()=>{if(I.timeScan>0&&(I.timeScan=I.timeScan-1,N()),0===I.timeScan){if(V(),I.hueShow||I.settingDeviceShow)return;d.cancelGetAkScan()}}),1e3)},V=()=>{clearTimeout(I.autoTime)},q=w({get:()=>i.show,set:e=>{a("update:show",e)}});return p((()=>i.show),(e=>{e?(d.replaceIsConnect="",I.timeScan=120,d.isReplace=i.replace,i.replace&&(d.zigbeeName=r.deviceCurrent.productType,d.replaceIsConnect=!0),W()):V()}),{immediate:!0}),C((()=>{V()})),(e,t)=>(g(),b("div",he,[y(o,{show:q.value,"onUpdate:show":t[0]||(t[0]=e=>q.value=e),"foot-show":!1,"back-show":!0,title:i.replace?e.$t("Replace Device"):e.$t("Add device"),onButtonBack:U,onButtonCancel:j},{content:_((()=>{var t,a,o,i,n,c,u,r,h,v,w,p;return[S("div",ve,[S("div",we,[S("div",pe,[S("div",ge,k(e.$t("Scanning for nearby devices")),1),S("div",be,k(I.timeScan||0!==(null==(t=D(d))?void 0:t.addDeviceList.length)||0!==(null==(a=D(d))?void 0:a.ecosystemList.length)?e.$t("Please make sure the device is in the state of network"):e.$t("No Devices Found")),1)]),(null==(o=D(d))?void 0:o.ecosystemList.length)>0&&I.timeScan?(g(),b("div",ye,[S("img",{alt:"smart home",src:D(s)("devices/wide_small.webp"),class:"animate-center"},null,8,_e)])):f("",!0)]),(null==(n=null==(i=D(d))?void 0:i.addDeviceList)?void 0:n.length)||(null==(u=null==(c=D(d))?void 0:c.ecosystemList)?void 0:u.length)?f("",!0):(g(),b("div",Se,[I.timeScan?(g(),b("img",{key:0,alt:"smart home",src:D(s)("devices_other/wide_big.webp"),class:"animate-center"},null,8,ke)):f("",!0),I.timeScan?f("",!0):(g(),b("img",{key:1,alt:"smart home",src:D(s)("devices/search_timeout.webp"),class:"animate-icon"},null,8,De))])),(null==(r=D(d))?void 0:r.addDeviceList.length)>0?(g(),b("div",fe,[(g(!0),b($,null,L(null==(h=D(d))?void 0:h.addDeviceList,((t,a)=>(g(),b("div",{key:a,"akubela-test":`device-add-scan-add-box-${null==t?void 0:t.type_name}`,onClick:e=>B(t)},[S("div",Ce,[S("img",{alt:"smart home",src:D(s)(O(t.type_name))},null,8,$e)]),S("div",Le,[S("p",null,k(e.$t(D(l)(t.type_name))),1)])],8,Ie)))),128))])):f("",!0),(null==(v=D(d))?void 0:v.ecosystemList.length)>0?(g(),b("div",xe,[(g(!0),b($,null,L(null==(w=D(d))?void 0:w.ecosystemList,((t,a)=>(g(),b("div",{key:a,"akubela-test":`device-add-scan-add-box-${null==t?void 0:t.type_name}`,onClick:e=>B(t)},[S("div",Ae,[S("img",{alt:"smart home",src:D(s)(O(t.type_name))},null,8,je)]),S("div",Oe,[S("p",null,k(e.$t(D(l)(t.type_name))),1)])],8,Be)))),128))])):f("",!0),S("div",Ue,[I.timeScan?(g(),b("div",We,k((p=I.timeScan,(Math.floor(p/60%60)<10?"0"+Math.floor(p/60%60):Math.floor(p/60%60))+":"+(Math.floor(p%60)<10?"0"+Math.floor(p%60):Math.floor(p%60)))),1)):f("",!0),I.timeScan?f("",!0):(g(),x(m,{key:1,class:"device-time-scan","button-name":e.$t("Scan again"),onClick:W},null,8,["button-name"]))])])]})),_:1},8,["show","title"]),y(re,{show:I.settingDeviceShow,"onUpdate:show":t[1]||(t[1]=e=>I.settingDeviceShow=e),replace:i.replace,onOpenDiaShow:A},null,8,["show","replace"]),y(P,{show:I.hueShow,"onUpdate:show":t[2]||(t[2]=e=>I.hueShow=e),onOpenDiaShow:A},null,8,["show"])]))}};export{Pe as _,re as a};
