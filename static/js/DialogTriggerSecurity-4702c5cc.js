import{h as e,u as t,w as i,a as o,n as a,s,b as l}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as c,j as n,w as d,b4 as r,b5 as u,q as m,bc as v,b7 as h,ba as w,bb as f,F as y,bl as p,bf as b,v as k}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const _={class:"condition-dia-security"},g={class:"condition-row-left"},S={class:"condition-left__span"},A={class:"condition-row-right"},C={key:0},D=["onClick"],j={class:"condition-child-row-security"},N={class:"condition-child-row"},$=["akubela-test"],z=h("div",{class:"condition-child-row__right"},[h("div",{class:"common-row-triangle"})],-1),L={key:0,class:"condition-content-child"},B=["onClick"],E=["akubela-test"],V={key:0,class:"condition-child-row__right"},O={class:"condition-row-left"},R={class:"condition-left__span"},q={class:"condition-row-right"},x={key:0},F=["onClick"],I={class:"condition-child-row-security"},M={class:"condition-child-row"},T={class:"condition-child-row__left"},U=h("div",{class:"condition-child-row__right"},[h("div",{class:"common-row-triangle"})],-1),G={key:0,class:"condition-content-child"},H=["onClick"],J={class:"condition-child-row__left"},K={key:0,class:"condition-child-row__right"},P={__name:"DialogTriggerSecurity",props:{show:{type:Boolean,required:!0,default:!1},type:{type:String,default:"condition"}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(P,{emit:Q}){const W=P;let X=e();const{t:Y}=t();let Z=i();const ee=c({recevieData:{},defaultShow:!0,customizeShow:!1,securityNowObj:{},selectedArray:[{title:Y("Arming"),value:"Arm"},{title:Y("Disarm"),value:"Disarm"},{title:Y("Alarm"),value:"Alarm"},{title:Y("Alarm Release"),value:"Alarm Release"}],sendData:{}}),te=()=>{Q("update:show",!1),Q("pop-closed")},ie=()=>{ee.customizeShow=!1,ee.defaultShow=!0},oe=()=>{ee.defaultShow=!1,ee.customizeShow=!0},ae=e=>{X.baseSecurityList.forEach((e=>e.selected=!1)),X.areaSecurityList.forEach((e=>e.selected=!1)),e.selected=!0,ee.securityNowObj=e},se=()=>{Q("open-dia-show"),Q("update:show",!1)},le=()=>{if(!ue.value)return a(Y("please Select Security"),"error");"condition"===W.type?ce():ne()},ce=()=>{Q("set-add-obj",ee.sendData),Q("update:show",!1)},ne=()=>{const e={service:"automation.turn_on",target:{entity_id:ee.securityNowObj.entity_id}};Q("set-add-obj",e),Q("update:show",!1)},de=n({get:()=>W.show,set:e=>{Q("update:show",e)}}),re=(e,t)=>{e.selectName=t.value,"Arm"===t.value||"Disarm"===t.value?ee.sendData={platform:"state",entity_id:e.entity_id,from:"Arm"===t.value?"off":"on",to:"Arm"===t.value?"on":"off"}:"Alarm"!==t.value&&"Alarm Release"!==t.value||(ee.sendData={platform:"state",entity_id:e.entity_id,attribute:"is_alarm",from:"Alarm"===t.value?"off":"on",to:"Alarm"===t.value?"on":"off"})},ue=n((()=>{let e=!1;return ee.sendData.platform&&(e=!0),e}));return d((()=>Z.updataId),(e=>{s(ee.recevieData,e,Z)}),{immediate:!0}),d((()=>W.show),(e=>{e&&(ee.sendData={},X.baseSecurityList.forEach((e=>{e.selected=!1,e.selectName=""})),X.areaSecurityList.forEach((e=>{e.selected=!1,e.selectName=""})))})),(e,t)=>{const i=l;return r(),u("div",_,[m(o,{show:de.value,"onUpdate:show":t[0]||(t[0]=e=>de.value=e),"back-show":!0,"is-ash":!ue.value,title:e.$t("Security"),class:"akubela-test-trigger-dia-security",onButtonCancel:te,onButtonBack:se,onButtonConfirm:le},{content:v((()=>[h("div",null,[h("div",{class:"common-dialog-row",onClick:ie},[h("div",g,[h("span",S,w(e.$t("Default")),1)]),h("div",A,[h("div",{class:f(ee.customizeShow?"common-row-triangle":"common-row-triangle-bottom")},null,2)])]),ee.defaultShow?(r(),u("div",C,[(r(!0),u(y,null,p(k(X).baseSecurityList,(t=>(r(),u("div",{key:t.id,onClick:e=>ae(t)},[h("div",j,[h("div",N,[h("div",{class:"condition-child-row__left","akubela-test":`scenes-add-trigger-security-${null==t?void 0:t.name}`},w(e.$t(t.name)),9,$),z]),t.selected?(r(),u("div",L,[(r(!0),u(y,null,p(ee.selectedArray,((e,o)=>(r(),u("div",{key:o,class:"condition-child-row",onClick:i=>re(t,e)},[h("div",{class:"condition-child-row__left","akubela-test":`scenes-add-trigger-security-${null==t?void 0:t.name}-${null==e?void 0:e.value}`},w(e.title),9,E),t.selectName===e.value?(r(),u("div",V,[m(i,{"icon-class":"activeNik"})])):b("",!0)],8,B)))),128))])):b("",!0)])],8,D)))),128))])):b("",!0)]),h("div",null,[h("div",{class:"common-dialog-row",onClick:oe},[h("div",O,[h("span",R,w(e.$t("Customize Mode")),1)]),h("div",q,[h("div",{class:f(ee.defaultShow?"common-row-triangle":"common-row-triangle-bottom")},null,2)])]),ee.customizeShow?(r(),u("div",x,[(r(!0),u(y,null,p(k(X).areaSecurityList,(e=>(r(),u("div",{key:e.id,onClick:t=>ae(e)},[h("div",I,[h("div",M,[h("div",T,w(e.name),1),U]),e.selected?(r(),u("div",G,[(r(!0),u(y,null,p(ee.selectedArray,((t,o)=>(r(),u("div",{key:o,class:"condition-child-row",onClick:i=>re(e,t)},[h("div",J,w(t.title),1),e.selectName===t.value?(r(),u("div",K,[m(i,{"icon-class":"activeNik"})])):b("",!0)],8,H)))),128))])):b("",!0)])],8,F)))),128))])):b("",!0)])])),_:1},8,["show","is-ash","title"])])}}};export{P as default};
