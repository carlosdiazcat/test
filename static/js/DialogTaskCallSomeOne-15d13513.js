import{j as e,u as a,w as s,m as o,n as l,a as t,s as i,b as n}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as d,l as c,j as r,w as m,b4 as u,b5 as p,q as v,bc as f,b7 as h,F as w,bl as g,bb as b,ba as k}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const y={class:"scenes-dia-call-one"},j={class:"common-call-some-box"},_=["onClick"],L={class:"common-dialog-left"},B={class:"common-dialog-right"},C={__name:"DialogTaskCallSomeOne",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(C,{emit:D}){const x=C;let A=e();const{t:I}=a();let V=s();const S=d({recevieData:{},defaultShow:!0,familyList:[],loading:!1});c((()=>{S.loading=!0,setTimeout((()=>{T()}),1e3)}));const T=()=>{var e;S.recevieData[V.wId]=q;const a={mode:2,type:"homeassistant/contacts_automation",id:V.wId++};S.loading=!0,setTimeout((()=>{S.loading=!1}),1e4),null==(e=V.ws)||e.send(o(a))},q=e=>{var a,s;if(S.loading=!1,!e.success)return l(I("errorMessage"),"error");S.familyList=e.result,S.familyList=null==(s=null==(a=e.result)?void 0:a.filter)?void 0:s.call(a,(e=>e.id!==A.mainDeviceId))},E=()=>{D("open-dia-show"),D("update:show",!1)},F=()=>{D("update:show",!1),D("pop-closed")},O=()=>{const e={make_call:[]};S.familyList.forEach((a=>{var s,o;a.selected&&(null==(o=null==(s=e.make_call)?void 0:s.push)||o.call(s,a.id))})),D("set-add-obj",e),D("update:show",!1)},G=r((()=>{var e,a;return null==(a=null==(e=S.familyList)?void 0:e.filter)?void 0:a.call(e,(e=>"Family Group"!==(null==e?void 0:e.name)))})),M=r({get:()=>x.show,set:e=>{D("update:show",e)}}),U=r((()=>{let e=!1;return S.familyList.forEach((a=>{a.selected&&(e=!0)})),e}));return m((()=>V.updataId),(e=>{i(S.recevieData,e,V)}),{immediate:!0}),(e,a)=>{const s=n;return u(),p("div",y,[v(t,{show:M.value,"onUpdate:show":a[0]||(a[0]=e=>M.value=e),"back-show":!0,"is-ash":!U.value,title:e.$t("callSomeOne"),loading:S.loading,onButtonCancel:F,onButtonBack:E,onButtonConfirm:O},{content:f((()=>[h("div",j,[(u(!0),p(w,null,g(G.value,(e=>(u(),p("div",{key:e.id,class:"common-dialog-row",onClick:a=>(e=>{e.selected=!e.selected})(e)},[h("div",L,[h("div",{class:b(["common-dialog-row-left-text",e.selected?"common-dialog-row-left-text-active":""])},k(e.name),3)]),h("div",B,[v(s,{"icon-class":e.selected?"tick_active":""},null,8,["icon-class"])])],8,_)))),128))])])),_:1},8,["show","is-ash","title","loading"])])}}};export{C as default};
