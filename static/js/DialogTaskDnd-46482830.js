import{j as e,u as t,w as s,n as a,m as o,a as l,s as n,b as c}from"./Akubela-login-home-part-Vendor-facddf88.js";import{b as i,l as d,j as r,w as u,b4 as m,b5 as v,q as w,bc as g,b7 as f,F as p,bl as _,bb as h,ba as b}from"./Akubela-element-plus-Vendor-47553b40.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const k={class:"scenes-dia-dnd"},y={class:"common-dnd-content"},L=["onClick"],j={class:"common-dialog-left"},D={class:"common-dialog-right"},C={class:"gateway-content"},B=["onClick"],E={class:"item__selected-left"},A={class:"item__selected-right"},V={key:0,class:"item__select"},x={key:1,class:"item__selected_webp"},I={__name:"DialogTaskDnd",props:{show:{type:Boolean,required:!0,default:!1}},emits:["update:show","open-dia-show","set-add-obj","pop-closed"],setup(I,{emit:T}){const q=I;e();const{t:$}=t();let F=s();const M=i({recevieData:{},gatewayList:[],loading:!1,actionsList:[{name:"turn_on",value:"turn_on",selected:!0},{name:"turn_off",value:"turn_off",selected:!1}]});d((()=>{setTimeout((()=>{N()}),500)}));const N=()=>{var e;M.recevieData[F.wId]=e=>{if(M.loading=!1,!e.success)return a($("errorMessage"),"error");M.gatewayList=e.result};const t={type:"config/ak_device/gateway",id:F.wId++,need_all:!0};M.loading=!0,setTimeout((()=>{M.loading=!1}),5e3),null==(e=F.ws)||e.send(o(t))},U=()=>{T("open-dia-show"),T("update:show",!1)},z=()=>{T("update:show",!1),T("pop-closed")},G=()=>{const e=M.actionsList.find((e=>e.selected)),t=[];M.gatewayList.forEach((e=>{e.selected&&t.push(e.device_id)}));const s={dnd:{action:e.value,target_ids:t}};T("set-add-obj",s),T("update:show",!1)},H=r({get:()=>q.show,set:e=>{M.actionsList=[{name:"turn_on",value:"turn_on",selected:!0},{name:"turn_off",value:"turn_off",selected:!1}],M.gatewayList.forEach((e=>{e.selected=!1})),T("update:show",e)}}),J=r((()=>{let e=!1;return M.gatewayList.forEach((t=>{t.selected&&(e=!0)})),e}));return u((()=>F.updataId),(e=>{n(M.recevieData,e,F)}),{immediate:!0}),(e,t)=>{const s=c;return m(),v("div",k,[w(l,{show:H.value,"onUpdate:show":t[0]||(t[0]=e=>H.value=e),"back-show":!0,"is-ash":!J.value,title:e.$t("DND"),loading:M.loading,onButtonCancel:z,onButtonBack:U,onButtonConfirm:G},{content:g((()=>[f("div",y,[(m(!0),v(p,null,_(M.actionsList,(t=>(m(),v("div",{key:t.value,class:"common-dialog-row",onClick:e=>(e=>{e.selected||(e.selected=!e.selected,M.gatewayList.forEach((e=>{e.selected=!1}))),M.actionsList.forEach((t=>{t.value!==e.value&&(t.selected=!1)}))})(t)},[f("div",j,[f("div",{class:h(["common-dialog-row-left-text",t.selected?"common-dialog-row-left-text-active":""])},b(e.$t(t.name)),3)]),f("div",D,[w(s,{"icon-class":t.selected?"tick_active":""},null,8,["icon-class"])])],8,L)))),128)),f("div",C,[(m(!0),v(p,null,_(M.gatewayList,(e=>(m(),v("div",{key:e.device_id,class:"gateway-content-row",onClick:t=>(e=>{e.selected=!e.selected})(e)},[f("div",E,b(e.name),1),f("div",A,[e.selected?(m(),v("div",x)):(m(),v("div",V))])],8,B)))),128))])])])),_:1},8,["show","is-ash","title","loading"])])}}};export{I as default};
