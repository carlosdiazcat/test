import{b as e,l,b4 as a,b5 as t,F as o,bl as i,b7 as n,q as r,ba as d,v as c,bf as s,bc as u,b9 as m,bn as v,bj as _,r as p,j as f,be as g,bA as b,bw as h,bx as y,cp as w,cr as V,cc as x,bB as k,bd as S,br as D,cg as A,bo as L,cd as $,ce as C,bh as U}from"./Akubela-element-plus-Vendor-47553b40.js";import{d as R,m as j,s as N,a as M,c as I,b as T}from"./config-178dd060.js";import{u as E,a_ as B,n as O,j as F,p as P,a as z,a$ as H,Q as q,b0 as K,b1 as W,b2 as G,ao as Q,b3 as J,b4 as X,b5 as Y,q as Z,an as ee}from"./Akubela-login-home-part-Vendor-facddf88.js";import{_ as le}from"./index-d8b1faeb.js";import{_ as ae}from"./index-47428c0f.js";import{h as te,c as oe}from"./index-8f4b869f.js";import"./Akubela-devices-img-Vendor-0f46fa2c.js";import"./Akubela-scenes-security-other-img-Vendor-2a1534ad.js";const ie={class:"engr-mode-input"},ne={class:"common-mode-box-row"},re=["onClick"],de={key:0,class:"common-mode-box-waring"},ce={key:1,class:"common-mode-box-waring"},se={class:"common-mode-box-row-button"},ue={__name:"index",props:{arrayModes:{type:Array,default:()=>[]},objkey:{type:String,default:""}},emits:["set-mode"],setup(p,{expose:f,emit:g}){const b=p,{t:h}=E(),y=e({arrayModes:[],fiflterName:R()});l((()=>{V()}));const w=()=>{g("set-mode",b.objkey,y.arrayModes)},V=e=>{let l=b.arrayModes;e&&(l=e),y.arrayModes=l.map((e=>({...e,value:h(e.value),newKey:e.id+e.value}))),g("set-mode",b.objkey,y.arrayModes)},x=()=>{var e,l;if(y.arrayModes.length>=30)return O(h("The custom quantity limit has been exceeded"),"error");let a="";const t=y.arrayModes.map((e=>Number(e.id)));for(let o=0;o<(null==(e=y.arrayModes)?void 0:e.length)&&(a=o+1,t.includes(a));o++);if(y.arrayModes.some((e=>Number(null==e?void 0:e.id)===Number(a))))for(let o=0;o<(null==(l=y.arrayModes)?void 0:l.length)&&(a=Number(y.arrayModes[o].id)+1,t.includes(a));o++);a=a||"1",y.arrayModes.push({value:"",id:("0"+a).slice(-2)}),w()};return f({init:V}),(e,l)=>{const p=v,f=_;return a(),t("div",ie,[(a(!0),t(o,null,i(y.arrayModes,(l=>(a(),t("div",{key:l.newKey,class:"common-mode-box"},[n("div",ne,[r(p,{modelValue:l.id,"onUpdate:modelValue":e=>l.id=e,maxlength:2,class:"common-mode-box-row-idinput",onBlur:w},null,8,["modelValue","onUpdate:modelValue"]),r(p,{modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,class:"common-mode-box-row-nameinput",maxlength:18,onChange:w},null,8,["modelValue","onUpdate:modelValue"]),n("div",{class:"common-mode-box-delete",onClick:e=>(e=>{y.arrayModes=y.arrayModes.filter((l=>l.id!==e.id)),w()})(l)},null,8,re)]),l.value?s("",!0):(a(),t("div",de,d(c(j)[b.objkey].inputTitle),1)),c(B)(l.value)>18&&!y.fiflterName.includes(l.value)?(a(),t("div",ce,d(e.$t("The name is too long")),1)):s("",!0)])))),128)),n("div",se,[r(f,{type:"primary",onClick:x},{default:u((()=>[m(d(e.$t("Customize Mode")),1)])),_:1})])])}}},me={class:"device-management-dialog"},ve={class:"edit-form__div"},_e={class:"color-temp-unit"},pe=n("div",null,"————",-1),fe={class:"color-temp-bottom"},ge={class:"color-temp-unit"},be=n("div",null,"————",-1),he={class:"color-temp-bottom"},ye={class:"color-temp-unit"},we=n("div",null,"————",-1),Ve={class:"color-temp-bottom"},xe={key:0,class:"color-temp-unit"},ke={class:"color-temp-unit"},Se={class:"color-temp-unit"},De={__name:"dialog-add",props:{tableData:{type:Array,required:!1,default:()=>[]}},emits:["submit-ok"],setup(S,{expose:D,emit:A}){const L=S;let $=F();$.getRoomList();const{t:C}=E(),U=e({diaShow:!1,title:"",featureArray:[],loading:!1,hvacArray:[],fanArray:[],swingArray:[],newRoomList:[],spaceValue:[],showUrl:!0}),B=p(null);f((()=>$.roomList.filter((e=>!["all","public"].includes(e.area_id)))));const ee=p(),le=e({}),ae=e({fanArray:[],hvacArray:[],swingArray:[]}),te={device_id:"",device_id_ext:"",name:"",area:"Other",url:"",device_type:"Light",feature:0,device_config:{color_temp_unit:0,color_temp_min:2700,color_temp_max:6500}},oe=T,ie={};l((()=>{for(let e in oe){const l=oe[e];ie[l]=e}de()}));const ne={expandTrigger:"hover",value:"area_id",label:"name"},re=e=>{le.name=le.name.toString()},de=()=>{N.getAkApiServerInfo((e=>{e.success&&(0===e.result.mode?te.url=e.result.url:U.showUrl=!1)}))},ce=e=>{const l=e[e.length-1];le.area=l},se=()=>{U.diaShow=!1},De=(e,l,a)=>{var t;const o={"Floor Heat":1,Ventilation:3,"AC Remote":3},i=W()[e];U.featureArray=[],Object.keys(i).forEach((e=>{U.featureArray.push({value:Number(e),label:i[e]})}));const n=M().find((l=>l.value===e));"init"===l&&U.title!==C("Add Device")||(le.device_config={...n.device_config}),"init"!==l&&$e()&&(le.device_config.temp_min="℃"===P()?15:59,le.device_config.temp_max="℃"===P()?30:86);for(let r in oe)if(le.device_config[r]){let e=oe[r];ae[e]=[],Object.keys(le.device_config[r]).sort(((e,l)=>Number(e)-Number(l))).forEach((l=>{ae[e].push({id:l,value:le.device_config[r][l]})}))}if("init"!==l&&Ce()&&(null==(t=null==B?void 0:B.value)?void 0:t.init)&&B.value.init(ae.hvacArray),"init"===l&&U.title!==C("Add Device")||(le.feature=0),o[e]&&(le.feature=o[e]),"init"===l&&a)for(let r in a)le[r]=a[r]},Ae=()=>"Light"===le.device_type&&["2","4","6"].includes(le.feature.toString()),Le=()=>"Cover"===le.device_type&&["8","12"].includes(le.feature.toString()),$e=()=>["AC Remote","Floor Heat"].includes(le.device_type),Ce=()=>{const e="Floor Heat"===le.device_type&&["1"].includes(le.feature.toString()),l="AC Remote"===le.device_type&&["2","3"].includes(le.feature.toString()),a="Ventilation"===le.device_type&&["2","3"].includes(le.feature.toString());return e||l||a},Ue=()=>{const e="AC Remote"===le.device_type,l="Ventilation"===le.device_type;return e||l},Re=()=>{const e="AC Remote"===le.device_type&&["1","3"].includes(le.feature.toString()),l="Ventilation"===le.device_type&&["1","3"].includes(le.feature.toString());return e||l},je=e=>{let l=!0;const a=U[e];if(a.some((e=>""===e.id)))return O(C("ID cannot be empty, please check"),"error"),!1;if(Y(a,"id"))return O(C("ID cannot be duplicated, please check"),"error"),!1;const t=a.every((e=>2===e.id.length)),o=a.every((e=>Z(e.id)));if(!t||!o)return O(C("id is format is incorrect, please re-enter it"),"error"),!1;if(Y(a,"value"))return O(C("The pattern name cannot be duplicated, please check"),"error"),!1;const i=a.some((e=>""===e.value)),n=R(),r=a.some((e=>Q(e.value)>18&&!n.includes(e.value)));if(i||r)return!1;if(!a.length){const l=j[ie[e]];return O(l.addTitle,"error"),!1}return l},Ne=()=>{let e=!0;return Ae()&&!(()=>{let e=!0;const l=Number(le.device_config.color_temp_min),a=Number(le.device_config.color_temp_max),t=le.device_config.color_temp_unit;return X(l)||(e=!1),X(a)||(e=!1),l>=a&&(e=!1),0===t&&l<1e3&&(e=!1),0===t&&a>1e4&&(e=!1),1===t&&l<100&&(e=!1),1===t&&a>1e3&&(e=!1),e})()?(O(C("Please check the color temperature range"),"error"),!1):Le()&&!(()=>{let e=!0;const l=Number(le.device_config.tilt_min),a=Number(le.device_config.tilt_max);return X(l)||(e=!1),X(a)||(e=!1),l>=a&&(e=!1),l<-180&&(e=!1),a>180&&(e=!1),e})()?(O(C("Please check the angle range"),"error"),!1):$e()&&!(()=>{let e=!0;const l=Number(le.device_config.temp_min),a=Number(le.device_config.temp_max),t="℃"===P()?"0":"1";return X(l)||(e=!1),X(a)||(e=!1),l>=a&&(e=!1),"0"===t&&l<5&&(e=!1),"0"===t&&a>35&&(e=!1),"1"===t&&l<41&&(e=!1),"1"===t&&a>95&&(e=!1),e})()?(O(C("Please check the temperature range"),"error"),!1):!(Ce()&&!je("hvacArray"))&&(!(Ue()&&1===Number(le.device_config.fan_ctrl_mode)&&!je("fanArray"))&&(!(Re()&&!je("swingArray"))&&e))},Me=e=>{Ce()&&(U.hvacArray=ae.hvacArray),Ue()&&(U.fanArray=ae.fanArray),Re()&&(U.swingArray=ae.swingArray)},Ie=()=>{Ne()&&ee.value&&ee.value.validate((async e=>{var l;if(e){le.feature=Number(le.feature),Be[le.device_type]();const e=e=>{setTimeout((()=>{U.loading=!1,A("submit-ok"),se()}),2e3)};setTimeout((()=>{U.loading=!1}),2e3),U.loading=!0,"Other"!==le.area&&le.area||(le.area="");const a=q(le);(null==(l=le.device_config)?void 0:l.temp_min)&&"℃"!==P()&&(a.device_config.temp_min=Number(G(le.device_config.temp_min)),a.device_config.temp_max=Number(G(le.device_config.temp_max))),N.updateDeviceList(a,e)}}))},Te=()=>{Ce()||(le.device_config.hvac_modes={}),Ue()||(le.device_config.fan_modes={}),Re()||(le.device_config.swing_modes={})},Ee=(e,l)=>{const a=oe[e];U[a]=l;let t={};l.forEach((e=>{t[e.id]=e.value})),le.device_config[e]=t},Be={Light:()=>{Ae()||(le.device_config={})},Cover:()=>{Le()||(le.device_config={})},"Floor Heat":()=>{Ce()||(le.device_config.hvac_modes={})},Switch:()=>{le.device_config={}},Music:()=>{le.device_config={}},"AC Remote":Te,Ventilation:()=>{Te()}},Oe=e({name:[{validator:(e,l,a)=>{if(!l)return a(C("Enter Device Name"));let t=L.tableData;le.device_id&&(t=L.tableData.filter((e=>e.device_id!==le.device_id)));const o=t.find((e=>e.name===l));return Q(l)>20?a(C("The name is too long")):(null==o?void 0:o.name)?a(C("The name already exists.")):a()},trigger:"blur"}],url:[{validator:(e,l,a)=>J(l)?a():a(C("Please enter a valid IP address.")),trigger:"blur"}],device_id_ext:[{validator:(e,l,a)=>{let t=parseInt(l,16);if(L.tableData.filter((e=>e.device_id!==le.device_id)).find((e=>parseInt(e.device_id_ext,16)===parseInt(l,16))))return a(C("Device ID is duplicate"));const o=Number(l)instanceof Number,i=Number(t)<0||Number(t)>1048575||!t,n=5!==l.length;if(o||i||n)return a(C("Device ID format error"));a()},trigger:"blur"}]}),Fe=e=>{0===e?(le.device_config.color_temp_min=2700,le.device_config.color_temp_max=6500):(le.device_config.color_temp_min=153,le.device_config.color_temp_max=370)};return D({changeShow:e=>{var l,a,t,o,i;U.newRoomList=null==(o=null==(t=null==(a=null==(l=$.newRoomList)?void 0:l.map)?void 0:a.call(l,(e=>({...e,name:C(null==e?void 0:e.name)}))))?void 0:t.filter)?void 0:o.call(t,(e=>!("all"===e.area_id||"public"===e.area_id))),(()=>{var e;U.newRoomList.length&&U.newRoomList[0].children.length?(te.area=U.newRoomList[0].children[0].area_id,U.spaceValue=[U.newRoomList[0].area_id,U.newRoomList[0].children[0].area_id]):(te.area=(null==(e=U.newRoomList[0])?void 0:e.area_id)||"Other",U.spaceValue=[te.area])})();let n=te;if(e){const l=M().find((l=>l.value===e.device_type));for(let a in e.device_config){const l=e.device_config[a];H(l)&&delete e.device_config[a]}e.device_config={...l.device_config,...e.device_config},n=q(e),(e=>{var l;let a=[];$.newRoomList.forEach((l=>{var t,o;(null==l?void 0:l.area_id)===e&&(null==(t=null==a?void 0:a.push)||t.call(a,null==l?void 0:l.area_id)),(null==(o=null==l?void 0:l.children)?void 0:o.length)>0&&l.children.forEach((t=>{(null==t?void 0:t.area_id)===e&&(a=[l.area_id,t.area_id])}))})),e&&0!==a.length||null==(l=null==a?void 0:a.push)||l.call(a,"Other"),U.spaceValue=a})(e.area),U.title=C("Edit Device"),(null==(i=n.device_config)?void 0:i.temp_min)&&"℃"!==P()&&(n.device_config.temp_min=K(n.device_config.temp_min),n.device_config.temp_max=K(n.device_config.temp_max))}else U.title=C("Add Device");for(let r in n)le[r]=n[r];De(le.device_type,"init",n),e||(()=>{let e=0;for(let l=1;l<500;l++)if(!L.tableData.find((e=>Number(e.device_id_ext)===l))){e=l.toString().padStart(5,"0");break}le.device_id_ext=e})(),U.diaShow=!U.diaShow}}),(e,l)=>{const p=v,f=b,S=h,D=y,A=w,L=V,$=x,R=_,j=k;return a(),t("div",me,[r(z,{show:U.diaShow,"onUpdate:show":l[14]||(l[14]=e=>U.diaShow=e),"foot-show":!1,title:U.title,loading:U.loading,"back-show":!1,"button-ok-name":e.$t("Submit"),onButtonCancel:se},{content:u((()=>[n("div",ve,[r(j,{ref_key:"ruleFormRef",ref:ee,model:le,"label-width":"auto",style:{"max-width":"600px"},rules:Oe},{default:u((()=>[r(f,{prop:"name"},{default:u((()=>[r(p,{modelValue:le.name,"onUpdate:modelValue":l[0]||(l[0]=e=>le.name=e),placeholder:e.$t("Enter Device Name"),maxlength:20,onBlur:re},null,8,["modelValue","placeholder"])])),_:1}),r(f,{label:e.$t("Select Device type:")},{default:u((()=>[r(D,{modelValue:le.device_type,"onUpdate:modelValue":l[1]||(l[1]=e=>le.device_type=e),class:"special-select",onChange:De},{default:u((()=>[(a(!0),t(o,null,i(c(M)(),(e=>(a(),g(S,{key:e.name,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),r(f,{label:e.$t("Select function:")},{default:u((()=>[r(D,{modelValue:le.feature,"onUpdate:modelValue":l[2]||(l[2]=e=>le.feature=e),class:"special-select",onChange:Me},{default:u((()=>[(a(!0),t(o,null,i(U.featureArray,(e=>(a(),g(S,{key:e.label,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),Ae()?(a(),g(f,{key:0,label:e.$t("Set the color temperature range:")},{default:u((()=>[n("div",_e,[r(p,{modelValue:le.device_config.color_temp_min,"onUpdate:modelValue":l[3]||(l[3]=e=>le.device_config.color_temp_min=e),class:"color-temp-unit__input"},null,8,["modelValue"]),pe,r(p,{modelValue:le.device_config.color_temp_max,"onUpdate:modelValue":l[4]||(l[4]=e=>le.device_config.color_temp_max=e),class:"color-temp-unit__input color-temp-unit-right"},null,8,["modelValue"]),r(D,{modelValue:le.device_config.color_temp_unit,"onUpdate:modelValue":l[5]||(l[5]=e=>le.device_config.color_temp_unit=e),class:"device-type-color-unit",onChange:Fe},{default:u((()=>[(a(!0),t(o,null,i(c(I),(e=>(a(),g(S,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),n("div",fe,[n("span",null,d(0===le.device_config.color_temp_unit?c(C)("Please adjust between 1000~10000 K"):c(C)("Please adjust between 100~1000 M")),1)])])),_:1},8,["label"])):s("",!0),Le()?(a(),g(f,{key:1,class:"dialog-cover-item",label:e.$t("Set the angle range:")},{default:u((()=>[n("div",ge,[r(p,{modelValue:le.device_config.tilt_min,"onUpdate:modelValue":l[6]||(l[6]=e=>le.device_config.tilt_min=e),class:"color-temp-unit__input"},null,8,["modelValue"]),m("° "),be,r(p,{modelValue:le.device_config.tilt_max,"onUpdate:modelValue":l[7]||(l[7]=e=>le.device_config.tilt_max=e),class:"color-temp-unit__input"},null,8,["modelValue"]),m("° ")]),n("div",he,[n("span",null,d(e.$t("*(-180° ~ 180℃)")),1)])])),_:1},8,["label"])):s("",!0),$e()?(a(),g(f,{key:2,class:"dialog-cover-item",label:e.$t("Set temperature range:")},{default:u((()=>[n("div",ye,[r(p,{modelValue:le.device_config.temp_min,"onUpdate:modelValue":l[8]||(l[8]=e=>le.device_config.temp_min=e),modelModifiers:{number:!0},maxlength:4,class:"color-temp-unit__input"},null,8,["modelValue"]),we,r(p,{modelValue:le.device_config.temp_max,"onUpdate:modelValue":l[9]||(l[9]=e=>le.device_config.temp_max=e),modelModifiers:{number:!0},maxlength:4,class:"color-temp-unit__input color-temp-unit-right"},null,8,["modelValue"])]),n("div",Ve,[n("span",null,d("℃"===c(P)()?e.$t("please adjust between 5 and 35 ℃"):c(C)("Please adjust between 41-95 ℉")),1)])])),_:1},8,["label"])):s("",!0),Ue()?(a(),g(f,{key:3,class:"dialog-cover-item",label:e.$t("Select Fan Speed:")},{default:u((()=>[r(L,{modelValue:le.device_config.fan_ctrl_mode,"onUpdate:modelValue":l[10]||(l[10]=e=>le.device_config.fan_ctrl_mode=e)},{default:u((()=>[r(A,{label:0,size:"large"},{default:u((()=>[m(d(e.$t("Stepless adjustment")),1)])),_:1}),r(A,{label:1,size:"large"},{default:u((()=>[m(d(e.$t("Gear adjustm ent")),1)])),_:1})])),_:1},8,["modelValue"]),1===le.device_config.fan_ctrl_mode?(a(),t("div",xe,[r(ue,{objkey:"fan_modes","array-modes":ae.fanArray,onSetMode:Ee},null,8,["array-modes"])])):s("",!0)])),_:1},8,["label"])):s("",!0),Re()?(a(),g(f,{key:4,class:"dialog-cover-item",label:e.$t("Wind Direction Configuration:")},{default:u((()=>[n("div",ke,[r(ue,{objkey:"swing_modes","array-modes":ae.swingArray,onSetMode:Ee},null,8,["array-modes"])])])),_:1},8,["label"])):s("",!0),Ce()?(a(),g(f,{key:5,class:"dialog-cover-item",label:e.$t("Mode Configuration:")},{default:u((()=>[n("div",Se,[r(ue,{ref_key:"modeInputRef",ref:B,objkey:"hvac_modes","array-modes":ae.hvacArray,onSetMode:Ee},null,8,["array-modes"])])])),_:1},8,["label"])):s("",!0),r(f,{label:e.$t("Select location:")},{default:u((()=>[r($,{modelValue:U.spaceValue,"onUpdate:modelValue":l[11]||(l[11]=e=>U.spaceValue=e),class:"special-select","popper-class":"dia-space-cascader",options:U.newRoomList,props:ne,onChange:ce},null,8,["modelValue","options"])])),_:1},8,["label"]),U.showUrl?(a(),g(f,{key:6,label:e.$t("Receiver address:"),prop:"url"},{default:u((()=>[r(p,{modelValue:le.url,"onUpdate:modelValue":l[12]||(l[12]=e=>le.url=e),maxlength:15},null,8,["modelValue"])])),_:1},8,["label"])):s("",!0),r(f,{label:e.$t("Device ID:"),prop:"device_id_ext"},{default:u((()=>[r(p,{modelValue:le.device_id_ext,"onUpdate:modelValue":l[13]||(l[13]=e=>le.device_id_ext=e)},null,8,["modelValue"])])),_:1},8,["label"]),r(f,{class:"bottom-sumit"},{default:u((()=>[r(R,{type:"primary",onClick:Ie},{default:u((()=>[m(d(e.$t("Submit")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["show","title","loading","button-ok-name"])])}}},Ae={class:"engy-device-management"},Le=["onClick"],$e={class:"engy-device-error-title"},Ce={__name:"index",setup(o){let i=F(),s=ee();const{t:v}=E(),_=e({tableData:[],deleteShow:!1,upLoading:!1,isSelected:!0,secondShow:!1,exportDisable:!1,errorShow:!1,fileObj:{},errorData:[],loading:!1}),g={},b=p(null),h=p(null),y=p(null);l((()=>{M().forEach((e=>{g[e.value]=e.name})),w(),N.getTempUnite()}));const w=()=>{s.getEngyDevices()},V=()=>{_.isSelected=!s.engyDeviceList.some((e=>e.checked))},x=f((()=>{var e;return!!(null==(e=s.engyDeviceList)?void 0:e.length)&&s.engyDeviceList.every((e=>e.checked))})),k=()=>{s.engyDeviceList=s.engyDeviceList.map((e=>({...e,checked:!x.value}))),V()},R=(e,l)=>{if(s.engyDeviceList.length>=128&&"edit"!==l)return O(v("Reached maximum limit, failed to add"),"error");b.value.changeShow(e)},j=()=>{y.value.changeShow()},I=()=>{_.exportDisable=!0,A({message:v("loading..."),appendTo:"hidden-8850",duration:6e4});N.exportDeviceList((()=>{_.exportDisable=!1,A.closeAll()}))},T=()=>{_.deleteShow=!0},B=()=>{_.deleteShow=!1},P=()=>{_.secondShow=!1},H=()=>{_.errorShow=!1},q=()=>{const e=s.engyDeviceList.filter((e=>e.checked)).map((e=>e.device_id));N.deleteDeviceList(e,(()=>{w(),B()}))},K=(e,l)=>{const a=e.name.endsWith(".csv");if(!a)return O(v("Please upload the correct file format"),"error"),l(a);l(!0)},W=e=>{_.fileObj=e,_.secondShow=!0},G=()=>{P();const e=new FileReader;e.onload=e=>{const l=e.target.result.split(",")[1];_.upLoading=!0,setTimeout((()=>{_.upLoading=!1}),1e4),N.importDeviceList((e=>{_.upLoading=!1,y.value.changeShow(),(null==e?void 0:e.success)?(w(),O(v("Success"),"success")):(_.errorData=e.result,_.errorShow=!0)}),l)},e.readAsDataURL(_.fileObj)};return(e,l)=>{const o=L,v=$,p=C,f=U;return S((a(),t("div",Ae,[r(ae,{ref_key:"tableIndexRef",ref:h,"delete-disable":_.isSelected,"export-disable":_.exportDisable,onOpenAdd:R,onImportFile:j,onExportFile:I,onHandleDelete:T},{table:u((()=>[r(p,{data:c(s).engyDeviceList,"header-cell-style":c(te),"cell-style":c(oe),style:D({width:"calc(100vw - 270px)",height:"calc(100vh - 200px)"}),"highlight-current-row":"","scrollbar-always-on":""},{default:u((()=>[r(v,{"show-overflow-tooltip":"",label:e.$t("Index"),width:"100"},{header:u((()=>[r(o,{"model-value":x.value,label:e.$t("Select all"),size:"large",onChange:k},null,8,["model-value","label"])])),default:u((e=>[r(o,{modelValue:e.row.checked,"onUpdate:modelValue":l=>e.row.checked=l,"local-name":e.row.name,label:e.row.newIndex,size:"large",onChange:l=>(e.row,void V())},null,8,["modelValue","onUpdate:modelValue","local-name","label","onChange"])])),_:1},8,["label"]),r(v,{"show-overflow-tooltip":"",label:e.$t("Device Name")},{default:u((e=>[m(d(e.row.name),1)])),_:1},8,["label"]),r(v,{"show-overflow-tooltip":"",label:e.$t("Type")},{default:u((e=>[m(d(g[e.row.device_type]),1)])),_:1},8,["label"]),r(v,{"show-overflow-tooltip":"",label:e.$t("Subtype")},{default:u((e=>[m(d(e.row.showSubtype),1)])),_:1},8,["label"]),r(v,{"show-overflow-tooltip":"",label:e.$t("DeviceID")},{default:u((e=>[m(d(e.row.device_id_ext),1)])),_:1},8,["label"]),r(v,{"show-overflow-tooltip":"",label:e.$t("edit"),width:"150"},{default:u((e=>[n("div",{class:"device__name__svg",onClick:l=>R(e.row,"edit")},null,8,Le)])),_:1},8,["label"])])),_:1},8,["data","header-cell-style","cell-style","style"])])),_:1},8,["delete-disable","export-disable"]),r(De,{ref_key:"dialogAddRef",ref:b,"table-data":c(s).engyDeviceList,onSubmitOk:w},null,8,["table-data"]),r(z,{show:_.deleteShow,"onUpdate:show":l[0]||(l[0]=e=>_.deleteShow=e),"button-cancel-show":!0,onButtonCancel:B,onButtonConfirm:q},{content:u((()=>[n("div",null,d(e.$t("Do you want to delete these data?")),1)])),_:1},8,["show"]),r(le,{ref_key:"fileRef",ref:y,accept:".csv",title:e.$t("Import device template"),loading:_.upLoading,"is-top-set":!0,onBeforeUpdate:K,onUpload:W},null,8,["title","loading"]),r(z,{show:_.secondShow,"onUpdate:show":l[1]||(l[1]=e=>_.secondShow=e),"button-cancel-show":!0,onButtonCancel:P,onButtonConfirm:G},{content:u((()=>[n("div",null,d(e.$t("After importing the file, the original data will be overwritten. Are you sure you want to continue importing?")),1)])),_:1},8,["show"]),r(z,{show:_.errorShow,"onUpdate:show":l[2]||(l[2]=e=>_.errorShow=e),title:e.$t("Result"),"button-ok-name":e.$t("Close"),onButtonCancel:H,onButtonConfirm:H},{content:u((()=>[n("div",null,[n("div",$e,d(e.$t("Import failed, please modify the content and try again")),1),r(p,{data:_.errorData},{default:u((()=>[r(v,{prop:"line",label:e.$t("Error Line")},null,8,["label"]),r(v,{prop:"message",label:e.$t("Reason for failure")},null,8,["label"])])),_:1},8,["data"])])])),_:1},8,["show","title","button-ok-name"])])),[[f,0===c(i).newRoomList.length||c(s).akLoading]])}}};export{Ce as default};
